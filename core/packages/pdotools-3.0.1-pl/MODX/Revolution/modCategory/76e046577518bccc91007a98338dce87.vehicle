<?php return array (
  'unique_key' => 'category',
  'preserve_keys' => false,
  'update_object' => true,
  'abort_install_on_vehicle_fail' => true,
  'related_object_attributes' => 
  array (
    'Snippets' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'Plugins' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'PluginEvents' => 
    array (
      'preserve_keys' => true,
      'update_object' => true,
      'unique_key' => 
      array (
        0 => 'pluginid',
        1 => 'event',
      ),
    ),
  ),
  'related_objects' => 
  array (
    'Snippets' => 
    array (
      '423a4aaad757ace882408a9c0fa6fb29' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'MODX\\Revolution\\modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoResources","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"use ModxPro\\\\PdoTools\\\\Fetch;\\r\\nuse MODX\\\\Revolution\\\\modSnippet;\\r\\n\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var \\\\MODX\\\\Revolution\\\\modX $modx *\\/\\r\\n\\r\\nif (isset($parents) && $parents === \'\') {\\r\\n    $scriptProperties[\'parents\'] = $modx->resource->id;\\r\\n}\\r\\nif (!empty($returnIds)) {\\r\\n    $scriptProperties[\'return\'] = $return = \'ids\';\\r\\n} elseif (!isset($return)) {\\r\\n    $scriptProperties[\'return\'] = $return = \'chunks\';\\r\\n}\\r\\n\\r\\n\\/\\/ Adding extra parameters into special place so we can put them in a results\\r\\n\\/** @var modSnippet $snippet *\\/\\r\\n$additionalPlaceholders = $properties = [];\\r\\nif (isset($this) && $this instanceof modSnippet && $this->get(\'properties\')) {\\r\\n    $properties = $this->get(\'properties\');\\r\\n} elseif ($snippet = $modx->getObject(modSnippet::class, [\'name\' => \'pdoResources\'])) {\\r\\n    $properties = $snippet->get(\'properties\');\\r\\n}\\r\\nif (!empty($properties)) {\\r\\n    foreach ($scriptProperties as $k => $v) {\\r\\n        if (!isset($properties[$k])) {\\r\\n            $additionalPlaceholders[$k] = $v;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n$scriptProperties[\'additionalPlaceholders\'] = $additionalPlaceholders;\\r\\n\\r\\n$modx->services[\'pdotools_config\'] = $scriptProperties;\\r\\n$pdoFetch = $modx->services->get(Fetch::class);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n$output = $pdoFetch->run();\\r\\n\\r\\nif ($modx->user->isAuthenticated(\'mgr\') && !empty($showLog)) {\\r\\n    $modx->setPlaceholder(\'pdoResourcesLog\', print_r($pdoFetch->getTime(), true));\\r\\n}\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (!empty($returnIds)) {\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n} elseif ($return === \'data\') {\\r\\n    return $output;\\r\\n} elseif (!empty($toSeparatePlaceholders)) {\\r\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n} else {\\r\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\r\\n        $output = $pdoFetch->getChunk($tplWrapper, array_merge($additionalPlaceholders, [\'output\' => $output]),\\r\\n            $pdoFetch->config(\'fastMode\'));\\r\\n    }\\r\\n\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n}","locked":0,"properties":"a:47:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:17:\\"pdotools_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"returnIds\\";a:7:{s:4:\\"name\\";s:9:\\"returnIds\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_returnIds\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:11:\\"publishedon\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"sortbyTV\\";a:7:{s:4:\\"name\\";s:8:\\"sortbyTV\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_sortbyTV\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"sortbyTVType\\";a:7:{s:4:\\"name\\";s:12:\\"sortbyTVType\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_sortbyTVType\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:4:\\"DESC\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"sortdirTV\\";a:7:{s:4:\\"name\\";s:9:\\"sortdirTV\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_sortdirTV\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:3:\\"ASC\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"includeContent\\";a:7:{s:4:\\"name\\";s:14:\\"includeContent\\";s:4:\\"desc\\";s:28:\\"pdotools_prop_includeContent\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"prepareTVs\\";a:7:{s:4:\\"name\\";s:10:\\"prepareTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_prepareTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"1\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"processTVs\\";a:7:{s:4:\\"name\\";s:10:\\"processTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_processTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"tv.\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"tvFilters\\";a:7:{s:4:\\"name\\";s:9:\\"tvFilters\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_tvFilters\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:21:\\"tvFiltersAndDelimiter\\";a:7:{s:4:\\"name\\";s:21:\\"tvFiltersAndDelimiter\\";s:4:\\"desc\\";s:35:\\"pdotools_prop_tvFiltersAndDelimiter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\",\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:20:\\"tvFiltersOrDelimiter\\";a:7:{s:4:\\"name\\";s:20:\\"tvFiltersOrDelimiter\\";s:4:\\"desc\\";s:34:\\"pdotools_prop_tvFiltersOrDelimiter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:2:\\"||\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"hideContainers\\";a:7:{s:4:\\"name\\";s:14:\\"hideContainers\\";s:4:\\"desc\\";s:28:\\"pdotools_prop_hideContainers\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"context\\";a:7:{s:4:\\"name\\";s:7:\\"context\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_context\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"idx\\";a:7:{s:4:\\"name\\";s:3:\\"idx\\";s:4:\\"desc\\";s:17:\\"pdotools_prop_idx\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"first\\";a:7:{s:4:\\"name\\";s:5:\\"first\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_first\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"last\\";a:7:{s:4:\\"name\\";s:4:\\"last\\";s:4:\\"desc\\";s:18:\\"pdotools_prop_last\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplFirst\\";a:7:{s:4:\\"name\\";s:8:\\"tplFirst\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tplFirst\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplLast\\";a:7:{s:4:\\"name\\";s:7:\\"tplLast\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_tplLast\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"tplOdd\\";a:7:{s:4:\\"name\\";s:6:\\"tplOdd\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_tplOdd\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplWrapper\\";a:7:{s:4:\\"name\\";s:10:\\"tplWrapper\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_tplWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"wrapIfEmpty\\";a:7:{s:4:\\"name\\";s:11:\\"wrapIfEmpty\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_wrapIfEmpty\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"totalVar\\";a:7:{s:4:\\"name\\";s:8:\\"totalVar\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_totalVar\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:5:\\"total\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"tplCondition\\";a:7:{s:4:\\"name\\";s:12:\\"tplCondition\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_tplCondition\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"tplOperator\\";a:7:{s:4:\\"name\\";s:11:\\"tplOperator\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_tplOperator\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:10:{i:0;a:2:{s:4:\\"text\\";s:11:\\"is equal to\\";s:5:\\"value\\";s:2:\\"==\\";}i:1;a:2:{s:4:\\"text\\";s:15:\\"is not equal to\\";s:5:\\"value\\";s:2:\\"!=\\";}i:2;a:2:{s:4:\\"text\\";s:9:\\"less than\\";s:5:\\"value\\";s:1:\\"<\\";}i:3;a:2:{s:4:\\"text\\";s:21:\\"less than or equal to\\";s:5:\\"value\\";s:2:\\"<=\\";}i:4;a:2:{s:4:\\"text\\";s:24:\\"greater than or equal to\\";s:5:\\"value\\";s:2:\\">=\\";}i:5;a:2:{s:4:\\"text\\";s:8:\\"is empty\\";s:5:\\"value\\";s:5:\\"empty\\";}i:6;a:2:{s:4:\\"text\\";s:12:\\"is not empty\\";s:5:\\"value\\";s:6:\\"!empty\\";}i:7;a:2:{s:4:\\"text\\";s:7:\\"is null\\";s:5:\\"value\\";s:4:\\"null\\";}i:8;a:2:{s:4:\\"text\\";s:11:\\"is in array\\";s:5:\\"value\\";s:7:\\"inarray\\";}i:9;a:2:{s:4:\\"text\\";s:10:\\"is between\\";s:5:\\"value\\";s:7:\\"between\\";}}s:5:\\"value\\";s:2:\\"==\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"conditionalTpls\\";a:7:{s:4:\\"name\\";s:15:\\"conditionalTpls\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_conditionalTpls\\";s:4:\\"type\\";s:8:\\"textarea\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"select\\";a:7:{s:4:\\"name\\";s:6:\\"select\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_select\\";s:4:\\"type\\";s:8:\\"textarea\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:22:\\"toSeparatePlaceholders\\";a:7:{s:4:\\"name\\";s:22:\\"toSeparatePlaceholders\\";s:4:\\"desc\\";s:36:\\"pdotools_prop_toSeparatePlaceholders\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"loadModels\\";a:7:{s:4:\\"name\\";s:10:\\"loadModels\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_loadModels\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"scheme\\";a:7:{s:4:\\"name\\";s:6:\\"scheme\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_scheme\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:6:{i:0;a:2:{s:5:\\"value\\";s:0:\\"\\";s:4:\\"text\\";s:14:\\"System default\\";}i:1;a:2:{s:5:\\"value\\";i:-1;s:4:\\"text\\";s:25:\\"-1 (relative to site_url)\\";}i:2;a:2:{s:5:\\"value\\";s:4:\\"full\\";s:4:\\"text\\";s:40:\\"full (absolute, prepended with site_url)\\";}i:3;a:2:{s:5:\\"value\\";s:3:\\"abs\\";s:4:\\"text\\";s:39:\\"abs (absolute, prepended with base_url)\\";}i:4;a:2:{s:5:\\"value\\";s:4:\\"http\\";s:4:\\"text\\";s:38:\\"http (absolute, forced to http scheme)\\";}i:5;a:2:{s:5:\\"value\\";s:5:\\"https\\";s:4:\\"text\\";s:40:\\"https (absolute, forced to https scheme)\\";}}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"useWeblinkUrl\\";a:7:{s:4:\\"name\\";s:13:\\"useWeblinkUrl\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_useWeblinkUrl\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdoresources.php","content":"use ModxPro\\\\PdoTools\\\\Fetch;\\r\\nuse MODX\\\\Revolution\\\\modSnippet;\\r\\n\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var \\\\MODX\\\\Revolution\\\\modX $modx *\\/\\r\\n\\r\\nif (isset($parents) && $parents === \'\') {\\r\\n    $scriptProperties[\'parents\'] = $modx->resource->id;\\r\\n}\\r\\nif (!empty($returnIds)) {\\r\\n    $scriptProperties[\'return\'] = $return = \'ids\';\\r\\n} elseif (!isset($return)) {\\r\\n    $scriptProperties[\'return\'] = $return = \'chunks\';\\r\\n}\\r\\n\\r\\n\\/\\/ Adding extra parameters into special place so we can put them in a results\\r\\n\\/** @var modSnippet $snippet *\\/\\r\\n$additionalPlaceholders = $properties = [];\\r\\nif (isset($this) && $this instanceof modSnippet && $this->get(\'properties\')) {\\r\\n    $properties = $this->get(\'properties\');\\r\\n} elseif ($snippet = $modx->getObject(modSnippet::class, [\'name\' => \'pdoResources\'])) {\\r\\n    $properties = $snippet->get(\'properties\');\\r\\n}\\r\\nif (!empty($properties)) {\\r\\n    foreach ($scriptProperties as $k => $v) {\\r\\n        if (!isset($properties[$k])) {\\r\\n            $additionalPlaceholders[$k] = $v;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n$scriptProperties[\'additionalPlaceholders\'] = $additionalPlaceholders;\\r\\n\\r\\n$modx->services[\'pdotools_config\'] = $scriptProperties;\\r\\n$pdoFetch = $modx->services->get(Fetch::class);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n$output = $pdoFetch->run();\\r\\n\\r\\nif ($modx->user->isAuthenticated(\'mgr\') && !empty($showLog)) {\\r\\n    $modx->setPlaceholder(\'pdoResourcesLog\', print_r($pdoFetch->getTime(), true));\\r\\n}\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (!empty($returnIds)) {\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n} elseif ($return === \'data\') {\\r\\n    return $output;\\r\\n} elseif (!empty($toSeparatePlaceholders)) {\\r\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n} else {\\r\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\r\\n        $output = $pdoFetch->getChunk($tplWrapper, array_merge($additionalPlaceholders, [\'output\' => $output]),\\r\\n            $pdoFetch->config(\'fastMode\'));\\r\\n    }\\r\\n\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n}"}',
        'guid' => 'da13ec261317f1c0d025511ec2b10970',
        'native_key' => 0,
        'signature' => '4f8c633af93d16f1e10fcf7cebb125e1',
      ),
      'fd04dbd4f2e2686743495976520ddb86' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'MODX\\Revolution\\modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoUsers","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"use ModxPro\\\\PdoTools\\\\Fetch;\\r\\nuse MODX\\\\Revolution\\\\modUser;\\r\\nuse MODX\\\\Revolution\\\\modUserGroup;\\r\\nuse MODX\\\\Revolution\\\\modUserGroupMember;\\r\\nuse MODX\\\\Revolution\\\\modUserGroupRole;\\r\\nuse MODX\\\\Revolution\\\\modUserProfile;\\r\\n\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var \\\\MODX\\\\Revolution\\\\modX $modx *\\/\\r\\n\\r\\nif (!empty($returnIds)) {\\r\\n    $scriptProperties[\'return\'] = $return = \'ids\';\\r\\n} elseif (!isset($return)) {\\r\\n    $scriptProperties[\'return\'] = $return = \'chunks\';\\r\\n}\\r\\n$modx->services[\'pdotools_config\'] = $scriptProperties;\\r\\n$pdoFetch = $modx->services->get(Fetch::class);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\n$class = modUser::class;\\r\\n$alias_class = $modx->getAlias($class);\\r\\n$profile = modUserProfile::class;\\r\\n$alias_profile = $modx->getAlias($profile);\\r\\n$member = modUserGroupMember::class;\\r\\n$alias_member = $modx->getAlias($member);\\r\\n\\r\\n\\/\\/ Start building \\"Where\\" expression\\r\\n$where = [];\\r\\nif (empty($showInactive)) {\\r\\n    $where[$alias_class . \'.active\'] = 1;\\r\\n}\\r\\nif (empty($showBlocked)) {\\r\\n    $where[$alias_profile . \'.blocked\'] = 0;\\r\\n}\\r\\n\\r\\n\\/\\/ Add users profiles and groups\\r\\n$innerJoin = [\\r\\n    $profile => [\'class\' => $profile, \'alias\' => $alias_profile, \'on\' => \\"$alias_class.id = $alias_profile.internalKey\\"],\\r\\n];\\r\\n\\r\\n\\/\\/ Filter by users, groups and roles\\r\\n$tmp = [\\r\\n    \'users\' => [\\r\\n        \'class\' => $class,\\r\\n        \'name\' => \'username\',\\r\\n        \'join\' => $alias_class . \'.id\',\\r\\n    ],\\r\\n    \'groups\' => [\\r\\n        \'class\' => modUserGroup::class,\\r\\n        \'name\' => \'name\',\\r\\n        \'join\' => $alias_member . \'.user_group\',\\r\\n    ],\\r\\n    \'roles\' => [\\r\\n        \'class\' => modUserGroupRole::class,\\r\\n        \'name\' => \'name\',\\r\\n        \'join\' => $alias_member . \'.role\',\\r\\n    ],\\r\\n];\\r\\nforeach ($tmp as $k => $p) {\\r\\n    if (!empty($$k)) {\\r\\n        $$k = array_map(\'trim\', explode(\',\', $$k));\\r\\n        ${$k . \'_in\'} = ${$k . \'_out\'} = $fetch_in = $fetch_out = [];\\r\\n        foreach ($$k as $v) {\\r\\n            if (is_numeric($v)) {\\r\\n                if ($v[0] == \'-\') {\\r\\n                    ${$k . \'_out\'}[] = abs($v);\\r\\n                } else {\\r\\n                    ${$k . \'_in\'}[] = abs($v);\\r\\n                }\\r\\n            } else {\\r\\n                if ($v[0] == \'-\') {\\r\\n                    $fetch_out[] = $v;\\r\\n                } else {\\r\\n                    $fetch_in[] = $v;\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n\\r\\n        if (!empty($fetch_in) || !empty($fetch_out)) {\\r\\n            $q = $modx->newQuery($p[\'class\'], [$p[\'name\'] . \':IN\' => array_merge($fetch_in, $fetch_out)]);\\r\\n            $q->select(\'id,\' . $p[\'name\']);\\r\\n            $tstart = microtime(true);\\r\\n            if ($q->prepare() && $q->stmt->execute()) {\\r\\n                $modx->queryTime += microtime(true) - $tstart;\\r\\n                $modx->executedQueries++;\\r\\n                while ($row = $q->stmt->fetch(PDO::FETCH_ASSOC)) {\\r\\n                    if (in_array($row[$p[\'name\']], $fetch_in)) {\\r\\n                        ${$k . \'_in\'}[] = $row[\'id\'];\\r\\n                    } else {\\r\\n                        ${$k . \'_out\'}[] = $row[\'id\'];\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n\\r\\n        if (!empty(${$k . \'_in\'})) {\\r\\n            $where[$p[\'join\'] . \':IN\'] = ${$k . \'_in\'};\\r\\n        }\\r\\n        if (!empty(${$k . \'_out\'})) {\\r\\n            $where[$p[\'join\'] . \':NOT IN\'] = ${$k . \'_out\'};\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\nif (!empty($groups_in) || !empty($groups_out) || !empty($roles_in) || !empty($roles_out)) {\\r\\n    $innerJoin[$alias_member] = [\'class\' => $member, \'alias\' => $alias_member, \'on\' => \\"$alias_class.id = $alias_member.member\\"];\\r\\n}\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$select = [\\r\\n    $profile => implode(\',\', array_diff(array_keys($modx->getFieldMeta($profile)), [\'sessionid\'])),\\r\\n    $class => implode(\',\', array_diff(array_keys($modx->getFieldMeta($class)), [\'password\', \'cachepwd\', \'salt\', \'session_stale\', \'remote_key\', \'remote_data\', \'hash_class\'])),\\r\\n];\\r\\n\\r\\n\\/\\/ Add custom parameters\\r\\nforeach ([\'where\', \'innerJoin\', \'select\'] as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n$default = [\\r\\n    \'class\' => $class,\\r\\n    \'innerJoin\' => $innerJoin,\\r\\n    \'where\' => $where,\\r\\n    \'select\' => $select,\\r\\n    \'groupby\' => $alias_class . \'.id\',\\r\\n    \'sortby\' => $alias_class . \'.id\',\\r\\n    \'sortdir\' => \'ASC\',\\r\\n    \'fastMode\' => false,\\r\\n    \'return\' => $return,\\r\\n    \'disableConditions\' => true,\\r\\n];\\r\\n\\r\\nif (!empty($users_in) && (empty($scriptProperties[\'sortby\']) || $scriptProperties[\'sortby\'] == $alias_class . \'.id\')) {\\r\\n    $scriptProperties[\'sortby\'] = \\"find_in_set(`$alias_class`.`id`,\'\\" . implode(\',\', $users_in) . \\"\')\\";\\r\\n    $scriptProperties[\'sortdir\'] = \'\';\\r\\n}\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->addTime(\'Query parameters ready\');\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\r\\n$output = $pdoFetch->run();\\r\\n\\r\\n$log = \'\';\\r\\nif ($modx->user->isAuthenticated(\'mgr\') && !empty($showLog)) {\\r\\n    $modx->setPlaceholder(\'pdoUsersLog\',  print_r($pdoFetch->getTime(), true));\\r\\n}\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (!empty($returnIds)) {\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n} elseif ($return === \'data\') {\\r\\n    return $output;\\r\\n} elseif (!empty($toSeparatePlaceholders)) {\\r\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n} else {\\r\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\r\\n        $output = $pdoFetch->getChunk($tplWrapper, [\'output\' => $output], $pdoFetch->config(\'fastMode\'));\\r\\n    }\\r\\n\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n}","locked":0,"properties":"a:30:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:17:\\"pdotools_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"returnIds\\";a:7:{s:4:\\"name\\";s:9:\\"returnIds\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_returnIds\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:10:\\"modUser.id\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:3:\\"ASC\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"groups\\";a:7:{s:4:\\"name\\";s:6:\\"groups\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_groups\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"roles\\";a:7:{s:4:\\"name\\";s:5:\\"roles\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_roles\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"users\\";a:7:{s:4:\\"name\\";s:5:\\"users\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_users\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"showInactive\\";a:7:{s:4:\\"name\\";s:12:\\"showInactive\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_showInactive\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showBlocked\\";a:7:{s:4:\\"name\\";s:11:\\"showBlocked\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_showBlocked\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"idx\\";a:7:{s:4:\\"name\\";s:3:\\"idx\\";s:4:\\"desc\\";s:17:\\"pdotools_prop_idx\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"first\\";a:7:{s:4:\\"name\\";s:5:\\"first\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_first\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"last\\";a:7:{s:4:\\"name\\";s:4:\\"last\\";s:4:\\"desc\\";s:18:\\"pdotools_prop_last\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplFirst\\";a:7:{s:4:\\"name\\";s:8:\\"tplFirst\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tplFirst\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplLast\\";a:7:{s:4:\\"name\\";s:7:\\"tplLast\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_tplLast\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"tplOdd\\";a:7:{s:4:\\"name\\";s:6:\\"tplOdd\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_tplOdd\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplWrapper\\";a:7:{s:4:\\"name\\";s:10:\\"tplWrapper\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_tplWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"wrapIfEmpty\\";a:7:{s:4:\\"name\\";s:11:\\"wrapIfEmpty\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_wrapIfEmpty\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"totalVar\\";a:7:{s:4:\\"name\\";s:8:\\"totalVar\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_totalVar\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:5:\\"total\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"tplCondition\\";a:7:{s:4:\\"name\\";s:12:\\"tplCondition\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_tplCondition\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"tplOperator\\";a:7:{s:4:\\"name\\";s:11:\\"tplOperator\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_tplOperator\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:10:{i:0;a:2:{s:4:\\"text\\";s:11:\\"is equal to\\";s:5:\\"value\\";s:2:\\"==\\";}i:1;a:2:{s:4:\\"text\\";s:15:\\"is not equal to\\";s:5:\\"value\\";s:2:\\"!=\\";}i:2;a:2:{s:4:\\"text\\";s:9:\\"less than\\";s:5:\\"value\\";s:1:\\"<\\";}i:3;a:2:{s:4:\\"text\\";s:21:\\"less than or equal to\\";s:5:\\"value\\";s:2:\\"<=\\";}i:4;a:2:{s:4:\\"text\\";s:24:\\"greater than or equal to\\";s:5:\\"value\\";s:2:\\">=\\";}i:5;a:2:{s:4:\\"text\\";s:8:\\"is empty\\";s:5:\\"value\\";s:5:\\"empty\\";}i:6;a:2:{s:4:\\"text\\";s:12:\\"is not empty\\";s:5:\\"value\\";s:6:\\"!empty\\";}i:7;a:2:{s:4:\\"text\\";s:7:\\"is null\\";s:5:\\"value\\";s:4:\\"null\\";}i:8;a:2:{s:4:\\"text\\";s:11:\\"is in array\\";s:5:\\"value\\";s:7:\\"inarray\\";}i:9;a:2:{s:4:\\"text\\";s:10:\\"is between\\";s:5:\\"value\\";s:7:\\"between\\";}}s:5:\\"value\\";s:2:\\"==\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"conditionalTpls\\";a:7:{s:4:\\"name\\";s:15:\\"conditionalTpls\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_conditionalTpls\\";s:4:\\"type\\";s:8:\\"textarea\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"select\\";a:7:{s:4:\\"name\\";s:6:\\"select\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_select\\";s:4:\\"type\\";s:8:\\"textarea\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:22:\\"toSeparatePlaceholders\\";a:7:{s:4:\\"name\\";s:22:\\"toSeparatePlaceholders\\";s:4:\\"desc\\";s:36:\\"pdotools_prop_toSeparatePlaceholders\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdousers.php","content":"use ModxPro\\\\PdoTools\\\\Fetch;\\r\\nuse MODX\\\\Revolution\\\\modUser;\\r\\nuse MODX\\\\Revolution\\\\modUserGroup;\\r\\nuse MODX\\\\Revolution\\\\modUserGroupMember;\\r\\nuse MODX\\\\Revolution\\\\modUserGroupRole;\\r\\nuse MODX\\\\Revolution\\\\modUserProfile;\\r\\n\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var \\\\MODX\\\\Revolution\\\\modX $modx *\\/\\r\\n\\r\\nif (!empty($returnIds)) {\\r\\n    $scriptProperties[\'return\'] = $return = \'ids\';\\r\\n} elseif (!isset($return)) {\\r\\n    $scriptProperties[\'return\'] = $return = \'chunks\';\\r\\n}\\r\\n$modx->services[\'pdotools_config\'] = $scriptProperties;\\r\\n$pdoFetch = $modx->services->get(Fetch::class);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\n$class = modUser::class;\\r\\n$alias_class = $modx->getAlias($class);\\r\\n$profile = modUserProfile::class;\\r\\n$alias_profile = $modx->getAlias($profile);\\r\\n$member = modUserGroupMember::class;\\r\\n$alias_member = $modx->getAlias($member);\\r\\n\\r\\n\\/\\/ Start building \\"Where\\" expression\\r\\n$where = [];\\r\\nif (empty($showInactive)) {\\r\\n    $where[$alias_class . \'.active\'] = 1;\\r\\n}\\r\\nif (empty($showBlocked)) {\\r\\n    $where[$alias_profile . \'.blocked\'] = 0;\\r\\n}\\r\\n\\r\\n\\/\\/ Add users profiles and groups\\r\\n$innerJoin = [\\r\\n    $profile => [\'class\' => $profile, \'alias\' => $alias_profile, \'on\' => \\"$alias_class.id = $alias_profile.internalKey\\"],\\r\\n];\\r\\n\\r\\n\\/\\/ Filter by users, groups and roles\\r\\n$tmp = [\\r\\n    \'users\' => [\\r\\n        \'class\' => $class,\\r\\n        \'name\' => \'username\',\\r\\n        \'join\' => $alias_class . \'.id\',\\r\\n    ],\\r\\n    \'groups\' => [\\r\\n        \'class\' => modUserGroup::class,\\r\\n        \'name\' => \'name\',\\r\\n        \'join\' => $alias_member . \'.user_group\',\\r\\n    ],\\r\\n    \'roles\' => [\\r\\n        \'class\' => modUserGroupRole::class,\\r\\n        \'name\' => \'name\',\\r\\n        \'join\' => $alias_member . \'.role\',\\r\\n    ],\\r\\n];\\r\\nforeach ($tmp as $k => $p) {\\r\\n    if (!empty($$k)) {\\r\\n        $$k = array_map(\'trim\', explode(\',\', $$k));\\r\\n        ${$k . \'_in\'} = ${$k . \'_out\'} = $fetch_in = $fetch_out = [];\\r\\n        foreach ($$k as $v) {\\r\\n            if (is_numeric($v)) {\\r\\n                if ($v[0] == \'-\') {\\r\\n                    ${$k . \'_out\'}[] = abs($v);\\r\\n                } else {\\r\\n                    ${$k . \'_in\'}[] = abs($v);\\r\\n                }\\r\\n            } else {\\r\\n                if ($v[0] == \'-\') {\\r\\n                    $fetch_out[] = $v;\\r\\n                } else {\\r\\n                    $fetch_in[] = $v;\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n\\r\\n        if (!empty($fetch_in) || !empty($fetch_out)) {\\r\\n            $q = $modx->newQuery($p[\'class\'], [$p[\'name\'] . \':IN\' => array_merge($fetch_in, $fetch_out)]);\\r\\n            $q->select(\'id,\' . $p[\'name\']);\\r\\n            $tstart = microtime(true);\\r\\n            if ($q->prepare() && $q->stmt->execute()) {\\r\\n                $modx->queryTime += microtime(true) - $tstart;\\r\\n                $modx->executedQueries++;\\r\\n                while ($row = $q->stmt->fetch(PDO::FETCH_ASSOC)) {\\r\\n                    if (in_array($row[$p[\'name\']], $fetch_in)) {\\r\\n                        ${$k . \'_in\'}[] = $row[\'id\'];\\r\\n                    } else {\\r\\n                        ${$k . \'_out\'}[] = $row[\'id\'];\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n\\r\\n        if (!empty(${$k . \'_in\'})) {\\r\\n            $where[$p[\'join\'] . \':IN\'] = ${$k . \'_in\'};\\r\\n        }\\r\\n        if (!empty(${$k . \'_out\'})) {\\r\\n            $where[$p[\'join\'] . \':NOT IN\'] = ${$k . \'_out\'};\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\nif (!empty($groups_in) || !empty($groups_out) || !empty($roles_in) || !empty($roles_out)) {\\r\\n    $innerJoin[$alias_member] = [\'class\' => $member, \'alias\' => $alias_member, \'on\' => \\"$alias_class.id = $alias_member.member\\"];\\r\\n}\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$select = [\\r\\n    $profile => implode(\',\', array_diff(array_keys($modx->getFieldMeta($profile)), [\'sessionid\'])),\\r\\n    $class => implode(\',\', array_diff(array_keys($modx->getFieldMeta($class)), [\'password\', \'cachepwd\', \'salt\', \'session_stale\', \'remote_key\', \'remote_data\', \'hash_class\'])),\\r\\n];\\r\\n\\r\\n\\/\\/ Add custom parameters\\r\\nforeach ([\'where\', \'innerJoin\', \'select\'] as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n$default = [\\r\\n    \'class\' => $class,\\r\\n    \'innerJoin\' => $innerJoin,\\r\\n    \'where\' => $where,\\r\\n    \'select\' => $select,\\r\\n    \'groupby\' => $alias_class . \'.id\',\\r\\n    \'sortby\' => $alias_class . \'.id\',\\r\\n    \'sortdir\' => \'ASC\',\\r\\n    \'fastMode\' => false,\\r\\n    \'return\' => $return,\\r\\n    \'disableConditions\' => true,\\r\\n];\\r\\n\\r\\nif (!empty($users_in) && (empty($scriptProperties[\'sortby\']) || $scriptProperties[\'sortby\'] == $alias_class . \'.id\')) {\\r\\n    $scriptProperties[\'sortby\'] = \\"find_in_set(`$alias_class`.`id`,\'\\" . implode(\',\', $users_in) . \\"\')\\";\\r\\n    $scriptProperties[\'sortdir\'] = \'\';\\r\\n}\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->addTime(\'Query parameters ready\');\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\r\\n$output = $pdoFetch->run();\\r\\n\\r\\n$log = \'\';\\r\\nif ($modx->user->isAuthenticated(\'mgr\') && !empty($showLog)) {\\r\\n    $modx->setPlaceholder(\'pdoUsersLog\',  print_r($pdoFetch->getTime(), true));\\r\\n}\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (!empty($returnIds)) {\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n} elseif ($return === \'data\') {\\r\\n    return $output;\\r\\n} elseif (!empty($toSeparatePlaceholders)) {\\r\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n} else {\\r\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\r\\n        $output = $pdoFetch->getChunk($tplWrapper, [\'output\' => $output], $pdoFetch->config(\'fastMode\'));\\r\\n    }\\r\\n\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n}"}',
        'guid' => '997d1549aab8ab996b3f16e569534a1d',
        'native_key' => 0,
        'signature' => 'e81a622fa26698ab37726d800c82d548',
      ),
      '64ee29268329d06f564e2325e0bc83cc' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'MODX\\Revolution\\modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoCrumbs","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"use ModxPro\\\\PdoTools\\\\Fetch;\\r\\nuse MODX\\\\Revolution\\\\modResource;\\r\\nuse MODX\\\\Revolution\\\\modWebLink;\\r\\n\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var \\\\MODX\\\\Revolution\\\\modX $modx *\\/\\r\\n\\r\\n\\r\\n$modx->services[\'pdotools_config\'] = $scriptProperties;\\r\\n$pdoFetch = $modx->services->get(Fetch::class);\\r\\n\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\nif (!isset($from) || $from == \'\') {\\r\\n    $from = 0;\\r\\n}\\r\\nif (empty($to)) {\\r\\n    $to = $modx->resource->id;\\r\\n}\\r\\nif (empty($direction)) {\\r\\n    $direction = \'ltr\';\\r\\n}\\r\\nif ($outputSeparator == \'&nbsp;&rarr;&nbsp;\' && $direction == \'rtl\') {\\r\\n    $outputSeparator = \'&nbsp;&larr;&nbsp;\';\\r\\n}\\r\\n$limit = $limit ?: 10;\\r\\n\\r\\n\\/\\/ For compatibility with BreadCrumb\\r\\nif (!empty($maxCrumbs)) {\\r\\n    $limit = $maxCrumbs;\\r\\n}\\r\\nif (!empty($containerTpl)) {\\r\\n    $tplWrapper = $containerTpl;\\r\\n}\\r\\nif (!empty($currentCrumbTpl)) {\\r\\n    $tplCurrent = $currentCrumbTpl;\\r\\n}\\r\\nif (!empty($linkCrumbTpl)) {\\r\\n    $scriptProperties[\'tpl\'] = $linkCrumbTpl;\\r\\n}\\r\\nif (!empty($maxCrumbTpl)) {\\r\\n    $tplMax = $maxCrumbTpl;\\r\\n}\\r\\nif (isset($showBreadCrumbsAtHome)) {\\r\\n    $showAtHome = $showBreadCrumbsAtHome;\\r\\n}\\r\\nif (isset($showHomeCrumb)) {\\r\\n    $showHome = $showHomeCrumb;\\r\\n}\\r\\nif (isset($showCurrentCrumb)) {\\r\\n    $showCurrent = $showCurrentCrumb;\\r\\n}\\r\\n\\/\\/ --\\r\\n$fastMode = !empty($fastMode);\\r\\n$siteStart = (int)$modx->getOption(\'siteStart\', $scriptProperties, $modx->getOption(\'site_start\'));\\r\\n\\r\\nif (empty($showAtHome) && $modx->resource->id === $siteStart) {\\r\\n    return \'\';\\r\\n}\\r\\n\\r\\n$class = modResource::class;\\r\\n$alias = $modx->getAlias($class);\\r\\n\\/\\/ Start building \\"Where\\" expression\\r\\n$where = [];\\r\\nif (empty($showUnpublished) && empty($showUnPub)) {\\r\\n    $where[\'published\'] = 1;\\r\\n}\\r\\nif (empty($showHidden)) {\\r\\n    $where[\'hidemenu\'] = 0;\\r\\n}\\r\\nif (empty($showDeleted)) {\\r\\n    $where[\'deleted\'] = 0;\\r\\n}\\r\\nif (!empty($hideContainers) && empty($showContainer)) {\\r\\n    $where[\'isfolder\'] = 0;\\r\\n}\\r\\n\\r\\n$resource = ($to == $modx->resource->id)\\r\\n    ? $modx->resource\\r\\n    : $modx->getObject($class, $to);\\r\\n\\r\\nif (!$resource) {\\r\\n    $message = \'Could not build breadcrumbs to resource \\"\' . $to . \'\\"\';\\r\\n\\r\\n    return \'\';\\r\\n}\\r\\n\\r\\nif (!empty($customParents)) {\\r\\n    $customParents = is_array($customParents) ? $customParents : array_map(\'trim\', explode(\',\', $customParents));\\r\\n    $parents = is_array($customParents) ? array_reverse($customParents) : [];\\r\\n}\\r\\nif (empty($parents)) {\\r\\n    $parents = $modx->getParentIds($resource->id, $limit, [\'context\' => $resource->get(\'context_key\')]);\\r\\n}\\r\\nif (!empty($showHome)) {\\r\\n    $parents[] = $siteStart;\\r\\n}\\r\\n\\r\\n$ids = [$resource->id];\\r\\nforeach ($parents as $parent) {\\r\\n    if (!empty($parent)) {\\r\\n        $ids[] = $parent;\\r\\n    }\\r\\n    if (!empty($from) && $parent == $from) {\\r\\n        break;\\r\\n    }\\r\\n}\\r\\n$where[\'id:IN\'] = $ids;\\r\\n\\r\\nif (!empty($exclude)) {\\r\\n    $where[\'id:NOT IN\'] = array_map(\'trim\', explode(\',\', $exclude));\\r\\n}\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$resourceColumns = array_keys($modx->getFieldMeta($class));\\r\\n$select = [$alias => implode(\',\', $resourceColumns)];\\r\\n\\r\\n\\/\\/ Add custom parameters\\r\\nforeach ([\'where\', \'select\'] as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n\\/\\/ Default parameters\\r\\n$default = [\\r\\n    \'class\' => $class,\\r\\n    \'where\' => $where,\\r\\n    \'select\' => $select,\\r\\n    \'groupby\' => $alias . \'.id\',\\r\\n    \'sortby\' => \\"find_in_set(`$alias`.`id`,\'\\" . implode(\',\', $ids) . \\"\')\\",\\r\\n    \'sortdir\' => \'\',\\r\\n    \'return\' => \'data\',\\r\\n    \'totalVar\' => \'pdocrumbs.total\',\\r\\n    \'disableConditions\' => true,\\r\\n];\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->addTime(\'Query parameters ready\');\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n$output = [];\\r\\nif (!empty($rows) && is_array($rows)) {\\r\\n    if (strtolower($direction) == \'ltr\') {\\r\\n        $rows = array_reverse($rows);\\r\\n    }\\r\\n\\r\\n    foreach ($rows as $row) {\\r\\n        if (!empty($useWeblinkUrl) && $row[\'class_key\'] === modWebLink::class) {\\r\\n            $row[\'link\'] = is_numeric(trim($row[\'content\'], \'[]~ \'))\\r\\n                ? $pdoFetch->makeUrl((int)trim($row[\'content\'], \'[]~ \'), $row)\\r\\n                : $row[\'content\'];\\r\\n        } else {\\r\\n            $row[\'link\'] = $pdoFetch->makeUrl($row[\'id\'], $row);\\r\\n        }\\r\\n\\r\\n        $row = array_merge(\\r\\n            $scriptProperties,\\r\\n            $row,\\r\\n            [\'idx\' => $pdoFetch->idx++]\\r\\n        );\\r\\n        if (empty($row[\'menutitle\'])) {\\r\\n            $row[\'menutitle\'] = $row[\'pagetitle\'];\\r\\n        }\\r\\n\\r\\n        if (isset($return) && $return === \'data\') {\\r\\n            $output[] = $row;\\r\\n            continue;\\r\\n        }\\r\\n        if ($row[\'id\'] == $resource->id && empty($showCurrent)) {\\r\\n            continue;\\r\\n        } elseif ($row[\'id\'] == $resource->id && !empty($tplCurrent)) {\\r\\n            $tpl = $tplCurrent;\\r\\n        } elseif ($row[\'id\'] == $siteStart && !empty($tplHome)) {\\r\\n            $tpl = $tplHome;\\r\\n        } else {\\r\\n            $tpl = $pdoFetch->defineChunk($row);\\r\\n        }\\r\\n        $output[] = empty($tpl)\\r\\n            ? \'<pre>\' . $pdoFetch->getChunk(\'\', $row) . \'<\\/pre>\'\\r\\n            : $pdoFetch->getChunk($tpl, $row, $fastMode);\\r\\n    }\\r\\n}\\r\\nif (isset($return) && $return === \'data\') {\\r\\n    return $output;\\r\\n}\\r\\n\\r\\n$pdoFetch->addTime(\'Chunks processed\');\\r\\n\\r\\nif (count($output) == 1 && !empty($hideSingle)) {\\r\\n    $pdoFetch->addTime(\'The only result was hidden, because the parameter \\"hideSingle\\" activated\');\\r\\n    $output = [];\\r\\n}\\r\\n\\r\\n$log = \'\';\\r\\nif ($modx->user->isAuthenticated(\'mgr\') && (bool)$showLog) {\\r\\n    $modx->setPlaceholder(\'pdoCrumbsLog\', print_r($pdoFetch->getTime(), true));\\r\\n}\\r\\n\\r\\nif (!empty($toSeparatePlaceholders)) {\\r\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n} else {\\r\\n    $output = implode($outputSeparator, $output);\\r\\n    if ($pdoFetch->idx >= $limit && !empty($tplMax) && !empty($output)) {\\r\\n        $output = ($direction == \'ltr\')\\r\\n            ? $pdoFetch->getChunk($tplMax, [], $fastMode) . $output\\r\\n            : $output . $pdoFetch->getChunk($tplMax, [], $fastMode);\\r\\n    }\\r\\n    $output .= $log;\\r\\n\\r\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\r\\n        $output = $pdoFetch->getChunk($tplWrapper, [\'output\' => $output, \'crumbs\' => $output], $fastMode);\\r\\n    }\\r\\n\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n}","locked":0,"properties":"a:31:{s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"from\\";a:7:{s:4:\\"name\\";s:4:\\"from\\";s:4:\\"desc\\";s:18:\\"pdotools_prop_from\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:2:\\"to\\";a:7:{s:4:\\"name\\";s:2:\\"to\\";s:4:\\"desc\\";s:16:\\"pdotools_prop_to\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"customParents\\";a:7:{s:4:\\"name\\";s:13:\\"customParents\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_customParents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"exclude\\";a:7:{s:4:\\"name\\";s:7:\\"exclude\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_exclude\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"prepareTVs\\";a:7:{s:4:\\"name\\";s:10:\\"prepareTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_prepareTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"1\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"processTVs\\";a:7:{s:4:\\"name\\";s:10:\\"processTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_processTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"tv.\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"hideContainers\\";a:7:{s:4:\\"name\\";s:14:\\"hideContainers\\";s:4:\\"desc\\";s:28:\\"pdotools_prop_hideContainers\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:17:\\"pdotools_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:79:\\"@INLINE <li class=\\"breadcrumb-item\\"><a href=\\"[[+link]]\\">[[+menutitle]]<\\/a><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplCurrent\\";a:7:{s:4:\\"name\\";s:10:\\"tplCurrent\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_tplCurrent\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:62:\\"@INLINE <li class=\\"breadcrumb-item active\\">[[+menutitle]]<\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"tplMax\\";a:7:{s:4:\\"name\\";s:6:\\"tplMax\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_tplMax\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:65:\\"@INLINE <li class=\\"breadcrumb-item disabled\\">&nbsp;...&nbsp;<\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplHome\\";a:7:{s:4:\\"name\\";s:7:\\"tplHome\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_tplHome\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplWrapper\\";a:7:{s:4:\\"name\\";s:10:\\"tplWrapper\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_tplWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:47:\\"@INLINE <ol class=\\"breadcrumb\\">[[+output]]<\\/ol>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"wrapIfEmpty\\";a:7:{s:4:\\"name\\";s:11:\\"wrapIfEmpty\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_wrapIfEmpty\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showCurrent\\";a:7:{s:4:\\"name\\";s:11:\\"showCurrent\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_showCurrent\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"showHome\\";a:7:{s:4:\\"name\\";s:8:\\"showHome\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_showHome\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showAtHome\\";a:7:{s:4:\\"name\\";s:10:\\"showAtHome\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_showAtHome\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"hideSingle\\";a:7:{s:4:\\"name\\";s:10:\\"hideSingle\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_hideSingle\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"direction\\";a:7:{s:4:\\"name\\";s:9:\\"direction\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_direction\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:5:\\"value\\";s:3:\\"ltr\\";s:4:\\"text\\";s:19:\\"Left To Right (ltr)\\";}i:1;a:2:{s:5:\\"value\\";s:3:\\"rtl\\";s:4:\\"text\\";s:19:\\"Right To Left (rtl)\\";}}s:5:\\"value\\";s:3:\\"ltr\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"scheme\\";a:7:{s:4:\\"name\\";s:6:\\"scheme\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_scheme\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:6:{i:0;a:2:{s:5:\\"value\\";s:0:\\"\\";s:4:\\"text\\";s:14:\\"System default\\";}i:1;a:2:{s:5:\\"value\\";i:-1;s:4:\\"text\\";s:25:\\"-1 (relative to site_url)\\";}i:2;a:2:{s:5:\\"value\\";s:4:\\"full\\";s:4:\\"text\\";s:40:\\"full (absolute, prepended with site_url)\\";}i:3;a:2:{s:5:\\"value\\";s:3:\\"abs\\";s:4:\\"text\\";s:39:\\"abs (absolute, prepended with base_url)\\";}i:4;a:2:{s:5:\\"value\\";s:4:\\"http\\";s:4:\\"text\\";s:38:\\"http (absolute, forced to http scheme)\\";}i:5;a:2:{s:5:\\"value\\";s:5:\\"https\\";s:4:\\"text\\";s:40:\\"https (absolute, forced to https scheme)\\";}}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"useWeblinkUrl\\";a:7:{s:4:\\"name\\";s:13:\\"useWeblinkUrl\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_useWeblinkUrl\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdocrumbs.php","content":"use ModxPro\\\\PdoTools\\\\Fetch;\\r\\nuse MODX\\\\Revolution\\\\modResource;\\r\\nuse MODX\\\\Revolution\\\\modWebLink;\\r\\n\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var \\\\MODX\\\\Revolution\\\\modX $modx *\\/\\r\\n\\r\\n\\r\\n$modx->services[\'pdotools_config\'] = $scriptProperties;\\r\\n$pdoFetch = $modx->services->get(Fetch::class);\\r\\n\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\nif (!isset($from) || $from == \'\') {\\r\\n    $from = 0;\\r\\n}\\r\\nif (empty($to)) {\\r\\n    $to = $modx->resource->id;\\r\\n}\\r\\nif (empty($direction)) {\\r\\n    $direction = \'ltr\';\\r\\n}\\r\\nif ($outputSeparator == \'&nbsp;&rarr;&nbsp;\' && $direction == \'rtl\') {\\r\\n    $outputSeparator = \'&nbsp;&larr;&nbsp;\';\\r\\n}\\r\\n$limit = $limit ?: 10;\\r\\n\\r\\n\\/\\/ For compatibility with BreadCrumb\\r\\nif (!empty($maxCrumbs)) {\\r\\n    $limit = $maxCrumbs;\\r\\n}\\r\\nif (!empty($containerTpl)) {\\r\\n    $tplWrapper = $containerTpl;\\r\\n}\\r\\nif (!empty($currentCrumbTpl)) {\\r\\n    $tplCurrent = $currentCrumbTpl;\\r\\n}\\r\\nif (!empty($linkCrumbTpl)) {\\r\\n    $scriptProperties[\'tpl\'] = $linkCrumbTpl;\\r\\n}\\r\\nif (!empty($maxCrumbTpl)) {\\r\\n    $tplMax = $maxCrumbTpl;\\r\\n}\\r\\nif (isset($showBreadCrumbsAtHome)) {\\r\\n    $showAtHome = $showBreadCrumbsAtHome;\\r\\n}\\r\\nif (isset($showHomeCrumb)) {\\r\\n    $showHome = $showHomeCrumb;\\r\\n}\\r\\nif (isset($showCurrentCrumb)) {\\r\\n    $showCurrent = $showCurrentCrumb;\\r\\n}\\r\\n\\/\\/ --\\r\\n$fastMode = !empty($fastMode);\\r\\n$siteStart = (int)$modx->getOption(\'siteStart\', $scriptProperties, $modx->getOption(\'site_start\'));\\r\\n\\r\\nif (empty($showAtHome) && $modx->resource->id === $siteStart) {\\r\\n    return \'\';\\r\\n}\\r\\n\\r\\n$class = modResource::class;\\r\\n$alias = $modx->getAlias($class);\\r\\n\\/\\/ Start building \\"Where\\" expression\\r\\n$where = [];\\r\\nif (empty($showUnpublished) && empty($showUnPub)) {\\r\\n    $where[\'published\'] = 1;\\r\\n}\\r\\nif (empty($showHidden)) {\\r\\n    $where[\'hidemenu\'] = 0;\\r\\n}\\r\\nif (empty($showDeleted)) {\\r\\n    $where[\'deleted\'] = 0;\\r\\n}\\r\\nif (!empty($hideContainers) && empty($showContainer)) {\\r\\n    $where[\'isfolder\'] = 0;\\r\\n}\\r\\n\\r\\n$resource = ($to == $modx->resource->id)\\r\\n    ? $modx->resource\\r\\n    : $modx->getObject($class, $to);\\r\\n\\r\\nif (!$resource) {\\r\\n    $message = \'Could not build breadcrumbs to resource \\"\' . $to . \'\\"\';\\r\\n\\r\\n    return \'\';\\r\\n}\\r\\n\\r\\nif (!empty($customParents)) {\\r\\n    $customParents = is_array($customParents) ? $customParents : array_map(\'trim\', explode(\',\', $customParents));\\r\\n    $parents = is_array($customParents) ? array_reverse($customParents) : [];\\r\\n}\\r\\nif (empty($parents)) {\\r\\n    $parents = $modx->getParentIds($resource->id, $limit, [\'context\' => $resource->get(\'context_key\')]);\\r\\n}\\r\\nif (!empty($showHome)) {\\r\\n    $parents[] = $siteStart;\\r\\n}\\r\\n\\r\\n$ids = [$resource->id];\\r\\nforeach ($parents as $parent) {\\r\\n    if (!empty($parent)) {\\r\\n        $ids[] = $parent;\\r\\n    }\\r\\n    if (!empty($from) && $parent == $from) {\\r\\n        break;\\r\\n    }\\r\\n}\\r\\n$where[\'id:IN\'] = $ids;\\r\\n\\r\\nif (!empty($exclude)) {\\r\\n    $where[\'id:NOT IN\'] = array_map(\'trim\', explode(\',\', $exclude));\\r\\n}\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$resourceColumns = array_keys($modx->getFieldMeta($class));\\r\\n$select = [$alias => implode(\',\', $resourceColumns)];\\r\\n\\r\\n\\/\\/ Add custom parameters\\r\\nforeach ([\'where\', \'select\'] as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n\\/\\/ Default parameters\\r\\n$default = [\\r\\n    \'class\' => $class,\\r\\n    \'where\' => $where,\\r\\n    \'select\' => $select,\\r\\n    \'groupby\' => $alias . \'.id\',\\r\\n    \'sortby\' => \\"find_in_set(`$alias`.`id`,\'\\" . implode(\',\', $ids) . \\"\')\\",\\r\\n    \'sortdir\' => \'\',\\r\\n    \'return\' => \'data\',\\r\\n    \'totalVar\' => \'pdocrumbs.total\',\\r\\n    \'disableConditions\' => true,\\r\\n];\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->addTime(\'Query parameters ready\');\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n$output = [];\\r\\nif (!empty($rows) && is_array($rows)) {\\r\\n    if (strtolower($direction) == \'ltr\') {\\r\\n        $rows = array_reverse($rows);\\r\\n    }\\r\\n\\r\\n    foreach ($rows as $row) {\\r\\n        if (!empty($useWeblinkUrl) && $row[\'class_key\'] === modWebLink::class) {\\r\\n            $row[\'link\'] = is_numeric(trim($row[\'content\'], \'[]~ \'))\\r\\n                ? $pdoFetch->makeUrl((int)trim($row[\'content\'], \'[]~ \'), $row)\\r\\n                : $row[\'content\'];\\r\\n        } else {\\r\\n            $row[\'link\'] = $pdoFetch->makeUrl($row[\'id\'], $row);\\r\\n        }\\r\\n\\r\\n        $row = array_merge(\\r\\n            $scriptProperties,\\r\\n            $row,\\r\\n            [\'idx\' => $pdoFetch->idx++]\\r\\n        );\\r\\n        if (empty($row[\'menutitle\'])) {\\r\\n            $row[\'menutitle\'] = $row[\'pagetitle\'];\\r\\n        }\\r\\n\\r\\n        if (isset($return) && $return === \'data\') {\\r\\n            $output[] = $row;\\r\\n            continue;\\r\\n        }\\r\\n        if ($row[\'id\'] == $resource->id && empty($showCurrent)) {\\r\\n            continue;\\r\\n        } elseif ($row[\'id\'] == $resource->id && !empty($tplCurrent)) {\\r\\n            $tpl = $tplCurrent;\\r\\n        } elseif ($row[\'id\'] == $siteStart && !empty($tplHome)) {\\r\\n            $tpl = $tplHome;\\r\\n        } else {\\r\\n            $tpl = $pdoFetch->defineChunk($row);\\r\\n        }\\r\\n        $output[] = empty($tpl)\\r\\n            ? \'<pre>\' . $pdoFetch->getChunk(\'\', $row) . \'<\\/pre>\'\\r\\n            : $pdoFetch->getChunk($tpl, $row, $fastMode);\\r\\n    }\\r\\n}\\r\\nif (isset($return) && $return === \'data\') {\\r\\n    return $output;\\r\\n}\\r\\n\\r\\n$pdoFetch->addTime(\'Chunks processed\');\\r\\n\\r\\nif (count($output) == 1 && !empty($hideSingle)) {\\r\\n    $pdoFetch->addTime(\'The only result was hidden, because the parameter \\"hideSingle\\" activated\');\\r\\n    $output = [];\\r\\n}\\r\\n\\r\\n$log = \'\';\\r\\nif ($modx->user->isAuthenticated(\'mgr\') && (bool)$showLog) {\\r\\n    $modx->setPlaceholder(\'pdoCrumbsLog\', print_r($pdoFetch->getTime(), true));\\r\\n}\\r\\n\\r\\nif (!empty($toSeparatePlaceholders)) {\\r\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n} else {\\r\\n    $output = implode($outputSeparator, $output);\\r\\n    if ($pdoFetch->idx >= $limit && !empty($tplMax) && !empty($output)) {\\r\\n        $output = ($direction == \'ltr\')\\r\\n            ? $pdoFetch->getChunk($tplMax, [], $fastMode) . $output\\r\\n            : $output . $pdoFetch->getChunk($tplMax, [], $fastMode);\\r\\n    }\\r\\n    $output .= $log;\\r\\n\\r\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\r\\n        $output = $pdoFetch->getChunk($tplWrapper, [\'output\' => $output, \'crumbs\' => $output], $fastMode);\\r\\n    }\\r\\n\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n}"}',
        'guid' => 'dbdcc8ff227c492ae48e56386230c976',
        'native_key' => 0,
        'signature' => '9ca7a11f93ebc5cc7b14cb187df9c1e8',
      ),
      'ee8f6518d92e18c5b587ded652f9cc12' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'MODX\\Revolution\\modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoField","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"use ModxPro\\\\PdoTools\\\\Fetch;\\r\\nuse MODX\\\\Revolution\\\\modResource;\\r\\n\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var modX $modx *\\/\\r\\n\\r\\nif (!empty($input)) {\\r\\n    $id = $input;\\r\\n}\\r\\nif (!isset($default)) {\\r\\n    $default = \'\';\\r\\n}\\r\\nif (!isset($output)) {\\r\\n    $output = \'\';\\r\\n}\\r\\n$class = $modx->getOption(\'class\', $scriptProperties, modResource::class, true);\\r\\n$alias = $modx->getAlias($class);\\r\\n$isResource = $class === modResource::class || in_array($class, $modx->getDescendants(modResource::class));\\r\\n\\r\\nif (empty($field)) {\\r\\n    $field = \'pagetitle\';\\r\\n}\\r\\n$top = isset($top) ? (int)$top : 0;\\r\\n$topLevel = isset($topLevel) ? (int)$topLevel : 0;\\r\\nif (!empty($options) && is_string($options)) {\\r\\n    $options = trim($options);\\r\\n    if ($options[0] == \'{\') {\\r\\n        $tmp = json_decode($options, true);\\r\\n        if (is_array($tmp)) {\\r\\n            extract($tmp, EXTR_OVERWRITE);\\r\\n            $scriptProperties = array_merge($scriptProperties, $tmp);\\r\\n        }\\r\\n    } else {\\r\\n        $field = $options;\\r\\n    }\\r\\n}\\r\\nif (empty($id)) {\\r\\n    if (!empty($modx->resource)) {\\r\\n        $id = $modx->resource->id;\\r\\n    } else {\\r\\n        return \'You must specify an id of \' . $alias;\\r\\n    }\\r\\n}\\r\\nif (!isset($context)) {\\r\\n    $context = \'\';\\r\\n}\\r\\n\\r\\n\\/\\/ Gets the parent from root of context, if specified\\r\\nif ($isResource && $id && ($top || $topLevel)) {\\r\\n    \\/\\/ Select needed context for parents functionality\\r\\n    if (empty($context)) {\\r\\n        $q = $modx->newQuery($class, $id);\\r\\n        $q->select(\'context_key\');\\r\\n        $tstart = microtime(true);\\r\\n        if ($q->prepare() && $q->stmt->execute()) {\\r\\n            $modx->queryTime += microtime(true) - $tstart;\\r\\n            $modx->executedQueries++;\\r\\n            $context = $q->stmt->fetch(PDO::FETCH_COLUMN);\\r\\n        }\\r\\n    }\\r\\n    \\/\\/ Original pdoField logic\\r\\n    if (empty($ultimate)) {\\r\\n        if ($topLevel) {\\r\\n            $pids = $modx->getChildIds(0, $topLevel, [\'context\' => $context]);\\r\\n            $pid = $id;\\r\\n            while (true) {\\r\\n                $tmp = $modx->getParentIds($pid, 1, [\'context\' => $context]);\\r\\n                if (!$pid = current($tmp)) {\\r\\n                    break;\\r\\n                } elseif (in_array($pid, $pids)) {\\r\\n                    $id = $pid;\\r\\n                    break;\\r\\n                }\\r\\n            }\\r\\n        } elseif ($top) {\\r\\n            $pid = $id;\\r\\n            for ($i = 1; $i <= $top; $i++) {\\r\\n                $tmp = $modx->getParentIds($pid, 1, [\'context\' => $context]);\\r\\n                if (!$pid = current($tmp)) {\\r\\n                    break;\\r\\n                }\\r\\n                $id = $pid;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n    \\/\\/ UltimateParent logic\\r\\n    \\/\\/ https:\\/\\/github.com\\/splittingred\\/UltimateParent\\/blob\\/develop\\/core\\/components\\/ultimateparent\\/snippet.ultimateparent.php\\r\\n    elseif ($id != $top) {\\r\\n        $pid = $id;\\r\\n        $pids = $modx->getParentIds($id, 10, [\'context\' => $context]);\\r\\n        if (!$topLevel || count($pids) >= $topLevel) {\\r\\n            while ($parentIds = $modx->getParentIds($id, 1, [\'context\' => $context])) {\\r\\n                $pid = array_pop($parentIds);\\r\\n                if ($pid == $top) {\\r\\n                    break;\\r\\n                }\\r\\n                $id = $pid;\\r\\n                $parentIds = $modx->getParentIds($id, 10, [\'context\' => $context]);\\r\\n                if ($topLevel && count($parentIds) < $topLevel) {\\r\\n                    break;\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n$modx->services[\'pdotools_config\'] = $scriptProperties;\\r\\n$pdoFetch = $modx->services->get(Fetch::class);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\n$where = [$alias . \'.id\' => $id];\\r\\n\\/\\/ Add custom parameters\\r\\nforeach ([\'where\'] as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$resourceColumns = array_keys($modx->getFieldMeta($class));\\r\\n$field = strtolower($field);\\r\\nif (in_array($field, $resourceColumns)) {\\r\\n    $scriptProperties[\'select\'] = [$alias => $field];\\r\\n    $scriptProperties[\'includeTVs\'] = \'\';\\r\\n} elseif ($isResource) {\\r\\n    $scriptProperties[\'select\'] = [$alias => \'id\'];\\r\\n    $scriptProperties[\'includeTVs\'] = $field;\\r\\n}\\r\\n\\/\\/ Additional default field\\r\\nif (!empty($default)) {\\r\\n    $default = strtolower($default);\\r\\n    if (in_array($default, $resourceColumns)) {\\r\\n        $scriptProperties[\'select\'][$alias] .= \',\' . $default;\\r\\n    } elseif ($isResource) {\\r\\n        $scriptProperties[\'includeTVs\'] = empty($scriptProperties[\'includeTVs\'])\\r\\n            ? $default\\r\\n            : $scriptProperties[\'includeTVs\'] . \',\' . $default;\\r\\n    }\\r\\n}\\r\\n\\r\\n$scriptProperties[\'disableConditions\'] = true;\\r\\nif ($row = $pdoFetch->getArray($class, $where, $scriptProperties)) {\\r\\n    foreach ($row as $k => $v) {\\r\\n        if (strtolower($k) == $field && $v != \'\') {\\r\\n            $output = $v;\\r\\n            break;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    if (empty($output) && !empty($default)) {\\r\\n        foreach ($row as $k => $v) {\\r\\n            if (strtolower($k) == $default && $v != \'\') {\\r\\n                $output = $v;\\r\\n                break;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $output);\\r\\n} else {\\r\\n    return $output;\\r\\n}","locked":0,"properties":"a:12:{s:2:\\"id\\";a:7:{s:4:\\"name\\";s:2:\\"id\\";s:4:\\"desc\\";s:16:\\"pdotools_prop_id\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"field\\";a:7:{s:4:\\"name\\";s:5:\\"field\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_field\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"pagetitle\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"prepareTVs\\";a:7:{s:4:\\"name\\";s:10:\\"prepareTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_prepareTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"1\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"processTVs\\";a:7:{s:4:\\"name\\";s:10:\\"processTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_processTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"context\\";a:7:{s:4:\\"name\\";s:7:\\"context\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_field_context\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"top\\";a:7:{s:4:\\"name\\";s:3:\\"top\\";s:4:\\"desc\\";s:17:\\"pdotools_prop_top\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"topLevel\\";a:7:{s:4:\\"name\\";s:8:\\"topLevel\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_topLevel\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"default\\";a:7:{s:4:\\"name\\";s:7:\\"default\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_field_default\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"output\\";a:7:{s:4:\\"name\\";s:6:\\"output\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_field_output\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"ultimate\\";a:7:{s:4:\\"name\\";s:8:\\"ultimate\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_ultimate\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdofield.php","content":"use ModxPro\\\\PdoTools\\\\Fetch;\\r\\nuse MODX\\\\Revolution\\\\modResource;\\r\\n\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var modX $modx *\\/\\r\\n\\r\\nif (!empty($input)) {\\r\\n    $id = $input;\\r\\n}\\r\\nif (!isset($default)) {\\r\\n    $default = \'\';\\r\\n}\\r\\nif (!isset($output)) {\\r\\n    $output = \'\';\\r\\n}\\r\\n$class = $modx->getOption(\'class\', $scriptProperties, modResource::class, true);\\r\\n$alias = $modx->getAlias($class);\\r\\n$isResource = $class === modResource::class || in_array($class, $modx->getDescendants(modResource::class));\\r\\n\\r\\nif (empty($field)) {\\r\\n    $field = \'pagetitle\';\\r\\n}\\r\\n$top = isset($top) ? (int)$top : 0;\\r\\n$topLevel = isset($topLevel) ? (int)$topLevel : 0;\\r\\nif (!empty($options) && is_string($options)) {\\r\\n    $options = trim($options);\\r\\n    if ($options[0] == \'{\') {\\r\\n        $tmp = json_decode($options, true);\\r\\n        if (is_array($tmp)) {\\r\\n            extract($tmp, EXTR_OVERWRITE);\\r\\n            $scriptProperties = array_merge($scriptProperties, $tmp);\\r\\n        }\\r\\n    } else {\\r\\n        $field = $options;\\r\\n    }\\r\\n}\\r\\nif (empty($id)) {\\r\\n    if (!empty($modx->resource)) {\\r\\n        $id = $modx->resource->id;\\r\\n    } else {\\r\\n        return \'You must specify an id of \' . $alias;\\r\\n    }\\r\\n}\\r\\nif (!isset($context)) {\\r\\n    $context = \'\';\\r\\n}\\r\\n\\r\\n\\/\\/ Gets the parent from root of context, if specified\\r\\nif ($isResource && $id && ($top || $topLevel)) {\\r\\n    \\/\\/ Select needed context for parents functionality\\r\\n    if (empty($context)) {\\r\\n        $q = $modx->newQuery($class, $id);\\r\\n        $q->select(\'context_key\');\\r\\n        $tstart = microtime(true);\\r\\n        if ($q->prepare() && $q->stmt->execute()) {\\r\\n            $modx->queryTime += microtime(true) - $tstart;\\r\\n            $modx->executedQueries++;\\r\\n            $context = $q->stmt->fetch(PDO::FETCH_COLUMN);\\r\\n        }\\r\\n    }\\r\\n    \\/\\/ Original pdoField logic\\r\\n    if (empty($ultimate)) {\\r\\n        if ($topLevel) {\\r\\n            $pids = $modx->getChildIds(0, $topLevel, [\'context\' => $context]);\\r\\n            $pid = $id;\\r\\n            while (true) {\\r\\n                $tmp = $modx->getParentIds($pid, 1, [\'context\' => $context]);\\r\\n                if (!$pid = current($tmp)) {\\r\\n                    break;\\r\\n                } elseif (in_array($pid, $pids)) {\\r\\n                    $id = $pid;\\r\\n                    break;\\r\\n                }\\r\\n            }\\r\\n        } elseif ($top) {\\r\\n            $pid = $id;\\r\\n            for ($i = 1; $i <= $top; $i++) {\\r\\n                $tmp = $modx->getParentIds($pid, 1, [\'context\' => $context]);\\r\\n                if (!$pid = current($tmp)) {\\r\\n                    break;\\r\\n                }\\r\\n                $id = $pid;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n    \\/\\/ UltimateParent logic\\r\\n    \\/\\/ https:\\/\\/github.com\\/splittingred\\/UltimateParent\\/blob\\/develop\\/core\\/components\\/ultimateparent\\/snippet.ultimateparent.php\\r\\n    elseif ($id != $top) {\\r\\n        $pid = $id;\\r\\n        $pids = $modx->getParentIds($id, 10, [\'context\' => $context]);\\r\\n        if (!$topLevel || count($pids) >= $topLevel) {\\r\\n            while ($parentIds = $modx->getParentIds($id, 1, [\'context\' => $context])) {\\r\\n                $pid = array_pop($parentIds);\\r\\n                if ($pid == $top) {\\r\\n                    break;\\r\\n                }\\r\\n                $id = $pid;\\r\\n                $parentIds = $modx->getParentIds($id, 10, [\'context\' => $context]);\\r\\n                if ($topLevel && count($parentIds) < $topLevel) {\\r\\n                    break;\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n$modx->services[\'pdotools_config\'] = $scriptProperties;\\r\\n$pdoFetch = $modx->services->get(Fetch::class);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\n$where = [$alias . \'.id\' => $id];\\r\\n\\/\\/ Add custom parameters\\r\\nforeach ([\'where\'] as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$resourceColumns = array_keys($modx->getFieldMeta($class));\\r\\n$field = strtolower($field);\\r\\nif (in_array($field, $resourceColumns)) {\\r\\n    $scriptProperties[\'select\'] = [$alias => $field];\\r\\n    $scriptProperties[\'includeTVs\'] = \'\';\\r\\n} elseif ($isResource) {\\r\\n    $scriptProperties[\'select\'] = [$alias => \'id\'];\\r\\n    $scriptProperties[\'includeTVs\'] = $field;\\r\\n}\\r\\n\\/\\/ Additional default field\\r\\nif (!empty($default)) {\\r\\n    $default = strtolower($default);\\r\\n    if (in_array($default, $resourceColumns)) {\\r\\n        $scriptProperties[\'select\'][$alias] .= \',\' . $default;\\r\\n    } elseif ($isResource) {\\r\\n        $scriptProperties[\'includeTVs\'] = empty($scriptProperties[\'includeTVs\'])\\r\\n            ? $default\\r\\n            : $scriptProperties[\'includeTVs\'] . \',\' . $default;\\r\\n    }\\r\\n}\\r\\n\\r\\n$scriptProperties[\'disableConditions\'] = true;\\r\\nif ($row = $pdoFetch->getArray($class, $where, $scriptProperties)) {\\r\\n    foreach ($row as $k => $v) {\\r\\n        if (strtolower($k) == $field && $v != \'\') {\\r\\n            $output = $v;\\r\\n            break;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    if (empty($output) && !empty($default)) {\\r\\n        foreach ($row as $k => $v) {\\r\\n            if (strtolower($k) == $default && $v != \'\') {\\r\\n                $output = $v;\\r\\n                break;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $output);\\r\\n} else {\\r\\n    return $output;\\r\\n}"}',
        'guid' => '52e036b995159ba31626385fb672c8c8',
        'native_key' => 0,
        'signature' => 'c48e9c5a15863e17773b67acc4d3f4f2',
      ),
      '48af5ef03a1ff66433f507f08ca2c1ee' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'MODX\\Revolution\\modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoSitemap","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"use ModxPro\\\\PdoTools\\\\Fetch;\\r\\nuse MODX\\\\Revolution\\\\modResource;\\r\\nuse MODX\\\\Revolution\\\\modWebLink;\\r\\n\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var \\\\MODX\\\\Revolution\\\\modX $modx *\\/\\r\\n\\r\\n$modx->services[\'pdotools_config\'] = [];\\r\\n$pdoFetch = $modx->services->get(Fetch::class);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\n\\/\\/ Default variables\\r\\nif (empty($tpl)) {\\r\\n    $tpl = \\"@INLINE \\\\n<url>\\\\n\\\\t<loc>[[+url]]<\\/loc>\\\\n\\\\t<lastmod>[[+date]]<\\/lastmod>\\\\n\\\\t<changefreq>[[+update]]<\\/changefreq>\\\\n\\\\t<priority>[[+priority]]<\\/priority>\\\\n<\\/url>\\";\\r\\n}\\r\\nif (empty($tplWrapper)) {\\r\\n    $tplWrapper = \\"@INLINE <?xml version=\\\\\\"1.0\\\\\\" encoding=\\\\\\"[[++modx_charset]]\\\\\\"?>\\\\n<urlset xmlns=\\\\\\"[[+schema]]\\\\\\">\\\\n[[+output]]\\\\n<\\/urlset>\\";\\r\\n}\\r\\nif (empty($sitemapSchema)) {\\r\\n    $sitemapSchema = \'http:\\/\\/www.sitemaps.org\\/schemas\\/sitemap\\/0.9\';\\r\\n}\\r\\nif (empty($outputSeparator)) {\\r\\n    $outputSeparator = \\"\\\\n\\";\\r\\n}\\r\\nif (empty($cacheKey)) {\\r\\n    $scriptProperties[\'cacheKey\'] = \'sitemap\\/\' . substr(md5(json_encode($scriptProperties)), 0, 6);\\r\\n}\\r\\n\\r\\n\\/\\/ Convert parameters from GoogleSiteMap if exists\\r\\nif (!empty($itemTpl)) {\\r\\n    $tpl = $itemTpl;\\r\\n}\\r\\nif (!empty($containerTpl)) {\\r\\n    $tplWrapper = $containerTpl;\\r\\n}\\r\\nif (!empty($allowedtemplates)) {\\r\\n    $scriptProperties[\'templates\'] = $allowedtemplates;\\r\\n}\\r\\nif (!empty($maxDepth)) {\\r\\n    $scriptProperties[\'depth\'] = $maxDepth;\\r\\n}\\r\\nif (isset($hideDeleted)) {\\r\\n    $scriptProperties[\'showDeleted\'] = !$hideDeleted;\\r\\n}\\r\\nif (isset($published)) {\\r\\n    $scriptProperties[\'showUnpublished\'] = !$published;\\r\\n}\\r\\nif (isset($searchable)) {\\r\\n    $scriptProperties[\'showUnsearchable\'] = !$searchable;\\r\\n}\\r\\nif (!empty($googleSchema)) {\\r\\n    $sitemapSchema = $googleSchema;\\r\\n}\\r\\nif (!empty($excludeResources)) {\\r\\n    $tmp = array_map(\'trim\', explode(\',\', $excludeResources));\\r\\n    foreach ($tmp as $v) {\\r\\n        if (!empty($scriptProperties[\'resources\'])) {\\r\\n            $scriptProperties[\'resources\'] .= \',-\' . $v;\\r\\n        } else {\\r\\n            $scriptProperties[\'resources\'] = \'-\' . $v;\\r\\n        }\\r\\n    }\\r\\n}\\r\\nif (!empty($excludeChildrenOf)) {\\r\\n    $tmp = array_map(\'trim\', explode(\',\', $excludeChildrenOf));\\r\\n    foreach ($tmp as $v) {\\r\\n        if (!empty($scriptProperties[\'parents\'])) {\\r\\n            $scriptProperties[\'parents\'] .= \',-\' . $v;\\r\\n        } else {\\r\\n            $scriptProperties[\'parents\'] = \'-\' . $v;\\r\\n        }\\r\\n    }\\r\\n}\\r\\nif (!empty($startId)) {\\r\\n    if (!empty($scriptProperties[\'parents\'])) {\\r\\n        $scriptProperties[\'parents\'] .= \',\' . $startId;\\r\\n    } else {\\r\\n        $scriptProperties[\'parents\'] = $startId;\\r\\n    }\\r\\n}\\r\\nif (!empty($sortBy)) {\\r\\n    $scriptProperties[\'sortby\'] = $sortBy;\\r\\n}\\r\\nif (!empty($sortDir)) {\\r\\n    $scriptProperties[\'sortdir\'] = $sortDir;\\r\\n}\\r\\nif (!empty($priorityTV)) {\\r\\n    if (!empty($scriptProperties[\'includeTVs\'])) {\\r\\n        $scriptProperties[\'includeTVs\'] .= \',\' . $priorityTV;\\r\\n    } else {\\r\\n        $scriptProperties[\'includeTVs\'] = $priorityTV;\\r\\n    }\\r\\n}\\r\\nif (!empty($itemSeparator)) {\\r\\n    $outputSeparator = $itemSeparator;\\r\\n}\\r\\n\\/\\/---\\r\\n\\r\\n\\r\\n$class = modResource::class;\\r\\n$alias = $modx->getAlias($class);\\r\\n$where = [];\\r\\nif (empty($showHidden)) {\\r\\n    $where[] = [\\r\\n        $alias . \'.hidemenu\' => 0,\\r\\n        \'OR:\' . $alias . \'.class_key:IN\' => [\'Ticket\', \'Article\'],\\r\\n    ];\\r\\n}\\r\\nif (empty($context)) {\\r\\n    $scriptProperties[\'context\'] = $modx->context->key;\\r\\n}\\r\\n\\r\\n$select = [$alias => \'id,editedon,createdon,context_key,class_key,uri\'];\\r\\nif (!empty($useWeblinkUrl)) {\\r\\n    $select[$alias] .= \',content\';\\r\\n}\\r\\n\\/\\/ Add custom parameters\\r\\nforeach ([\'where\', \'select\'] as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n\\/\\/ Default parameters\\r\\n$default = [\\r\\n    \'class\' => $class,\\r\\n    \'where\' => $where,\\r\\n    \'select\' => $select,\\r\\n    \'sortby\' => \\"{$alias}.parent ASC, {$alias}.menuindex\\",\\r\\n    \'sortdir\' => \'ASC\',\\r\\n    \'return\' => \'data\',\\r\\n    \'scheme\' => \'full\',\\r\\n    \'limit\' => 0,\\r\\n];\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->addTime(\'Query parameters ready\');\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\r\\n\\r\\nif (!empty($cache)) {\\r\\n    $data = $pdoFetch->getCache($scriptProperties);\\r\\n}\\r\\nif (!isset($return)) {\\r\\n    $return = \'chunks\';\\r\\n}\\r\\nif (empty($data)) {\\r\\n    $now = time();\\r\\n    $data = $urls = [];\\r\\n    $rows = $pdoFetch->run();\\r\\n    foreach ($rows as $row) {\\r\\n        if (!empty($useWeblinkUrl) && $row[\'class_key\'] == modWebLink::class) {\\r\\n            $row[\'url\'] = is_numeric(trim($row[\'content\'], \'[]~ \'))\\r\\n                ? $pdoFetch->makeUrl((int)trim($row[\'content\'], \'[]~ \'), $row)\\r\\n                : $row[\'content\'];\\r\\n        } else {\\r\\n            $row[\'url\'] = $pdoFetch->makeUrl($row[\'id\'], $row);\\r\\n        }\\r\\n        unset($row[\'content\']);\\r\\n        $time = !empty($row[\'editedon\'])\\r\\n            ? $row[\'editedon\']\\r\\n            : $row[\'createdon\'];\\r\\n        $row[\'date\'] = date(\'c\', $time);\\r\\n\\r\\n        $datediff = floor(($now - $time) \\/ 86400);\\r\\n        if ($datediff <= 1) {\\r\\n            $row[\'priority\'] = \'1.0\';\\r\\n            $row[\'update\'] = \'daily\';\\r\\n        } elseif (($datediff > 1) && ($datediff <= 7)) {\\r\\n            $row[\'priority\'] = \'0.75\';\\r\\n            $row[\'update\'] = \'weekly\';\\r\\n        } elseif (($datediff > 7) && ($datediff <= 30)) {\\r\\n            $row[\'priority\'] = \'0.50\';\\r\\n            $row[\'update\'] = \'weekly\';\\r\\n        } else {\\r\\n            $row[\'priority\'] = \'0.25\';\\r\\n            $row[\'update\'] = \'monthly\';\\r\\n        }\\r\\n        if (!empty($priorityTV) && !empty($row[$priorityTV])) {\\r\\n            $row[\'priority\'] = $row[$priorityTV];\\r\\n        }\\r\\n\\r\\n        \\/\\/ Fix possible duplicates made by modWebLink\\r\\n        if (!empty($urls[$row[\'url\']])) {\\r\\n            if ($urls[$row[\'url\']] > $row[\'date\']) {\\r\\n                continue;\\r\\n            }\\r\\n        }\\r\\n        $urls[$row[\'url\']] = $row[\'date\'];\\r\\n\\r\\n        \\/\\/ Add item to output\\r\\n        if ($return === \'data\') {\\r\\n            $data[$row[\'url\']] = $row;\\r\\n        } else {\\r\\n            $data[$row[\'url\']] = $pdoFetch->parseChunk($tpl, $row);\\r\\n            if (strpos($data[$row[\'url\']], \'[[\') !== false) {\\r\\n                $modx->parser->processElementTags(\'\', $data[$row[\'url\']], true, true, \'[[\', \']]\', array(), 10);\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n    $pdoFetch->addTime(\'Rows processed\');\\r\\n    if (!empty($cache)) {\\r\\n        $pdoFetch->setCache($data, $scriptProperties);\\r\\n    }\\r\\n}\\r\\n\\r\\nif ($return === \'data\') {\\r\\n    $output = $data;\\r\\n} else {\\r\\n    $output = implode($outputSeparator, $data);\\r\\n    $output = $pdoFetch->getChunk($tplWrapper, [\\r\\n        \'schema\' => $sitemapSchema,\\r\\n        \'output\' => $output,\\r\\n        \'items\' => $output,\\r\\n    ]);\\r\\n    $pdoFetch->addTime(\'Rows wrapped\');\\r\\n\\r\\n    if ($modx->user->isAuthenticated(\'mgr\') && !empty($showLog)) {\\r\\n        $modx->setPlaceholder(\'pdoSitemapLog\', print_r($pdoFetch->getTime(), true));\\r\\n    }\\r\\n}\\r\\nif (!empty($forceXML)) {\\r\\n    header(\\"Content-Type:text\\/xml\\");\\r\\n    @session_write_close();\\r\\n    exit($output);\\r\\n} else {\\r\\n    return $output;\\r\\n}","locked":0,"properties":"a:24:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:17:\\"pdotools_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:145:\\"@INLINE <url>\\n\\t<loc>[[+url]]<\\/loc>\\n\\t<lastmod>[[+date]]<\\/lastmod>\\n\\t<changefreq>[[+update]]<\\/changefreq>\\n\\t<priority>[[+priority]]<\\/priority>\\n<\\/url>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplWrapper\\";a:7:{s:4:\\"name\\";s:10:\\"tplWrapper\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_tplWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:110:\\"@INLINE <?xml version=\\"1.0\\" encoding=\\"[[++modx_charset]]\\"?>\\n<urlset xmlns=\\"[[+schema]]\\">\\n[[+output]]\\n<\\/urlset>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"templates\\";a:7:{s:4:\\"name\\";s:9:\\"templates\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_templates\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"context\\";a:7:{s:4:\\"name\\";s:7:\\"context\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_context\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"sitemapSchema\\";a:7:{s:4:\\"name\\";s:13:\\"sitemapSchema\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_sitemapSchema\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:43:\\"http:\\/\\/www.sitemaps.org\\/schemas\\/sitemap\\/0.9\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"hideUnsearchable\\";a:7:{s:4:\\"name\\";s:16:\\"hideUnsearchable\\";s:4:\\"desc\\";s:30:\\"pdotools_prop_hideUnsearchable\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"menuindex\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_sortdir\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"asc\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"prepareTVs\\";a:7:{s:4:\\"name\\";s:10:\\"prepareTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_prepareTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"1\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"processTVs\\";a:7:{s:4:\\"name\\";s:10:\\"processTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_processTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"forceXML\\";a:7:{s:4:\\"name\\";s:8:\\"forceXML\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_forceXML\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"useWeblinkUrl\\";a:7:{s:4:\\"name\\";s:13:\\"useWeblinkUrl\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_useWeblinkUrl\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"cache\\";a:7:{s:4:\\"name\\";s:5:\\"cache\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_cache\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"cacheKey\\";a:7:{s:4:\\"name\\";s:8:\\"cacheKey\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_cacheKey\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"cacheTime\\";a:7:{s:4:\\"name\\";s:9:\\"cacheTime\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_cacheTime\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:600;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdositemap.php","content":"use ModxPro\\\\PdoTools\\\\Fetch;\\r\\nuse MODX\\\\Revolution\\\\modResource;\\r\\nuse MODX\\\\Revolution\\\\modWebLink;\\r\\n\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var \\\\MODX\\\\Revolution\\\\modX $modx *\\/\\r\\n\\r\\n$modx->services[\'pdotools_config\'] = [];\\r\\n$pdoFetch = $modx->services->get(Fetch::class);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\n\\/\\/ Default variables\\r\\nif (empty($tpl)) {\\r\\n    $tpl = \\"@INLINE \\\\n<url>\\\\n\\\\t<loc>[[+url]]<\\/loc>\\\\n\\\\t<lastmod>[[+date]]<\\/lastmod>\\\\n\\\\t<changefreq>[[+update]]<\\/changefreq>\\\\n\\\\t<priority>[[+priority]]<\\/priority>\\\\n<\\/url>\\";\\r\\n}\\r\\nif (empty($tplWrapper)) {\\r\\n    $tplWrapper = \\"@INLINE <?xml version=\\\\\\"1.0\\\\\\" encoding=\\\\\\"[[++modx_charset]]\\\\\\"?>\\\\n<urlset xmlns=\\\\\\"[[+schema]]\\\\\\">\\\\n[[+output]]\\\\n<\\/urlset>\\";\\r\\n}\\r\\nif (empty($sitemapSchema)) {\\r\\n    $sitemapSchema = \'http:\\/\\/www.sitemaps.org\\/schemas\\/sitemap\\/0.9\';\\r\\n}\\r\\nif (empty($outputSeparator)) {\\r\\n    $outputSeparator = \\"\\\\n\\";\\r\\n}\\r\\nif (empty($cacheKey)) {\\r\\n    $scriptProperties[\'cacheKey\'] = \'sitemap\\/\' . substr(md5(json_encode($scriptProperties)), 0, 6);\\r\\n}\\r\\n\\r\\n\\/\\/ Convert parameters from GoogleSiteMap if exists\\r\\nif (!empty($itemTpl)) {\\r\\n    $tpl = $itemTpl;\\r\\n}\\r\\nif (!empty($containerTpl)) {\\r\\n    $tplWrapper = $containerTpl;\\r\\n}\\r\\nif (!empty($allowedtemplates)) {\\r\\n    $scriptProperties[\'templates\'] = $allowedtemplates;\\r\\n}\\r\\nif (!empty($maxDepth)) {\\r\\n    $scriptProperties[\'depth\'] = $maxDepth;\\r\\n}\\r\\nif (isset($hideDeleted)) {\\r\\n    $scriptProperties[\'showDeleted\'] = !$hideDeleted;\\r\\n}\\r\\nif (isset($published)) {\\r\\n    $scriptProperties[\'showUnpublished\'] = !$published;\\r\\n}\\r\\nif (isset($searchable)) {\\r\\n    $scriptProperties[\'showUnsearchable\'] = !$searchable;\\r\\n}\\r\\nif (!empty($googleSchema)) {\\r\\n    $sitemapSchema = $googleSchema;\\r\\n}\\r\\nif (!empty($excludeResources)) {\\r\\n    $tmp = array_map(\'trim\', explode(\',\', $excludeResources));\\r\\n    foreach ($tmp as $v) {\\r\\n        if (!empty($scriptProperties[\'resources\'])) {\\r\\n            $scriptProperties[\'resources\'] .= \',-\' . $v;\\r\\n        } else {\\r\\n            $scriptProperties[\'resources\'] = \'-\' . $v;\\r\\n        }\\r\\n    }\\r\\n}\\r\\nif (!empty($excludeChildrenOf)) {\\r\\n    $tmp = array_map(\'trim\', explode(\',\', $excludeChildrenOf));\\r\\n    foreach ($tmp as $v) {\\r\\n        if (!empty($scriptProperties[\'parents\'])) {\\r\\n            $scriptProperties[\'parents\'] .= \',-\' . $v;\\r\\n        } else {\\r\\n            $scriptProperties[\'parents\'] = \'-\' . $v;\\r\\n        }\\r\\n    }\\r\\n}\\r\\nif (!empty($startId)) {\\r\\n    if (!empty($scriptProperties[\'parents\'])) {\\r\\n        $scriptProperties[\'parents\'] .= \',\' . $startId;\\r\\n    } else {\\r\\n        $scriptProperties[\'parents\'] = $startId;\\r\\n    }\\r\\n}\\r\\nif (!empty($sortBy)) {\\r\\n    $scriptProperties[\'sortby\'] = $sortBy;\\r\\n}\\r\\nif (!empty($sortDir)) {\\r\\n    $scriptProperties[\'sortdir\'] = $sortDir;\\r\\n}\\r\\nif (!empty($priorityTV)) {\\r\\n    if (!empty($scriptProperties[\'includeTVs\'])) {\\r\\n        $scriptProperties[\'includeTVs\'] .= \',\' . $priorityTV;\\r\\n    } else {\\r\\n        $scriptProperties[\'includeTVs\'] = $priorityTV;\\r\\n    }\\r\\n}\\r\\nif (!empty($itemSeparator)) {\\r\\n    $outputSeparator = $itemSeparator;\\r\\n}\\r\\n\\/\\/---\\r\\n\\r\\n\\r\\n$class = modResource::class;\\r\\n$alias = $modx->getAlias($class);\\r\\n$where = [];\\r\\nif (empty($showHidden)) {\\r\\n    $where[] = [\\r\\n        $alias . \'.hidemenu\' => 0,\\r\\n        \'OR:\' . $alias . \'.class_key:IN\' => [\'Ticket\', \'Article\'],\\r\\n    ];\\r\\n}\\r\\nif (empty($context)) {\\r\\n    $scriptProperties[\'context\'] = $modx->context->key;\\r\\n}\\r\\n\\r\\n$select = [$alias => \'id,editedon,createdon,context_key,class_key,uri\'];\\r\\nif (!empty($useWeblinkUrl)) {\\r\\n    $select[$alias] .= \',content\';\\r\\n}\\r\\n\\/\\/ Add custom parameters\\r\\nforeach ([\'where\', \'select\'] as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n\\/\\/ Default parameters\\r\\n$default = [\\r\\n    \'class\' => $class,\\r\\n    \'where\' => $where,\\r\\n    \'select\' => $select,\\r\\n    \'sortby\' => \\"{$alias}.parent ASC, {$alias}.menuindex\\",\\r\\n    \'sortdir\' => \'ASC\',\\r\\n    \'return\' => \'data\',\\r\\n    \'scheme\' => \'full\',\\r\\n    \'limit\' => 0,\\r\\n];\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->addTime(\'Query parameters ready\');\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\r\\n\\r\\nif (!empty($cache)) {\\r\\n    $data = $pdoFetch->getCache($scriptProperties);\\r\\n}\\r\\nif (!isset($return)) {\\r\\n    $return = \'chunks\';\\r\\n}\\r\\nif (empty($data)) {\\r\\n    $now = time();\\r\\n    $data = $urls = [];\\r\\n    $rows = $pdoFetch->run();\\r\\n    foreach ($rows as $row) {\\r\\n        if (!empty($useWeblinkUrl) && $row[\'class_key\'] == modWebLink::class) {\\r\\n            $row[\'url\'] = is_numeric(trim($row[\'content\'], \'[]~ \'))\\r\\n                ? $pdoFetch->makeUrl((int)trim($row[\'content\'], \'[]~ \'), $row)\\r\\n                : $row[\'content\'];\\r\\n        } else {\\r\\n            $row[\'url\'] = $pdoFetch->makeUrl($row[\'id\'], $row);\\r\\n        }\\r\\n        unset($row[\'content\']);\\r\\n        $time = !empty($row[\'editedon\'])\\r\\n            ? $row[\'editedon\']\\r\\n            : $row[\'createdon\'];\\r\\n        $row[\'date\'] = date(\'c\', $time);\\r\\n\\r\\n        $datediff = floor(($now - $time) \\/ 86400);\\r\\n        if ($datediff <= 1) {\\r\\n            $row[\'priority\'] = \'1.0\';\\r\\n            $row[\'update\'] = \'daily\';\\r\\n        } elseif (($datediff > 1) && ($datediff <= 7)) {\\r\\n            $row[\'priority\'] = \'0.75\';\\r\\n            $row[\'update\'] = \'weekly\';\\r\\n        } elseif (($datediff > 7) && ($datediff <= 30)) {\\r\\n            $row[\'priority\'] = \'0.50\';\\r\\n            $row[\'update\'] = \'weekly\';\\r\\n        } else {\\r\\n            $row[\'priority\'] = \'0.25\';\\r\\n            $row[\'update\'] = \'monthly\';\\r\\n        }\\r\\n        if (!empty($priorityTV) && !empty($row[$priorityTV])) {\\r\\n            $row[\'priority\'] = $row[$priorityTV];\\r\\n        }\\r\\n\\r\\n        \\/\\/ Fix possible duplicates made by modWebLink\\r\\n        if (!empty($urls[$row[\'url\']])) {\\r\\n            if ($urls[$row[\'url\']] > $row[\'date\']) {\\r\\n                continue;\\r\\n            }\\r\\n        }\\r\\n        $urls[$row[\'url\']] = $row[\'date\'];\\r\\n\\r\\n        \\/\\/ Add item to output\\r\\n        if ($return === \'data\') {\\r\\n            $data[$row[\'url\']] = $row;\\r\\n        } else {\\r\\n            $data[$row[\'url\']] = $pdoFetch->parseChunk($tpl, $row);\\r\\n            if (strpos($data[$row[\'url\']], \'[[\') !== false) {\\r\\n                $modx->parser->processElementTags(\'\', $data[$row[\'url\']], true, true, \'[[\', \']]\', array(), 10);\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n    $pdoFetch->addTime(\'Rows processed\');\\r\\n    if (!empty($cache)) {\\r\\n        $pdoFetch->setCache($data, $scriptProperties);\\r\\n    }\\r\\n}\\r\\n\\r\\nif ($return === \'data\') {\\r\\n    $output = $data;\\r\\n} else {\\r\\n    $output = implode($outputSeparator, $data);\\r\\n    $output = $pdoFetch->getChunk($tplWrapper, [\\r\\n        \'schema\' => $sitemapSchema,\\r\\n        \'output\' => $output,\\r\\n        \'items\' => $output,\\r\\n    ]);\\r\\n    $pdoFetch->addTime(\'Rows wrapped\');\\r\\n\\r\\n    if ($modx->user->isAuthenticated(\'mgr\') && !empty($showLog)) {\\r\\n        $modx->setPlaceholder(\'pdoSitemapLog\', print_r($pdoFetch->getTime(), true));\\r\\n    }\\r\\n}\\r\\nif (!empty($forceXML)) {\\r\\n    header(\\"Content-Type:text\\/xml\\");\\r\\n    @session_write_close();\\r\\n    exit($output);\\r\\n} else {\\r\\n    return $output;\\r\\n}"}',
        'guid' => '61de43edfc1a5f6e3a014ecd8bc1cf52',
        'native_key' => 0,
        'signature' => '872b0da459f969ba72e5aaa053615607',
      ),
      '64bcf8df5dd6407cf44e3beb21dee011' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'MODX\\Revolution\\modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoNeighbors","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"use ModxPro\\\\PdoTools\\\\Fetch;\\r\\nuse MODX\\\\Revolution\\\\modResource;\\r\\nuse MODX\\\\Revolution\\\\modWebLink;\\r\\n\\r\\n\\/** @var \\\\MODX\\\\Revolution\\\\modX $modx *\\/\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\r\\n$modx->services[\'pdotools_config\'] = $scriptProperties;\\r\\n$pdoFetch = $modx->services->get(Fetch::class);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\nif (empty($id)) {\\r\\n    $id = $modx->resource->id;\\r\\n}\\r\\nif (empty($limit)) {\\r\\n    $limit = 1;\\r\\n}\\r\\nif (!isset($outputSeparator)) {\\r\\n    $outputSeparator = \\"\\\\n\\";\\r\\n}\\r\\n$fastMode = !empty($fastMode);\\r\\n\\r\\n$class = modResource::class;\\r\\n$alias = $modx->getAlias($class);\\r\\n$resource = ($id == $modx->resource->id)\\r\\n    ? $modx->resource\\r\\n    : $modx->getObject($class, $id);\\r\\nif (!$resource) {\\r\\n    return \'\';\\r\\n}\\r\\n\\r\\n\\/\\/ We need to determine ids of neighbors\\r\\n$params = $scriptProperties;\\r\\n$params[\'select\'] = \'id\';\\r\\n$params[\'limit\'] = 0;\\r\\nif (!empty($parents) && is_string($parents)) {\\r\\n    $parents = array_map(\'trim\', explode(\',\', $parents));\\r\\n    if (!in_array($resource->parent, $parents)) {\\r\\n        $parents[] = $resource->parent;\\r\\n    }\\r\\n    $key = array_search($resource->parent * -1, $parents);\\r\\n    if ($key !== false) {\\r\\n        unset($parents[$key]);\\r\\n    }\\r\\n    $params[\'parents\'] = implode(\',\', $parents);\\r\\n    $ids = $pdoFetch->getCollection(modResource::class, [], $params);\\r\\n    unset($scriptProperties[\'parents\']);\\r\\n} else {\\r\\n    $ids = $pdoFetch->getCollection(modResource::class, [\'parent\' => $resource->parent], $params);\\r\\n}\\r\\n\\r\\n$found = false;\\r\\n$prev = $next = [];\\r\\nforeach ($ids as $v) {\\r\\n    if ($v[\'id\'] == $id) {\\r\\n        $found = true;\\r\\n        continue;\\r\\n    } elseif (!$found) {\\r\\n        $prev[] = $v[\'id\'];\\r\\n    } else {\\r\\n        $next[] = $v[\'id\'];\\r\\n        if (count($next) >= $limit) {\\r\\n            break;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n$prev = array_splice($prev, $limit * -1);\\r\\nif (!empty($loop)) {\\r\\n    if (!count($prev)) {\\r\\n        $v = end($ids);\\r\\n        $prev[] = $v[\'id\'];\\r\\n    } else {\\r\\n        if (!count($next)) {\\r\\n            $v = reset($ids);\\r\\n            $next[] = $v[\'id\'];\\r\\n        }\\r\\n    }\\r\\n}\\r\\n$ids = array_merge($prev, $next, [$resource->parent]);\\r\\n$pdoFetch->addTime(\'Found ids of neighbors: \' . implode(\',\', $ids));\\r\\n\\r\\n\\/\\/ Query conditions\\r\\n$where = [$alias . \'.id:IN\' => $ids];\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$resourceColumns = array_keys($modx->getFieldMeta($class));\\r\\nif (empty($includeContent) && empty($useWeblinkUrl)) {\\r\\n    $key = array_search(\'content\', $resourceColumns);\\r\\n    unset($resourceColumns[$key]);\\r\\n}\\r\\n$select = [$alias => implode(\',\', $resourceColumns)];\\r\\n\\r\\n\\/\\/ Add custom parameters\\r\\nforeach ([\'where\', \'select\'] as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n\\/\\/ Default parameters\\r\\n$default = [\\r\\n    \'class\' => $class,\\r\\n    \'where\' => $where,\\r\\n    \'select\' => $select,\\r\\n    \\/\\/\'groupby\' => $class.\'.id\',\\r\\n    \'sortby\' => $class . \'.menuindex\',\\r\\n    \'sortdir\' => \'ASC\',\\r\\n    \'return\' => \'data\',\\r\\n    \'limit\' => 0,\\r\\n    \'totalVar\' => \'pdoneighbors.total\',\\r\\n];\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\nunset($scriptProperties[\'limit\']);\\r\\n$pdoFetch->addTime(\'Query parameters ready\');\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\r\\n\\r\\n$rows = $pdoFetch->run();\\r\\n$prev = array_flip($prev);\\r\\n$next = array_flip($next);\\r\\n\\r\\nif (!isset($return)) {\\r\\n    $return = \'chunks\';\\r\\n}\\r\\n$output = [\'prev\' => [], \'up\' => [], \'next\' => []];\\r\\nforeach ($rows as $row) {\\r\\n    if (empty($row[\'menutitle\'])) {\\r\\n        $row[\'menutitle\'] = $row[\'pagetitle\'];\\r\\n    }\\r\\n    if (!empty($useWeblinkUrl) && $row[\'class_key\'] === modWebLink::class) {\\r\\n        $row[\'link\'] = is_numeric(trim($row[\'content\'], \'[]~ \'))\\r\\n            ? $pdoFetch->makeUrl((int)trim($row[\'content\'], \'[]~ \'), $row)\\r\\n            : $row[\'content\'];\\r\\n    } else {\\r\\n        $row[\'link\'] = $pdoFetch->makeUrl($row[\'id\'], $row);\\r\\n    }\\r\\n\\r\\n    if (isset($prev[$row[\'id\']])) {\\r\\n        if ($return === \'data\') {\\r\\n            $output[\'prev\'][] = $row;\\r\\n        } else {\\r\\n            $output[\'prev\'][] = !empty($tplPrev)\\r\\n                ? $pdoFetch->getChunk($tplPrev, $row, $fastMode)\\r\\n                : $pdoFetch->getChunk(\'\', $row);\\r\\n        }\\r\\n    } elseif (isset($next[$row[\'id\']])) {\\r\\n        if ($return === \'data\') {\\r\\n            $output[\'next\'][] = $row;\\r\\n        } else {\\r\\n            $output[\'next\'][] = !empty($tplNext)\\r\\n                ? $pdoFetch->getChunk($tplNext, $row, $fastMode)\\r\\n                : $pdoFetch->getChunk(\'\', $row);\\r\\n        }\\r\\n    } else {\\r\\n        if ($return === \'data\') {\\r\\n            $output[\'up\'][] = $row;\\r\\n        } else {\\r\\n            $output[\'up\'][] = !empty($tplUp)\\r\\n                ? $pdoFetch->getChunk($tplUp, $row, $fastMode)\\r\\n                : $pdoFetch->getChunk(\'\', $row);\\r\\n        }\\r\\n    }\\r\\n}\\r\\n$pdoFetch->addTime(\'Chunks processed\');\\r\\n\\r\\n$log = \'\';\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $log .= \'<pre class=\\"pdoNeighborsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\nforeach ($output as &$row) {\\r\\n    $row = implode($outputSeparator, $row);\\r\\n}\\r\\n\\r\\nif (!empty($toSeparatePlaceholders)) {\\r\\n    $output[\'log\'] = $log;\\r\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n} else {\\r\\n    if (!empty($rows) || !empty($wrapIfEmpty)) {\\r\\n        $output = !empty($tplWrapper)\\r\\n            ? $pdoFetch->getChunk($tplWrapper, $output, $fastMode)\\r\\n            : $pdoFetch->getChunk(\'\', $output);\\r\\n    } else {\\r\\n        $output = \'\';\\r\\n    }\\r\\n    $output .= $log;\\r\\n\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n}","locked":0,"properties":"a:27:{s:2:\\"id\\";a:7:{s:4:\\"name\\";s:2:\\"id\\";s:4:\\"desc\\";s:16:\\"pdotools_prop_id\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_neighbors_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"menuindex\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_sortdir\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"asc\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplPrev\\";a:7:{s:4:\\"name\\";s:7:\\"tplPrev\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_tplPrev\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:106:\\"@INLINE <span class=\\"link-prev\\"><a href=\\"[[+link]]\\" class=\\"btn btn-light\\">&larr; [[+menutitle]]<\\/a><\\/span>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"tplUp\\";a:7:{s:4:\\"name\\";s:5:\\"tplUp\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_tplUp\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:104:\\"@INLINE <span class=\\"link-up\\"><a href=\\"[[+link]]\\" class=\\"btn btn-light\\">&uarr; [[+menutitle]]<\\/a><\\/span>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplNext\\";a:7:{s:4:\\"name\\";s:7:\\"tplNext\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_tplNext\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:106:\\"@INLINE <span class=\\"link-next\\"><a href=\\"[[+link]]\\" class=\\"btn btn-light\\">[[+menutitle]] &rarr;<\\/a><\\/span>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplWrapper\\";a:7:{s:4:\\"name\\";s:10:\\"tplWrapper\\";s:4:\\"desc\\";s:34:\\"pdotools_prop_neighbors_tplWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:93:\\"@INLINE <div class=\\"neighbors d-flex justify-content-between\\">[[+prev]][[+up]][[+next]]<\\/div>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"wrapIfEmpty\\";a:7:{s:4:\\"name\\";s:11:\\"wrapIfEmpty\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_wrapIfEmpty\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"hideContainers\\";a:7:{s:4:\\"name\\";s:14:\\"hideContainers\\";s:4:\\"desc\\";s:28:\\"pdotools_prop_hideContainers\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:22:\\"toSeparatePlaceholders\\";a:7:{s:4:\\"name\\";s:22:\\"toSeparatePlaceholders\\";s:4:\\"desc\\";s:36:\\"pdotools_prop_toSeparatePlaceholders\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"prepareTVs\\";a:7:{s:4:\\"name\\";s:10:\\"prepareTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_prepareTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"1\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"processTVs\\";a:7:{s:4:\\"name\\";s:10:\\"processTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_processTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"tv.\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"scheme\\";a:7:{s:4:\\"name\\";s:6:\\"scheme\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_scheme\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:6:{i:0;a:2:{s:5:\\"value\\";s:0:\\"\\";s:4:\\"text\\";s:14:\\"System default\\";}i:1;a:2:{s:5:\\"value\\";i:-1;s:4:\\"text\\";s:25:\\"-1 (relative to site_url)\\";}i:2;a:2:{s:5:\\"value\\";s:4:\\"full\\";s:4:\\"text\\";s:40:\\"full (absolute, prepended with site_url)\\";}i:3;a:2:{s:5:\\"value\\";s:3:\\"abs\\";s:4:\\"text\\";s:39:\\"abs (absolute, prepended with base_url)\\";}i:4;a:2:{s:5:\\"value\\";s:4:\\"http\\";s:4:\\"text\\";s:38:\\"http (absolute, forced to http scheme)\\";}i:5;a:2:{s:5:\\"value\\";s:5:\\"https\\";s:4:\\"text\\";s:40:\\"https (absolute, forced to https scheme)\\";}}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"useWeblinkUrl\\";a:7:{s:4:\\"name\\";s:13:\\"useWeblinkUrl\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_useWeblinkUrl\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"loop\\";a:7:{s:4:\\"name\\";s:4:\\"loop\\";s:4:\\"desc\\";s:18:\\"pdotools_prop_loop\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdoneighbors.php","content":"use ModxPro\\\\PdoTools\\\\Fetch;\\r\\nuse MODX\\\\Revolution\\\\modResource;\\r\\nuse MODX\\\\Revolution\\\\modWebLink;\\r\\n\\r\\n\\/** @var \\\\MODX\\\\Revolution\\\\modX $modx *\\/\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\r\\n$modx->services[\'pdotools_config\'] = $scriptProperties;\\r\\n$pdoFetch = $modx->services->get(Fetch::class);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\nif (empty($id)) {\\r\\n    $id = $modx->resource->id;\\r\\n}\\r\\nif (empty($limit)) {\\r\\n    $limit = 1;\\r\\n}\\r\\nif (!isset($outputSeparator)) {\\r\\n    $outputSeparator = \\"\\\\n\\";\\r\\n}\\r\\n$fastMode = !empty($fastMode);\\r\\n\\r\\n$class = modResource::class;\\r\\n$alias = $modx->getAlias($class);\\r\\n$resource = ($id == $modx->resource->id)\\r\\n    ? $modx->resource\\r\\n    : $modx->getObject($class, $id);\\r\\nif (!$resource) {\\r\\n    return \'\';\\r\\n}\\r\\n\\r\\n\\/\\/ We need to determine ids of neighbors\\r\\n$params = $scriptProperties;\\r\\n$params[\'select\'] = \'id\';\\r\\n$params[\'limit\'] = 0;\\r\\nif (!empty($parents) && is_string($parents)) {\\r\\n    $parents = array_map(\'trim\', explode(\',\', $parents));\\r\\n    if (!in_array($resource->parent, $parents)) {\\r\\n        $parents[] = $resource->parent;\\r\\n    }\\r\\n    $key = array_search($resource->parent * -1, $parents);\\r\\n    if ($key !== false) {\\r\\n        unset($parents[$key]);\\r\\n    }\\r\\n    $params[\'parents\'] = implode(\',\', $parents);\\r\\n    $ids = $pdoFetch->getCollection(modResource::class, [], $params);\\r\\n    unset($scriptProperties[\'parents\']);\\r\\n} else {\\r\\n    $ids = $pdoFetch->getCollection(modResource::class, [\'parent\' => $resource->parent], $params);\\r\\n}\\r\\n\\r\\n$found = false;\\r\\n$prev = $next = [];\\r\\nforeach ($ids as $v) {\\r\\n    if ($v[\'id\'] == $id) {\\r\\n        $found = true;\\r\\n        continue;\\r\\n    } elseif (!$found) {\\r\\n        $prev[] = $v[\'id\'];\\r\\n    } else {\\r\\n        $next[] = $v[\'id\'];\\r\\n        if (count($next) >= $limit) {\\r\\n            break;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n$prev = array_splice($prev, $limit * -1);\\r\\nif (!empty($loop)) {\\r\\n    if (!count($prev)) {\\r\\n        $v = end($ids);\\r\\n        $prev[] = $v[\'id\'];\\r\\n    } else {\\r\\n        if (!count($next)) {\\r\\n            $v = reset($ids);\\r\\n            $next[] = $v[\'id\'];\\r\\n        }\\r\\n    }\\r\\n}\\r\\n$ids = array_merge($prev, $next, [$resource->parent]);\\r\\n$pdoFetch->addTime(\'Found ids of neighbors: \' . implode(\',\', $ids));\\r\\n\\r\\n\\/\\/ Query conditions\\r\\n$where = [$alias . \'.id:IN\' => $ids];\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$resourceColumns = array_keys($modx->getFieldMeta($class));\\r\\nif (empty($includeContent) && empty($useWeblinkUrl)) {\\r\\n    $key = array_search(\'content\', $resourceColumns);\\r\\n    unset($resourceColumns[$key]);\\r\\n}\\r\\n$select = [$alias => implode(\',\', $resourceColumns)];\\r\\n\\r\\n\\/\\/ Add custom parameters\\r\\nforeach ([\'where\', \'select\'] as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n\\/\\/ Default parameters\\r\\n$default = [\\r\\n    \'class\' => $class,\\r\\n    \'where\' => $where,\\r\\n    \'select\' => $select,\\r\\n    \\/\\/\'groupby\' => $class.\'.id\',\\r\\n    \'sortby\' => $class . \'.menuindex\',\\r\\n    \'sortdir\' => \'ASC\',\\r\\n    \'return\' => \'data\',\\r\\n    \'limit\' => 0,\\r\\n    \'totalVar\' => \'pdoneighbors.total\',\\r\\n];\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\nunset($scriptProperties[\'limit\']);\\r\\n$pdoFetch->addTime(\'Query parameters ready\');\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\r\\n\\r\\n$rows = $pdoFetch->run();\\r\\n$prev = array_flip($prev);\\r\\n$next = array_flip($next);\\r\\n\\r\\nif (!isset($return)) {\\r\\n    $return = \'chunks\';\\r\\n}\\r\\n$output = [\'prev\' => [], \'up\' => [], \'next\' => []];\\r\\nforeach ($rows as $row) {\\r\\n    if (empty($row[\'menutitle\'])) {\\r\\n        $row[\'menutitle\'] = $row[\'pagetitle\'];\\r\\n    }\\r\\n    if (!empty($useWeblinkUrl) && $row[\'class_key\'] === modWebLink::class) {\\r\\n        $row[\'link\'] = is_numeric(trim($row[\'content\'], \'[]~ \'))\\r\\n            ? $pdoFetch->makeUrl((int)trim($row[\'content\'], \'[]~ \'), $row)\\r\\n            : $row[\'content\'];\\r\\n    } else {\\r\\n        $row[\'link\'] = $pdoFetch->makeUrl($row[\'id\'], $row);\\r\\n    }\\r\\n\\r\\n    if (isset($prev[$row[\'id\']])) {\\r\\n        if ($return === \'data\') {\\r\\n            $output[\'prev\'][] = $row;\\r\\n        } else {\\r\\n            $output[\'prev\'][] = !empty($tplPrev)\\r\\n                ? $pdoFetch->getChunk($tplPrev, $row, $fastMode)\\r\\n                : $pdoFetch->getChunk(\'\', $row);\\r\\n        }\\r\\n    } elseif (isset($next[$row[\'id\']])) {\\r\\n        if ($return === \'data\') {\\r\\n            $output[\'next\'][] = $row;\\r\\n        } else {\\r\\n            $output[\'next\'][] = !empty($tplNext)\\r\\n                ? $pdoFetch->getChunk($tplNext, $row, $fastMode)\\r\\n                : $pdoFetch->getChunk(\'\', $row);\\r\\n        }\\r\\n    } else {\\r\\n        if ($return === \'data\') {\\r\\n            $output[\'up\'][] = $row;\\r\\n        } else {\\r\\n            $output[\'up\'][] = !empty($tplUp)\\r\\n                ? $pdoFetch->getChunk($tplUp, $row, $fastMode)\\r\\n                : $pdoFetch->getChunk(\'\', $row);\\r\\n        }\\r\\n    }\\r\\n}\\r\\n$pdoFetch->addTime(\'Chunks processed\');\\r\\n\\r\\n$log = \'\';\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $log .= \'<pre class=\\"pdoNeighborsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\nforeach ($output as &$row) {\\r\\n    $row = implode($outputSeparator, $row);\\r\\n}\\r\\n\\r\\nif (!empty($toSeparatePlaceholders)) {\\r\\n    $output[\'log\'] = $log;\\r\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n} else {\\r\\n    if (!empty($rows) || !empty($wrapIfEmpty)) {\\r\\n        $output = !empty($tplWrapper)\\r\\n            ? $pdoFetch->getChunk($tplWrapper, $output, $fastMode)\\r\\n            : $pdoFetch->getChunk(\'\', $output);\\r\\n    } else {\\r\\n        $output = \'\';\\r\\n    }\\r\\n    $output .= $log;\\r\\n\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n}"}',
        'guid' => '8b493580d0e35bf79935e5535d2afe8e',
        'native_key' => 0,
        'signature' => '98e581c6cae1318e2253cca824dce756',
      ),
      'b76cf05199d287e54e859e22c3514119' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'MODX\\Revolution\\modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoPage","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"use ModxPro\\\\PdoTools\\\\Support\\\\Paginator;\\r\\nuse MODX\\\\Revolution\\\\modSnippet;\\r\\n\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var modX $modx *\\/\\r\\n\\r\\n\\/\\/ Default variables\\r\\nif (empty($pageVarKey)) {\\r\\n    $pageVarKey = \'page\';\\r\\n}\\r\\nif (empty($pageNavVar)) {\\r\\n    $pageNavVar = \'page.nav\';\\r\\n}\\r\\nif (empty($pageCountVar)) {\\r\\n    $pageCountVar = \'pageCount\';\\r\\n}\\r\\nif (empty($totalVar)) {\\r\\n    $totalVar = \'total\';\\r\\n}\\r\\nif (empty($page)) {\\r\\n    $page = 1;\\r\\n}\\r\\nif (empty($pageLimit)) {\\r\\n    $pageLimit = 5;\\r\\n} else {\\r\\n    $pageLimit = (integer)$pageLimit;\\r\\n}\\r\\nif (!isset($plPrefix)) {\\r\\n    $plPrefix = \'\';\\r\\n}\\r\\nif (!empty($scriptProperties[\'ajaxMode\'])) {\\r\\n    $scriptProperties[\'ajax\'] = 1;\\r\\n}\\r\\n\\r\\n\\/\\/ Convert parameters from getPage if exists\\r\\nif (!empty($namespace)) {\\r\\n    $plPrefix = $namespace;\\r\\n}\\r\\nif (!empty($pageNavTpl)) {\\r\\n    $scriptProperties[\'tplPage\'] = $pageNavTpl;\\r\\n}\\r\\nif (!empty($pageNavOuterTpl)) {\\r\\n    $scriptProperties[\'tplPageWrapper\'] = $pageNavOuterTpl;\\r\\n}\\r\\nif (!empty($pageActiveTpl)) {\\r\\n    $scriptProperties[\'tplPageActive\'] = $pageActiveTpl;\\r\\n}\\r\\nif (!empty($pageFirstTpl)) {\\r\\n    $scriptProperties[\'tplPageFirst\'] = $pageFirstTpl;\\r\\n}\\r\\nif (!empty($pagePrevTpl)) {\\r\\n    $scriptProperties[\'tplPagePrev\'] = $pagePrevTpl;\\r\\n}\\r\\nif (!empty($pageNextTpl)) {\\r\\n    $scriptProperties[\'tplPageNext\'] = $pageNextTpl;\\r\\n}\\r\\nif (!empty($pageLastTpl)) {\\r\\n    $scriptProperties[\'tplPageLast\'] = $pageLastTpl;\\r\\n}\\r\\nif (!empty($pageSkipTpl)) {\\r\\n    $scriptProperties[\'tplPageSkip\'] = $pageSkipTpl;\\r\\n}\\r\\nif (!empty($pageNavScheme)) {\\r\\n    $scriptProperties[\'scheme\'] = $pageNavScheme;\\r\\n}\\r\\nif (!empty($cache_expires)) {\\r\\n    $scriptProperties[\'cacheTime\'] = $cache_expires;\\r\\n}\\r\\n\\/\\/---\\r\\n$strictMode = !empty($strictMode);\\r\\n\\r\\n$isAjax = !empty($scriptProperties[\'ajax\']) && !empty($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\';\\r\\nif ($isAjax && !isset($_REQUEST[$pageVarKey])) {\\r\\n    return;\\r\\n}\\r\\n\\r\\n$modx->services[\'pdotools_config\'] = $scriptProperties;\\r\\n\\/** @var Paginator $paginator *\\/\\r\\n$paginator = $modx->services->get(Paginator::class);\\r\\n$paginator->pdoTools->addTime(\'pdoTools loaded\');\\r\\n\\r\\n\\/\\/ Script and styles\\r\\nif (!$isAjax && !empty($scriptProperties[\'ajaxMode\'])) {\\r\\n    $paginator->loadJsCss();\\r\\n}\\r\\n\\/\\/ Removing of default scripts and styles so they do not overwrote nested snippet parameters\\r\\nif ($snippet = $modx->getObject(modSnippet::class, [\'name\' => \'pdoPage\'])) {\\r\\n    $properties = $snippet->get(\'properties\');\\r\\n    if ($scriptProperties[\'frontend_js\'] == $properties[\'frontend_js\'][\'value\']) {\\r\\n        unset($scriptProperties[\'frontend_js\']);\\r\\n    }\\r\\n    if ($scriptProperties[\'frontend_css\'] == $properties[\'frontend_css\'][\'value\']) {\\r\\n        unset($scriptProperties[\'frontend_css\']);\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Page\\r\\nif (isset($_REQUEST[$pageVarKey]) && $strictMode && (!is_numeric($_REQUEST[$pageVarKey]) || ($_REQUEST[$pageVarKey] <= 1 && !$isAjax))) {\\r\\n    return $paginator->redirectToFirst($isAjax);\\r\\n} elseif (!empty($_REQUEST[$pageVarKey])) {\\r\\n    $page = (integer)$_REQUEST[$pageVarKey];\\r\\n}\\r\\n$scriptProperties[\'page\'] = $page;\\r\\n$scriptProperties[\'request\'] = $_REQUEST;\\r\\n$scriptProperties[\'setTotal\'] = true;\\r\\n\\/\\/ Limit\\r\\nif (isset($_REQUEST[\'limit\'])) {\\r\\n    if (is_numeric($_REQUEST[\'limit\']) && abs($_REQUEST[\'limit\']) > 0) {\\r\\n        $scriptProperties[\'limit\'] = abs($_REQUEST[\'limit\']);\\r\\n    } elseif ($strictMode) {\\r\\n        unset($_GET[\'limit\']);\\r\\n\\r\\n        return $paginator->redirectToFirst($isAjax);\\r\\n    }\\r\\n}\\r\\nif (!empty($maxLimit) && !empty($scriptProperties[\'limit\']) && $scriptProperties[\'limit\'] > $maxLimit) {\\r\\n    $scriptProperties[\'limit\'] = $maxLimit;\\r\\n}\\r\\n\\r\\n\\/\\/ Offset\\r\\n$_offset = !empty($scriptProperties[\'offset\']) && $scriptProperties[\'offset\'] > 0\\r\\n    ? (int)$scriptProperties[\'offset\']\\r\\n    : 0;\\r\\n$scriptProperties[\'offset\'] = $page > 1\\r\\n    ? $scriptProperties[\'limit\'] * ($page - 1) + $_offset\\r\\n    : $_offset;\\r\\nif (!empty($scriptProperties[\'offset\']) && empty($scriptProperties[\'limit\'])) {\\r\\n    $scriptProperties[\'limit\'] = 10000000;\\r\\n}\\r\\n\\r\\n$cache = !empty($cache) || (!$modx->user->id && !empty($cacheAnonymous));\\r\\n$url = $paginator->getBaseUrl();\\r\\n$output = $pagination = $total = $pageCount = \'\';\\r\\n\\r\\n$data = $cache\\r\\n    ? $paginator->pdoTools->getCache($scriptProperties)\\r\\n    : [];\\r\\n\\r\\nif (empty($data)) {\\r\\n    $output = $paginator->pdoTools->runSnippet(\'!\' . $scriptProperties[\'element\'], $scriptProperties);\\r\\n    if ($output === false) {\\r\\n        return \'\';\\r\\n    } elseif (!empty($toPlaceholder)) {\\r\\n        $output = $modx->getPlaceholder($toPlaceholder);\\r\\n    }\\r\\n\\r\\n    \\/\\/ Pagination\\r\\n    $total = (int)$modx->getPlaceholder($totalVar);\\r\\n    $pageCount = !empty($scriptProperties[\'limit\']) && $total > $_offset\\r\\n        ? ceil(($total - $_offset) \\/ $scriptProperties[\'limit\'])\\r\\n        : 0;\\r\\n\\r\\n    \\/\\/ Redirect to start if somebody specified incorrect page\\r\\n    if ($page > 1 && $page > $pageCount && $strictMode) {\\r\\n        return $paginator->redirectToFirst($isAjax);\\r\\n    }\\r\\n    if (!empty($pageCount) && $pageCount > 1) {\\r\\n        $pagination = [\\r\\n            \'first\' => $page > 1 && !empty($tplPageFirst)\\r\\n                ? $paginator->makePageLink($url, 1, $tplPageFirst)\\r\\n                : \'\',\\r\\n            \'prev\' => $page > 1 && !empty($tplPagePrev)\\r\\n                ? $paginator->makePageLink($url, $page - 1, $tplPagePrev)\\r\\n                : \'\',\\r\\n            \'pages\' => $pageLimit >= 7 && empty($disableModernPagination)\\r\\n                ? $paginator->buildModernPagination($page, $pageCount, $url)\\r\\n                : $paginator->buildClassicPagination($page, $pageCount, $url),\\r\\n            \'next\' => $page < $pageCount && !empty($tplPageNext)\\r\\n                ? $paginator->makePageLink($url, $page + 1, $tplPageNext)\\r\\n                : \'\',\\r\\n            \'last\' => $page < $pageCount && !empty($tplPageLast)\\r\\n                ? $paginator->makePageLink($url, $pageCount, $tplPageLast)\\r\\n                : \'\',\\r\\n        ];\\r\\n\\r\\n        if (!empty($pageCount)) {\\r\\n            foreach ([\'first\', \'prev\', \'next\', \'last\'] as $v) {\\r\\n                $_tpl = \'tplPage\' . ucfirst($v) . \'Empty\';\\r\\n                if (!empty(${$_tpl}) && empty($pagination[$v])) {\\r\\n                    $pagination[$v] = $paginator->pdoTools->getChunk(${$_tpl});\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n    } else {\\r\\n        $pagination = [\\r\\n            \'first\' => \'\',\\r\\n            \'prev\' => \'\',\\r\\n            \'pages\' => \'\',\\r\\n            \'next\' => \'\',\\r\\n            \'last\' => \'\',\\r\\n        ];\\r\\n    }\\r\\n\\r\\n    $data = [\\r\\n        \'output\' => $output,\\r\\n        $pageVarKey => $page,\\r\\n        $pageCountVar => $pageCount,\\r\\n        $pageNavVar => !empty($tplPageWrapper)\\r\\n            ? $paginator->pdoTools->getChunk($tplPageWrapper, $pagination)\\r\\n            : $paginator->pdoTools->parseChunk(\'\', $pagination),\\r\\n        $totalVar => $total,\\r\\n    ];\\r\\n    if ($cache) {\\r\\n        $paginator->pdoTools->setCache($data, $scriptProperties);\\r\\n    }\\r\\n}\\r\\n\\/** @var bool $showLog *\\/\\r\\nif ($modx->user->isAuthenticated(\'mgr\') && (bool)$showLog) {\\r\\n    $modx->setPlaceholder(\'pdoPageLog\', print_r($paginator->pdoTools->getTime(), true));\\r\\n}\\r\\n\\r\\nif ($isAjax) {\\r\\n    if ($pageNavVar !== \'pagination\') {\\r\\n        $data[\'pagination\'] = $data[$pageNavVar];\\r\\n        unset($data[$pageNavVar]);\\r\\n    }\\r\\n    if ($pageCountVar !== \'pages\') {\\r\\n        $data[\'pages\'] = (int)$data[$pageCountVar];\\r\\n        unset($data[$pageCountVar]);\\r\\n    }\\r\\n    if ($pageVarKey !== \'page\') {\\r\\n        $data[\'page\'] = (int)$data[$pageVarKey];\\r\\n        unset($data[$pageVarKey]);\\r\\n    }\\r\\n    if ($totalVar !== \'total\') {\\r\\n        $data[\'total\'] = (int)$data[$totalVar];\\r\\n        unset($data[$totalVar]);\\r\\n    }\\r\\n\\r\\n    $maxIterations = (integer)$modx->getOption(\'parser_max_iterations\', null, 10);\\r\\n    $modx->getParser()->processElementTags(\'\', $data[\'output\'], false, false, \'[[\', \']]\', [], $maxIterations);\\r\\n    $modx->getParser()->processElementTags(\'\', $data[\'output\'], true, true, \'[[\', \']]\', [], $maxIterations);\\r\\n\\r\\n    @session_write_close();\\r\\n    exit(json_encode($data));\\r\\n}\\r\\n\\r\\nif (!empty($setMeta)) {\\r\\n    $charset = $modx->getOption(\'modx_charset\', null, \'UTF-8\');\\r\\n    $canurl = $paginator->pdoTools->config(\'scheme\') !== \'full\'\\r\\n        ? $paginator->getCanonicalUrl($url)\\r\\n        : $url;\\r\\n    $modx->regClientStartupHTMLBlock(\'<link rel=\\"canonical\\" href=\\"\' . htmlentities($canurl, ENT_QUOTES, $charset) . \'\\"\\/>\');\\r\\n    if ($data[$pageVarKey] > 1) {\\r\\n        $prevUrl = $paginator->makePageLink($canurl, $data[$pageVarKey] - 1);\\r\\n        $modx->regClientStartupHTMLBlock(\\r\\n            \'<link rel=\\"prev\\" href=\\"\' . htmlentities($prevUrl, ENT_QUOTES, $charset) . \'\\"\\/>\'\\r\\n        );\\r\\n    }\\r\\n    if ($data[$pageVarKey] < $data[$pageCountVar]) {\\r\\n        $nextUrl = $paginator->makePageLink($canurl, $data[$pageVarKey] + 1);\\r\\n        $modx->regClientStartupHTMLBlock(\\r\\n            \'<link rel=\\"next\\" href=\\"\' . htmlentities($nextUrl, ENT_QUOTES, $charset) . \'\\"\\/>\'\\r\\n        );\\r\\n    }\\r\\n}\\r\\n\\r\\n$modx->setPlaceholders($data, $plPrefix);\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $data[\'output\']);\\r\\n} else {\\r\\n    return $data[\'output\'];\\r\\n}","locked":0,"properties":"a:41:{s:8:\\"plPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"plPrefix\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_plPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"maxLimit\\";a:7:{s:4:\\"name\\";s:8:\\"maxLimit\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_maxLimit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:100;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"page\\";a:7:{s:4:\\"name\\";s:4:\\"page\\";s:4:\\"desc\\";s:18:\\"pdotools_prop_page\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"pageVarKey\\";a:7:{s:4:\\"name\\";s:10:\\"pageVarKey\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_pageVarKey\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:4:\\"page\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"totalVar\\";a:7:{s:4:\\"name\\";s:8:\\"totalVar\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_totalVar\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:10:\\"page.total\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"pageLimit\\";a:7:{s:4:\\"name\\";s:9:\\"pageLimit\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_pageLimit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:5;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"element\\";a:7:{s:4:\\"name\\";s:7:\\"element\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_element\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:12:\\"pdoResources\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"pageNavVar\\";a:7:{s:4:\\"name\\";s:10:\\"pageNavVar\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_pageNavVar\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:8:\\"page.nav\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"pageCountVar\\";a:7:{s:4:\\"name\\";s:12:\\"pageCountVar\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_pageCountVar\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"pageCount\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"pageLinkScheme\\";a:7:{s:4:\\"name\\";s:14:\\"pageLinkScheme\\";s:4:\\"desc\\";s:28:\\"pdotools_prop_pageLinkScheme\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplPage\\";a:7:{s:4:\\"name\\";s:7:\\"tplPage\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_tplPage\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:88:\\"@INLINE <li class=\\"page-item\\"><a class=\\"page-link\\" href=\\"[[+href]]\\">[[+pageNo]]<\\/a><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"tplPageWrapper\\";a:7:{s:4:\\"name\\";s:14:\\"tplPageWrapper\\";s:4:\\"desc\\";s:28:\\"pdotools_prop_tplPageWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:83:\\"@INLINE <ul class=\\"pagination\\">[[+first]][[+prev]][[+pages]][[+next]][[+last]]<\\/ul>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"tplPageActive\\";a:7:{s:4:\\"name\\";s:13:\\"tplPageActive\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_tplPageActive\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:95:\\"@INLINE <li class=\\"page-item active\\"><a class=\\"page-link\\" href=\\"[[+href]]\\">[[+pageNo]]<\\/a><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"tplPageFirst\\";a:7:{s:4:\\"name\\";s:12:\\"tplPageFirst\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_tplPageFirst\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:95:\\"@INLINE <li class=\\"page-item\\"><a class=\\"page-link\\" href=\\"[[+href]]\\">[[%pdopage_first]]<\\/a><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"tplPageLast\\";a:7:{s:4:\\"name\\";s:11:\\"tplPageLast\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_tplPageLast\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:94:\\"@INLINE <li class=\\"page-item\\"><a class=\\"page-link\\" href=\\"[[+href]]\\">[[%pdopage_last]]<\\/a><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"tplPagePrev\\";a:7:{s:4:\\"name\\";s:11:\\"tplPagePrev\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_tplPagePrev\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:84:\\"@INLINE <li class=\\"page-item\\"><a class=\\"page-link\\" href=\\"[[+href]]\\">&laquo;<\\/a><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"tplPageNext\\";a:7:{s:4:\\"name\\";s:11:\\"tplPageNext\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_tplPageNext\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:84:\\"@INLINE <li class=\\"page-item\\"><a class=\\"page-link\\" href=\\"[[+href]]\\">&raquo;<\\/a><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"tplPageSkip\\";a:7:{s:4:\\"name\\";s:11:\\"tplPageSkip\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_tplPageSkip\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:78:\\"@INLINE <li class=\\"page-item disabled\\"><span class=\\"page-link\\">...<\\/span><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:17:\\"tplPageFirstEmpty\\";a:7:{s:4:\\"name\\";s:17:\\"tplPageFirstEmpty\\";s:4:\\"desc\\";s:31:\\"pdotools_prop_tplPageFirstEmpty\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:93:\\"@INLINE <li class=\\"page-item disabled\\"><span class=\\"page-link\\">[[%pdopage_first]]<\\/span><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"tplPageLastEmpty\\";a:7:{s:4:\\"name\\";s:16:\\"tplPageLastEmpty\\";s:4:\\"desc\\";s:30:\\"pdotools_prop_tplPageLastEmpty\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:92:\\"@INLINE <li class=\\"page-item disabled\\"><span class=\\"page-link\\">[[%pdopage_last]]<\\/span><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"tplPagePrevEmpty\\";a:7:{s:4:\\"name\\";s:16:\\"tplPagePrevEmpty\\";s:4:\\"desc\\";s:30:\\"pdotools_prop_tplPagePrevEmpty\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:82:\\"@INLINE <li class=\\"page-item disabled\\"><span class=\\"page-link\\">&laquo;<\\/span><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"tplPageNextEmpty\\";a:7:{s:4:\\"name\\";s:16:\\"tplPageNextEmpty\\";s:4:\\"desc\\";s:30:\\"pdotools_prop_tplPageNextEmpty\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:83:\\"@INLINE <li class=\\"page-item disabled\\"><span class=\\"page-link\\" >&raquo;<\\/span><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"cache\\";a:7:{s:4:\\"name\\";s:5:\\"cache\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_cache\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"cacheTime\\";a:7:{s:4:\\"name\\";s:9:\\"cacheTime\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_cacheTime\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:3600;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"cacheAnonymous\\";a:7:{s:4:\\"name\\";s:14:\\"cacheAnonymous\\";s:4:\\"desc\\";s:28:\\"pdotools_prop_cacheAnonymous\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"ajax\\";a:7:{s:4:\\"name\\";s:4:\\"ajax\\";s:4:\\"desc\\";s:18:\\"pdotools_prop_ajax\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"ajaxMode\\";a:7:{s:4:\\"name\\";s:8:\\"ajaxMode\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_ajaxMode\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:4:{i:0;a:2:{s:4:\\"text\\";s:4:\\"None\\";s:5:\\"value\\";s:0:\\"\\";}i:1;a:2:{s:4:\\"text\\";s:7:\\"Default\\";s:5:\\"value\\";s:7:\\"default\\";}i:2;a:2:{s:4:\\"text\\";s:6:\\"Scroll\\";s:5:\\"value\\";s:6:\\"scroll\\";}i:3;a:2:{s:4:\\"text\\";s:6:\\"Button\\";s:5:\\"value\\";s:6:\\"button\\";}}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"ajaxElemWrapper\\";a:7:{s:4:\\"name\\";s:15:\\"ajaxElemWrapper\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_ajaxElemWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:8:\\"#pdopage\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"ajaxElemRows\\";a:7:{s:4:\\"name\\";s:12:\\"ajaxElemRows\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_ajaxElemRows\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:14:\\"#pdopage .rows\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:18:\\"ajaxElemPagination\\";a:7:{s:4:\\"name\\";s:18:\\"ajaxElemPagination\\";s:4:\\"desc\\";s:32:\\"pdotools_prop_ajaxElemPagination\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:20:\\"#pdopage .pagination\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"ajaxElemLink\\";a:7:{s:4:\\"name\\";s:12:\\"ajaxElemLink\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_ajaxElemLink\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:22:\\"#pdopage .pagination a\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"ajaxElemMore\\";a:7:{s:4:\\"name\\";s:12:\\"ajaxElemMore\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_ajaxElemMore\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:18:\\"#pdopage .btn-more\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"ajaxTplMore\\";a:7:{s:4:\\"name\\";s:11:\\"ajaxTplMore\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_ajaxTplMore\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:75:\\"@INLINE <button class=\\"btn btn-primary btn-more\\">[[%pdopage_more]]<\\/button>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"ajaxHistory\\";a:7:{s:4:\\"name\\";s:11:\\"ajaxHistory\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_ajaxHistory\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:3:{i:0;a:2:{s:4:\\"text\\";s:4:\\"Auto\\";s:5:\\"value\\";s:0:\\"\\";}i:1;a:2:{s:4:\\"text\\";s:7:\\"Enabled\\";s:5:\\"value\\";i:1;}i:2;a:2:{s:4:\\"text\\";s:8:\\"Disabled\\";s:5:\\"value\\";i:0;}}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"frontend_js\\";a:7:{s:4:\\"name\\";s:11:\\"frontend_js\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_frontend_js\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:31:\\"[[+assetsUrl]]js\\/pdopage.min.js\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"frontend_css\\";a:7:{s:4:\\"name\\";s:12:\\"frontend_css\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_frontend_css\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:33:\\"[[+assetsUrl]]css\\/pdopage.min.css\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"setMeta\\";a:7:{s:4:\\"name\\";s:7:\\"setMeta\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_setMeta\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"strictMode\\";a:7:{s:4:\\"name\\";s:10:\\"strictMode\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_strictMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdopage.php","content":"use ModxPro\\\\PdoTools\\\\Support\\\\Paginator;\\r\\nuse MODX\\\\Revolution\\\\modSnippet;\\r\\n\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var modX $modx *\\/\\r\\n\\r\\n\\/\\/ Default variables\\r\\nif (empty($pageVarKey)) {\\r\\n    $pageVarKey = \'page\';\\r\\n}\\r\\nif (empty($pageNavVar)) {\\r\\n    $pageNavVar = \'page.nav\';\\r\\n}\\r\\nif (empty($pageCountVar)) {\\r\\n    $pageCountVar = \'pageCount\';\\r\\n}\\r\\nif (empty($totalVar)) {\\r\\n    $totalVar = \'total\';\\r\\n}\\r\\nif (empty($page)) {\\r\\n    $page = 1;\\r\\n}\\r\\nif (empty($pageLimit)) {\\r\\n    $pageLimit = 5;\\r\\n} else {\\r\\n    $pageLimit = (integer)$pageLimit;\\r\\n}\\r\\nif (!isset($plPrefix)) {\\r\\n    $plPrefix = \'\';\\r\\n}\\r\\nif (!empty($scriptProperties[\'ajaxMode\'])) {\\r\\n    $scriptProperties[\'ajax\'] = 1;\\r\\n}\\r\\n\\r\\n\\/\\/ Convert parameters from getPage if exists\\r\\nif (!empty($namespace)) {\\r\\n    $plPrefix = $namespace;\\r\\n}\\r\\nif (!empty($pageNavTpl)) {\\r\\n    $scriptProperties[\'tplPage\'] = $pageNavTpl;\\r\\n}\\r\\nif (!empty($pageNavOuterTpl)) {\\r\\n    $scriptProperties[\'tplPageWrapper\'] = $pageNavOuterTpl;\\r\\n}\\r\\nif (!empty($pageActiveTpl)) {\\r\\n    $scriptProperties[\'tplPageActive\'] = $pageActiveTpl;\\r\\n}\\r\\nif (!empty($pageFirstTpl)) {\\r\\n    $scriptProperties[\'tplPageFirst\'] = $pageFirstTpl;\\r\\n}\\r\\nif (!empty($pagePrevTpl)) {\\r\\n    $scriptProperties[\'tplPagePrev\'] = $pagePrevTpl;\\r\\n}\\r\\nif (!empty($pageNextTpl)) {\\r\\n    $scriptProperties[\'tplPageNext\'] = $pageNextTpl;\\r\\n}\\r\\nif (!empty($pageLastTpl)) {\\r\\n    $scriptProperties[\'tplPageLast\'] = $pageLastTpl;\\r\\n}\\r\\nif (!empty($pageSkipTpl)) {\\r\\n    $scriptProperties[\'tplPageSkip\'] = $pageSkipTpl;\\r\\n}\\r\\nif (!empty($pageNavScheme)) {\\r\\n    $scriptProperties[\'scheme\'] = $pageNavScheme;\\r\\n}\\r\\nif (!empty($cache_expires)) {\\r\\n    $scriptProperties[\'cacheTime\'] = $cache_expires;\\r\\n}\\r\\n\\/\\/---\\r\\n$strictMode = !empty($strictMode);\\r\\n\\r\\n$isAjax = !empty($scriptProperties[\'ajax\']) && !empty($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\';\\r\\nif ($isAjax && !isset($_REQUEST[$pageVarKey])) {\\r\\n    return;\\r\\n}\\r\\n\\r\\n$modx->services[\'pdotools_config\'] = $scriptProperties;\\r\\n\\/** @var Paginator $paginator *\\/\\r\\n$paginator = $modx->services->get(Paginator::class);\\r\\n$paginator->pdoTools->addTime(\'pdoTools loaded\');\\r\\n\\r\\n\\/\\/ Script and styles\\r\\nif (!$isAjax && !empty($scriptProperties[\'ajaxMode\'])) {\\r\\n    $paginator->loadJsCss();\\r\\n}\\r\\n\\/\\/ Removing of default scripts and styles so they do not overwrote nested snippet parameters\\r\\nif ($snippet = $modx->getObject(modSnippet::class, [\'name\' => \'pdoPage\'])) {\\r\\n    $properties = $snippet->get(\'properties\');\\r\\n    if ($scriptProperties[\'frontend_js\'] == $properties[\'frontend_js\'][\'value\']) {\\r\\n        unset($scriptProperties[\'frontend_js\']);\\r\\n    }\\r\\n    if ($scriptProperties[\'frontend_css\'] == $properties[\'frontend_css\'][\'value\']) {\\r\\n        unset($scriptProperties[\'frontend_css\']);\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Page\\r\\nif (isset($_REQUEST[$pageVarKey]) && $strictMode && (!is_numeric($_REQUEST[$pageVarKey]) || ($_REQUEST[$pageVarKey] <= 1 && !$isAjax))) {\\r\\n    return $paginator->redirectToFirst($isAjax);\\r\\n} elseif (!empty($_REQUEST[$pageVarKey])) {\\r\\n    $page = (integer)$_REQUEST[$pageVarKey];\\r\\n}\\r\\n$scriptProperties[\'page\'] = $page;\\r\\n$scriptProperties[\'request\'] = $_REQUEST;\\r\\n$scriptProperties[\'setTotal\'] = true;\\r\\n\\/\\/ Limit\\r\\nif (isset($_REQUEST[\'limit\'])) {\\r\\n    if (is_numeric($_REQUEST[\'limit\']) && abs($_REQUEST[\'limit\']) > 0) {\\r\\n        $scriptProperties[\'limit\'] = abs($_REQUEST[\'limit\']);\\r\\n    } elseif ($strictMode) {\\r\\n        unset($_GET[\'limit\']);\\r\\n\\r\\n        return $paginator->redirectToFirst($isAjax);\\r\\n    }\\r\\n}\\r\\nif (!empty($maxLimit) && !empty($scriptProperties[\'limit\']) && $scriptProperties[\'limit\'] > $maxLimit) {\\r\\n    $scriptProperties[\'limit\'] = $maxLimit;\\r\\n}\\r\\n\\r\\n\\/\\/ Offset\\r\\n$_offset = !empty($scriptProperties[\'offset\']) && $scriptProperties[\'offset\'] > 0\\r\\n    ? (int)$scriptProperties[\'offset\']\\r\\n    : 0;\\r\\n$scriptProperties[\'offset\'] = $page > 1\\r\\n    ? $scriptProperties[\'limit\'] * ($page - 1) + $_offset\\r\\n    : $_offset;\\r\\nif (!empty($scriptProperties[\'offset\']) && empty($scriptProperties[\'limit\'])) {\\r\\n    $scriptProperties[\'limit\'] = 10000000;\\r\\n}\\r\\n\\r\\n$cache = !empty($cache) || (!$modx->user->id && !empty($cacheAnonymous));\\r\\n$url = $paginator->getBaseUrl();\\r\\n$output = $pagination = $total = $pageCount = \'\';\\r\\n\\r\\n$data = $cache\\r\\n    ? $paginator->pdoTools->getCache($scriptProperties)\\r\\n    : [];\\r\\n\\r\\nif (empty($data)) {\\r\\n    $output = $paginator->pdoTools->runSnippet(\'!\' . $scriptProperties[\'element\'], $scriptProperties);\\r\\n    if ($output === false) {\\r\\n        return \'\';\\r\\n    } elseif (!empty($toPlaceholder)) {\\r\\n        $output = $modx->getPlaceholder($toPlaceholder);\\r\\n    }\\r\\n\\r\\n    \\/\\/ Pagination\\r\\n    $total = (int)$modx->getPlaceholder($totalVar);\\r\\n    $pageCount = !empty($scriptProperties[\'limit\']) && $total > $_offset\\r\\n        ? ceil(($total - $_offset) \\/ $scriptProperties[\'limit\'])\\r\\n        : 0;\\r\\n\\r\\n    \\/\\/ Redirect to start if somebody specified incorrect page\\r\\n    if ($page > 1 && $page > $pageCount && $strictMode) {\\r\\n        return $paginator->redirectToFirst($isAjax);\\r\\n    }\\r\\n    if (!empty($pageCount) && $pageCount > 1) {\\r\\n        $pagination = [\\r\\n            \'first\' => $page > 1 && !empty($tplPageFirst)\\r\\n                ? $paginator->makePageLink($url, 1, $tplPageFirst)\\r\\n                : \'\',\\r\\n            \'prev\' => $page > 1 && !empty($tplPagePrev)\\r\\n                ? $paginator->makePageLink($url, $page - 1, $tplPagePrev)\\r\\n                : \'\',\\r\\n            \'pages\' => $pageLimit >= 7 && empty($disableModernPagination)\\r\\n                ? $paginator->buildModernPagination($page, $pageCount, $url)\\r\\n                : $paginator->buildClassicPagination($page, $pageCount, $url),\\r\\n            \'next\' => $page < $pageCount && !empty($tplPageNext)\\r\\n                ? $paginator->makePageLink($url, $page + 1, $tplPageNext)\\r\\n                : \'\',\\r\\n            \'last\' => $page < $pageCount && !empty($tplPageLast)\\r\\n                ? $paginator->makePageLink($url, $pageCount, $tplPageLast)\\r\\n                : \'\',\\r\\n        ];\\r\\n\\r\\n        if (!empty($pageCount)) {\\r\\n            foreach ([\'first\', \'prev\', \'next\', \'last\'] as $v) {\\r\\n                $_tpl = \'tplPage\' . ucfirst($v) . \'Empty\';\\r\\n                if (!empty(${$_tpl}) && empty($pagination[$v])) {\\r\\n                    $pagination[$v] = $paginator->pdoTools->getChunk(${$_tpl});\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n    } else {\\r\\n        $pagination = [\\r\\n            \'first\' => \'\',\\r\\n            \'prev\' => \'\',\\r\\n            \'pages\' => \'\',\\r\\n            \'next\' => \'\',\\r\\n            \'last\' => \'\',\\r\\n        ];\\r\\n    }\\r\\n\\r\\n    $data = [\\r\\n        \'output\' => $output,\\r\\n        $pageVarKey => $page,\\r\\n        $pageCountVar => $pageCount,\\r\\n        $pageNavVar => !empty($tplPageWrapper)\\r\\n            ? $paginator->pdoTools->getChunk($tplPageWrapper, $pagination)\\r\\n            : $paginator->pdoTools->parseChunk(\'\', $pagination),\\r\\n        $totalVar => $total,\\r\\n    ];\\r\\n    if ($cache) {\\r\\n        $paginator->pdoTools->setCache($data, $scriptProperties);\\r\\n    }\\r\\n}\\r\\n\\/** @var bool $showLog *\\/\\r\\nif ($modx->user->isAuthenticated(\'mgr\') && (bool)$showLog) {\\r\\n    $modx->setPlaceholder(\'pdoPageLog\', print_r($paginator->pdoTools->getTime(), true));\\r\\n}\\r\\n\\r\\nif ($isAjax) {\\r\\n    if ($pageNavVar !== \'pagination\') {\\r\\n        $data[\'pagination\'] = $data[$pageNavVar];\\r\\n        unset($data[$pageNavVar]);\\r\\n    }\\r\\n    if ($pageCountVar !== \'pages\') {\\r\\n        $data[\'pages\'] = (int)$data[$pageCountVar];\\r\\n        unset($data[$pageCountVar]);\\r\\n    }\\r\\n    if ($pageVarKey !== \'page\') {\\r\\n        $data[\'page\'] = (int)$data[$pageVarKey];\\r\\n        unset($data[$pageVarKey]);\\r\\n    }\\r\\n    if ($totalVar !== \'total\') {\\r\\n        $data[\'total\'] = (int)$data[$totalVar];\\r\\n        unset($data[$totalVar]);\\r\\n    }\\r\\n\\r\\n    $maxIterations = (integer)$modx->getOption(\'parser_max_iterations\', null, 10);\\r\\n    $modx->getParser()->processElementTags(\'\', $data[\'output\'], false, false, \'[[\', \']]\', [], $maxIterations);\\r\\n    $modx->getParser()->processElementTags(\'\', $data[\'output\'], true, true, \'[[\', \']]\', [], $maxIterations);\\r\\n\\r\\n    @session_write_close();\\r\\n    exit(json_encode($data));\\r\\n}\\r\\n\\r\\nif (!empty($setMeta)) {\\r\\n    $charset = $modx->getOption(\'modx_charset\', null, \'UTF-8\');\\r\\n    $canurl = $paginator->pdoTools->config(\'scheme\') !== \'full\'\\r\\n        ? $paginator->getCanonicalUrl($url)\\r\\n        : $url;\\r\\n    $modx->regClientStartupHTMLBlock(\'<link rel=\\"canonical\\" href=\\"\' . htmlentities($canurl, ENT_QUOTES, $charset) . \'\\"\\/>\');\\r\\n    if ($data[$pageVarKey] > 1) {\\r\\n        $prevUrl = $paginator->makePageLink($canurl, $data[$pageVarKey] - 1);\\r\\n        $modx->regClientStartupHTMLBlock(\\r\\n            \'<link rel=\\"prev\\" href=\\"\' . htmlentities($prevUrl, ENT_QUOTES, $charset) . \'\\"\\/>\'\\r\\n        );\\r\\n    }\\r\\n    if ($data[$pageVarKey] < $data[$pageCountVar]) {\\r\\n        $nextUrl = $paginator->makePageLink($canurl, $data[$pageVarKey] + 1);\\r\\n        $modx->regClientStartupHTMLBlock(\\r\\n            \'<link rel=\\"next\\" href=\\"\' . htmlentities($nextUrl, ENT_QUOTES, $charset) . \'\\"\\/>\'\\r\\n        );\\r\\n    }\\r\\n}\\r\\n\\r\\n$modx->setPlaceholders($data, $plPrefix);\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $data[\'output\']);\\r\\n} else {\\r\\n    return $data[\'output\'];\\r\\n}"}',
        'guid' => '157fb292da1747f3f203361005b32e6b',
        'native_key' => 0,
        'signature' => '6ca227e6b8a558ab4c3495dd840e9307',
      ),
      '158c67a1aca0971638c5b7741dfb1332' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'MODX\\Revolution\\modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoMenu","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"use ModxPro\\\\PdoTools\\\\Fetch;\\r\\nuse ModxPro\\\\PdoTools\\\\Support\\\\MenuBuilder;\\r\\nuse MODX\\\\Revolution\\\\modResource;\\r\\n\\r\\n\\/** @var \\\\MODX\\\\Revolution\\\\modX $modx *\\/\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\r\\n\\/\\/ Convert parameters from Wayfinder if exists\\r\\nif (isset($startId)) {\\r\\n    $scriptProperties[\'parents\'] = $startId;\\r\\n}\\r\\nif (!empty($includeDocs)) {\\r\\n    $tmp = array_map(\'trim\', explode(\',\', $includeDocs));\\r\\n    foreach ($tmp as $v) {\\r\\n        if (!empty($scriptProperties[\'resources\'])) {\\r\\n            $scriptProperties[\'resources\'] .= \',\' . $v;\\r\\n        } else {\\r\\n            $scriptProperties[\'resources\'] = $v;\\r\\n        }\\r\\n    }\\r\\n}\\r\\nif (!empty($excludeDocs)) {\\r\\n    $tmp = array_map(\'trim\', explode(\',\', $excludeDocs));\\r\\n    foreach ($tmp as $v) {\\r\\n        if (!empty($scriptProperties[\'resources\'])) {\\r\\n            $scriptProperties[\'resources\'] .= \',-\' . $v;\\r\\n        } else {\\r\\n            $scriptProperties[\'resources\'] = \'-\' . $v;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\nif (!empty($previewUnpublished) && $modx->hasPermission(\'view_unpublished\')) {\\r\\n    $scriptProperties[\'showUnpublished\'] = 1;\\r\\n}\\r\\n\\r\\n$scriptProperties[\'depth\'] = empty($level) ? 100 : abs($level) - 1;\\r\\nif (!empty($contexts)) {\\r\\n    $scriptProperties[\'context\'] = $contexts;\\r\\n}\\r\\nif (empty($scriptProperties[\'context\'])) {\\r\\n    $scriptProperties[\'context\'] = $modx->resource->context_key;\\r\\n}\\r\\n\\r\\n\\/\\/ Save original parents specified by user\\r\\n$specified_parents = array_map(\'trim\', explode(\',\', $scriptProperties[\'parents\']));\\r\\n\\r\\nif ($scriptProperties[\'parents\'] === \'\') {\\r\\n    $scriptProperties[\'parents\'] = $modx->resource->id;\\r\\n} elseif ($scriptProperties[\'parents\'] === 0 || $scriptProperties[\'parents\'] === \'0\') {\\r\\n    if ($scriptProperties[\'depth\'] !== \'\' && $scriptProperties[\'depth\'] !== 100) {\\r\\n        $contexts = array_map(\'trim\', explode(\',\', $scriptProperties[\'context\']));\\r\\n        $parents = [];\\r\\n        if (!empty($scriptProperties[\'showDeleted\'])) {\\r\\n            \\/** @var Fetch $pdoFetch *\\/\\r\\n            $pdoFetch = $modx->services->get(\'pdofetch\');\\r\\n            foreach ($contexts as $ctx) {\\r\\n                $parents = array_merge($parents, $pdoFetch->getChildIds(modResource::class, 0, $scriptProperties[\'depth\'], [\'context\' => $ctx]));\\r\\n            }\\r\\n        } else {\\r\\n            foreach ($contexts as $ctx) {\\r\\n                $parents = array_merge($parents, $modx->getChildIds(0, $scriptProperties[\'depth\'], [\'context\' => $ctx]));\\r\\n            }\\r\\n        }\\r\\n        $scriptProperties[\'parents\'] = !empty($parents) ? implode(\',\', $parents) : \'+0\';\\r\\n        $scriptProperties[\'depth\'] = 0;\\r\\n    }\\r\\n    $scriptProperties[\'includeParents\'] = 1;\\r\\n    $scriptProperties[\'displayStart\'] = 0;\\r\\n} else {\\r\\n    $parents = array_map(\'trim\', explode(\',\', $scriptProperties[\'parents\']));\\r\\n    $parents_in = $parents_out = [];\\r\\n    foreach ($parents as $v) {\\r\\n        if (!is_numeric($v)) {\\r\\n            continue;\\r\\n        }\\r\\n        if ($v[0] == \'-\') {\\r\\n            $parents_out[] = abs($v);\\r\\n        } else {\\r\\n            $parents_in[] = abs($v);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    if (empty($parents_in)) {\\r\\n        $scriptProperties[\'includeParents\'] = 1;\\r\\n        $scriptProperties[\'displayStart\'] = 0;\\r\\n    }\\r\\n}\\r\\n\\r\\nif (!empty($displayStart)) {\\r\\n    $scriptProperties[\'includeParents\'] = 1;\\r\\n}\\r\\nif (!empty($ph)) {\\r\\n    $toPlaceholder = $ph;\\r\\n}\\r\\nif (!empty($sortOrder)) {\\r\\n    $scriptProperties[\'sortdir\'] = $sortOrder;\\r\\n}\\r\\nif (!empty($sortBy)) {\\r\\n    $scriptProperties[\'sortby\'] = $sortBy;\\r\\n}\\r\\nif (!empty($permissions)) {\\r\\n    $scriptProperties[\'checkPermissions\'] = $permissions;\\r\\n}\\r\\nif (!empty($cacheResults)) {\\r\\n    $scriptProperties[\'cache\'] = $cacheResults;\\r\\n}\\r\\nif (!empty($ignoreHidden)) {\\r\\n    $scriptProperties[\'showHidden\'] = $ignoreHidden;\\r\\n}\\r\\n\\r\\n$wfTemplates = [\\r\\n    \'outerTpl\' => \'tplOuter\',\\r\\n    \'rowTpl\' => \'tpl\',\\r\\n    \'parentRowTpl\' => \'tplParentRow\',\\r\\n    \'parentRowHereTpl\' => \'tplParentRowHere\',\\r\\n    \'hereTpl\' => \'tplHere\',\\r\\n    \'innerTpl\' => \'tplInner\',\\r\\n    \'innerRowTpl\' => \'tplInnerRow\',\\r\\n    \'innerHereTpl\' => \'tplInnerHere\',\\r\\n    \'activeParentRowTpl\' => \'tplParentRowActive\',\\r\\n    \'categoryFoldersTpl\' => \'tplCategoryFolder\',\\r\\n    \'startItemTpl\' => \'tplStart\',\\r\\n];\\r\\nforeach ($wfTemplates as $k => $v) {\\r\\n    if (isset(${$k})) {\\r\\n        $scriptProperties[$v] = ${$k};\\r\\n    }\\r\\n}\\r\\n\\/\\/---\\r\\n\\r\\n\\/** @var MenuBuilder $menuBuilder *\\/\\r\\n$modx->services[\'pdotools_config\'] = $scriptProperties;\\r\\n$menuBuilder = $modx->services->get(MenuBuilder::class);\\r\\n$menuBuilder->pdoTools->addTime(\'MenuBuilder loaded\');\\r\\n\\r\\n$cache = !empty($cache) || (!$modx->user->id && !empty($cacheAnonymous));\\r\\nif (empty($scriptProperties[\'cache_key\'])) {\\r\\n    $scriptProperties[\'cache_key\'] = \'pdomenu\\/\' . sha1(serialize($scriptProperties));\\r\\n}\\r\\n\\r\\n$output = \'\';\\r\\n$tree = [];\\r\\nif ($cache) {\\r\\n    $tree = $menuBuilder->pdoTools->getCache($scriptProperties);\\r\\n}\\r\\nif (empty($tree)) {\\r\\n    $data = $menuBuilder->pdoTools->run();\\r\\n    $data = $menuBuilder->pdoTools->buildTree($data, \'id\', \'parent\', $specified_parents);\\r\\n    $tree = [];\\r\\n    foreach ($data as $k => $v) {\\r\\n        if (empty($v[\'id\'])) {\\r\\n            if (!in_array($k, $specified_parents) && !$menuBuilder->checkResource($k)) {\\r\\n                continue;\\r\\n            } else {\\r\\n                $tree = array_merge($tree, $v[\'children\']);\\r\\n            }\\r\\n        } else {\\r\\n            $tree[$k] = $v;\\r\\n        }\\r\\n    }\\r\\n    if ($cache) {\\r\\n        $menuBuilder->pdoTools->setCache($tree, $scriptProperties);\\r\\n    }\\r\\n}\\r\\nif (isset($return) && $return === \'data\') {\\r\\n    return $tree;\\r\\n}\\r\\nif (!empty($tree)) {\\r\\n    $output = $menuBuilder->templateTree($tree);\\r\\n}\\r\\n\\r\\nif ($modx->user->isAuthenticated(\'mgr\') && !empty($showLog)) {\\r\\n    $modx->setPlaceholder(\'pdoMenuLog\', print_r($menuBuilder->pdoTools->getTime(), true));\\r\\n}\\r\\n\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $output);\\r\\n} else {\\r\\n    return $output;\\r\\n}","locked":0,"properties":"a:51:{s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"level\\";a:7:{s:4:\\"name\\";s:5:\\"level\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_level\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"displayStart\\";a:7:{s:4:\\"name\\";s:12:\\"displayStart\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_displayStart\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"templates\\";a:7:{s:4:\\"name\\";s:9:\\"templates\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_templates\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"context\\";a:7:{s:4:\\"name\\";s:7:\\"context\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_context\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"cache\\";a:7:{s:4:\\"name\\";s:5:\\"cache\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_cache\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"cacheTime\\";a:7:{s:4:\\"name\\";s:9:\\"cacheTime\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_cacheTime\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:3600;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"cacheAnonymous\\";a:7:{s:4:\\"name\\";s:14:\\"cacheAnonymous\\";s:4:\\"desc\\";s:28:\\"pdotools_prop_cacheAnonymous\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"plPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"plPrefix\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_plPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"wf.\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:18:\\"previewUnpublished\\";a:7:{s:4:\\"name\\";s:18:\\"previewUnpublished\\";s:4:\\"desc\\";s:32:\\"pdotools_prop_previewUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"hideSubMenus\\";a:7:{s:4:\\"name\\";s:12:\\"hideSubMenus\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_hideSubMenus\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"useWeblinkUrl\\";a:7:{s:4:\\"name\\";s:13:\\"useWeblinkUrl\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_useWeblinkUrl\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:3:\\"ASC\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"menuindex\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"rowIdPrefix\\";a:7:{s:4:\\"name\\";s:11:\\"rowIdPrefix\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_rowIdPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"firstClass\\";a:7:{s:4:\\"name\\";s:10:\\"firstClass\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_firstClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:5:\\"first\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"lastClass\\";a:7:{s:4:\\"name\\";s:9:\\"lastClass\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_lastClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:4:\\"last\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"hereClass\\";a:7:{s:4:\\"name\\";s:9:\\"hereClass\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_hereClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:6:\\"active\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"parentClass\\";a:7:{s:4:\\"name\\";s:11:\\"parentClass\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_parentClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"rowClass\\";a:7:{s:4:\\"name\\";s:8:\\"rowClass\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_rowClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"outerClass\\";a:7:{s:4:\\"name\\";s:10:\\"outerClass\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_outerClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"innerClass\\";a:7:{s:4:\\"name\\";s:10:\\"innerClass\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_innerClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"levelClass\\";a:7:{s:4:\\"name\\";s:10:\\"levelClass\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_levelClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"selfClass\\";a:7:{s:4:\\"name\\";s:9:\\"selfClass\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_selfClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"webLinkClass\\";a:7:{s:4:\\"name\\";s:12:\\"webLinkClass\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_webLinkClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplOuter\\";a:7:{s:4:\\"name\\";s:8:\\"tplOuter\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tplOuter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:41:\\"@INLINE <ul[[+classes]]>[[+wrapper]]<\\/ul>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:17:\\"pdotools_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:95:\\"@INLINE <li[[+classes]]><a href=\\"[[+link]]\\" [[+attributes]]>[[+menutitle]]<\\/a>[[+wrapper]]<\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"tplParentRow\\";a:7:{s:4:\\"name\\";s:12:\\"tplParentRow\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_tplParentRow\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"tplParentRowHere\\";a:7:{s:4:\\"name\\";s:16:\\"tplParentRowHere\\";s:4:\\"desc\\";s:30:\\"pdotools_prop_tplParentRowHere\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplHere\\";a:7:{s:4:\\"name\\";s:7:\\"tplHere\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_tplHere\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplInner\\";a:7:{s:4:\\"name\\";s:8:\\"tplInner\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tplInner\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"tplInnerRow\\";a:7:{s:4:\\"name\\";s:11:\\"tplInnerRow\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_tplInnerRow\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"tplInnerHere\\";a:7:{s:4:\\"name\\";s:12:\\"tplInnerHere\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_tplInnerHere\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:18:\\"tplParentRowActive\\";a:7:{s:4:\\"name\\";s:18:\\"tplParentRowActive\\";s:4:\\"desc\\";s:32:\\"pdotools_prop_tplParentRowActive\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:17:\\"tplCategoryFolder\\";a:7:{s:4:\\"name\\";s:17:\\"tplCategoryFolder\\";s:4:\\"desc\\";s:31:\\"pdotools_prop_tplCategoryFolder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplStart\\";a:7:{s:4:\\"name\\";s:8:\\"tplStart\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tplStart\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:55:\\"@INLINE <h2[[+classes]]>[[+menutitle]]<\\/h2>[[+wrapper]]\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"checkPermissions\\";a:7:{s:4:\\"name\\";s:16:\\"checkPermissions\\";s:4:\\"desc\\";s:30:\\"pdotools_prop_checkPermissions\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"hereId\\";a:7:{s:4:\\"name\\";s:6:\\"hereId\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_hereId\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"select\\";a:7:{s:4:\\"name\\";s:6:\\"select\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_select\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"scheme\\";a:7:{s:4:\\"name\\";s:6:\\"scheme\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_scheme\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:6:{i:0;a:2:{s:5:\\"value\\";s:0:\\"\\";s:4:\\"text\\";s:14:\\"System default\\";}i:1;a:2:{s:5:\\"value\\";i:-1;s:4:\\"text\\";s:25:\\"-1 (relative to site_url)\\";}i:2;a:2:{s:5:\\"value\\";s:4:\\"full\\";s:4:\\"text\\";s:40:\\"full (absolute, prepended with site_url)\\";}i:3;a:2:{s:5:\\"value\\";s:3:\\"abs\\";s:4:\\"text\\";s:39:\\"abs (absolute, prepended with base_url)\\";}i:4;a:2:{s:5:\\"value\\";s:4:\\"http\\";s:4:\\"text\\";s:38:\\"http (absolute, forced to http scheme)\\";}i:5;a:2:{s:5:\\"value\\";s:5:\\"https\\";s:4:\\"text\\";s:40:\\"https (absolute, forced to https scheme)\\";}}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"countChildren\\";a:7:{s:4:\\"name\\";s:13:\\"countChildren\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_countChildren\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdomenu.php","content":"use ModxPro\\\\PdoTools\\\\Fetch;\\r\\nuse ModxPro\\\\PdoTools\\\\Support\\\\MenuBuilder;\\r\\nuse MODX\\\\Revolution\\\\modResource;\\r\\n\\r\\n\\/** @var \\\\MODX\\\\Revolution\\\\modX $modx *\\/\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\r\\n\\/\\/ Convert parameters from Wayfinder if exists\\r\\nif (isset($startId)) {\\r\\n    $scriptProperties[\'parents\'] = $startId;\\r\\n}\\r\\nif (!empty($includeDocs)) {\\r\\n    $tmp = array_map(\'trim\', explode(\',\', $includeDocs));\\r\\n    foreach ($tmp as $v) {\\r\\n        if (!empty($scriptProperties[\'resources\'])) {\\r\\n            $scriptProperties[\'resources\'] .= \',\' . $v;\\r\\n        } else {\\r\\n            $scriptProperties[\'resources\'] = $v;\\r\\n        }\\r\\n    }\\r\\n}\\r\\nif (!empty($excludeDocs)) {\\r\\n    $tmp = array_map(\'trim\', explode(\',\', $excludeDocs));\\r\\n    foreach ($tmp as $v) {\\r\\n        if (!empty($scriptProperties[\'resources\'])) {\\r\\n            $scriptProperties[\'resources\'] .= \',-\' . $v;\\r\\n        } else {\\r\\n            $scriptProperties[\'resources\'] = \'-\' . $v;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\nif (!empty($previewUnpublished) && $modx->hasPermission(\'view_unpublished\')) {\\r\\n    $scriptProperties[\'showUnpublished\'] = 1;\\r\\n}\\r\\n\\r\\n$scriptProperties[\'depth\'] = empty($level) ? 100 : abs($level) - 1;\\r\\nif (!empty($contexts)) {\\r\\n    $scriptProperties[\'context\'] = $contexts;\\r\\n}\\r\\nif (empty($scriptProperties[\'context\'])) {\\r\\n    $scriptProperties[\'context\'] = $modx->resource->context_key;\\r\\n}\\r\\n\\r\\n\\/\\/ Save original parents specified by user\\r\\n$specified_parents = array_map(\'trim\', explode(\',\', $scriptProperties[\'parents\']));\\r\\n\\r\\nif ($scriptProperties[\'parents\'] === \'\') {\\r\\n    $scriptProperties[\'parents\'] = $modx->resource->id;\\r\\n} elseif ($scriptProperties[\'parents\'] === 0 || $scriptProperties[\'parents\'] === \'0\') {\\r\\n    if ($scriptProperties[\'depth\'] !== \'\' && $scriptProperties[\'depth\'] !== 100) {\\r\\n        $contexts = array_map(\'trim\', explode(\',\', $scriptProperties[\'context\']));\\r\\n        $parents = [];\\r\\n        if (!empty($scriptProperties[\'showDeleted\'])) {\\r\\n            \\/** @var Fetch $pdoFetch *\\/\\r\\n            $pdoFetch = $modx->services->get(\'pdofetch\');\\r\\n            foreach ($contexts as $ctx) {\\r\\n                $parents = array_merge($parents, $pdoFetch->getChildIds(modResource::class, 0, $scriptProperties[\'depth\'], [\'context\' => $ctx]));\\r\\n            }\\r\\n        } else {\\r\\n            foreach ($contexts as $ctx) {\\r\\n                $parents = array_merge($parents, $modx->getChildIds(0, $scriptProperties[\'depth\'], [\'context\' => $ctx]));\\r\\n            }\\r\\n        }\\r\\n        $scriptProperties[\'parents\'] = !empty($parents) ? implode(\',\', $parents) : \'+0\';\\r\\n        $scriptProperties[\'depth\'] = 0;\\r\\n    }\\r\\n    $scriptProperties[\'includeParents\'] = 1;\\r\\n    $scriptProperties[\'displayStart\'] = 0;\\r\\n} else {\\r\\n    $parents = array_map(\'trim\', explode(\',\', $scriptProperties[\'parents\']));\\r\\n    $parents_in = $parents_out = [];\\r\\n    foreach ($parents as $v) {\\r\\n        if (!is_numeric($v)) {\\r\\n            continue;\\r\\n        }\\r\\n        if ($v[0] == \'-\') {\\r\\n            $parents_out[] = abs($v);\\r\\n        } else {\\r\\n            $parents_in[] = abs($v);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    if (empty($parents_in)) {\\r\\n        $scriptProperties[\'includeParents\'] = 1;\\r\\n        $scriptProperties[\'displayStart\'] = 0;\\r\\n    }\\r\\n}\\r\\n\\r\\nif (!empty($displayStart)) {\\r\\n    $scriptProperties[\'includeParents\'] = 1;\\r\\n}\\r\\nif (!empty($ph)) {\\r\\n    $toPlaceholder = $ph;\\r\\n}\\r\\nif (!empty($sortOrder)) {\\r\\n    $scriptProperties[\'sortdir\'] = $sortOrder;\\r\\n}\\r\\nif (!empty($sortBy)) {\\r\\n    $scriptProperties[\'sortby\'] = $sortBy;\\r\\n}\\r\\nif (!empty($permissions)) {\\r\\n    $scriptProperties[\'checkPermissions\'] = $permissions;\\r\\n}\\r\\nif (!empty($cacheResults)) {\\r\\n    $scriptProperties[\'cache\'] = $cacheResults;\\r\\n}\\r\\nif (!empty($ignoreHidden)) {\\r\\n    $scriptProperties[\'showHidden\'] = $ignoreHidden;\\r\\n}\\r\\n\\r\\n$wfTemplates = [\\r\\n    \'outerTpl\' => \'tplOuter\',\\r\\n    \'rowTpl\' => \'tpl\',\\r\\n    \'parentRowTpl\' => \'tplParentRow\',\\r\\n    \'parentRowHereTpl\' => \'tplParentRowHere\',\\r\\n    \'hereTpl\' => \'tplHere\',\\r\\n    \'innerTpl\' => \'tplInner\',\\r\\n    \'innerRowTpl\' => \'tplInnerRow\',\\r\\n    \'innerHereTpl\' => \'tplInnerHere\',\\r\\n    \'activeParentRowTpl\' => \'tplParentRowActive\',\\r\\n    \'categoryFoldersTpl\' => \'tplCategoryFolder\',\\r\\n    \'startItemTpl\' => \'tplStart\',\\r\\n];\\r\\nforeach ($wfTemplates as $k => $v) {\\r\\n    if (isset(${$k})) {\\r\\n        $scriptProperties[$v] = ${$k};\\r\\n    }\\r\\n}\\r\\n\\/\\/---\\r\\n\\r\\n\\/** @var MenuBuilder $menuBuilder *\\/\\r\\n$modx->services[\'pdotools_config\'] = $scriptProperties;\\r\\n$menuBuilder = $modx->services->get(MenuBuilder::class);\\r\\n$menuBuilder->pdoTools->addTime(\'MenuBuilder loaded\');\\r\\n\\r\\n$cache = !empty($cache) || (!$modx->user->id && !empty($cacheAnonymous));\\r\\nif (empty($scriptProperties[\'cache_key\'])) {\\r\\n    $scriptProperties[\'cache_key\'] = \'pdomenu\\/\' . sha1(serialize($scriptProperties));\\r\\n}\\r\\n\\r\\n$output = \'\';\\r\\n$tree = [];\\r\\nif ($cache) {\\r\\n    $tree = $menuBuilder->pdoTools->getCache($scriptProperties);\\r\\n}\\r\\nif (empty($tree)) {\\r\\n    $data = $menuBuilder->pdoTools->run();\\r\\n    $data = $menuBuilder->pdoTools->buildTree($data, \'id\', \'parent\', $specified_parents);\\r\\n    $tree = [];\\r\\n    foreach ($data as $k => $v) {\\r\\n        if (empty($v[\'id\'])) {\\r\\n            if (!in_array($k, $specified_parents) && !$menuBuilder->checkResource($k)) {\\r\\n                continue;\\r\\n            } else {\\r\\n                $tree = array_merge($tree, $v[\'children\']);\\r\\n            }\\r\\n        } else {\\r\\n            $tree[$k] = $v;\\r\\n        }\\r\\n    }\\r\\n    if ($cache) {\\r\\n        $menuBuilder->pdoTools->setCache($tree, $scriptProperties);\\r\\n    }\\r\\n}\\r\\nif (isset($return) && $return === \'data\') {\\r\\n    return $tree;\\r\\n}\\r\\nif (!empty($tree)) {\\r\\n    $output = $menuBuilder->templateTree($tree);\\r\\n}\\r\\n\\r\\nif ($modx->user->isAuthenticated(\'mgr\') && !empty($showLog)) {\\r\\n    $modx->setPlaceholder(\'pdoMenuLog\', print_r($menuBuilder->pdoTools->getTime(), true));\\r\\n}\\r\\n\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $output);\\r\\n} else {\\r\\n    return $output;\\r\\n}"}',
        'guid' => 'fc7e127d29d6bb1493904695948de3f3',
        'native_key' => 0,
        'signature' => '6d188155a11c1641ab35af28ada4ca5a',
      ),
      '02329bdae6c09f5cd1f0940d49ebad11' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'MODX\\Revolution\\modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoTitle","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"use ModxPro\\\\PdoTools\\\\CoreTools;\\r\\nuse MODX\\\\Revolution\\\\modResource;\\r\\n\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var \\\\MODX\\\\Revolution\\\\modX $modx *\\/\\r\\n\\r\\nif (empty($outputSeparator)) {\\r\\n    $outputSeparator = \' \\/ \';\\r\\n}\\r\\nif (empty($titleField)) {\\r\\n    $titleField = \'longtitle\';\\r\\n}\\r\\nif (!isset($pageVarKey)) {\\r\\n    $pageVarKey = \'page\';\\r\\n}\\r\\nif (!isset($queryVarKey)) {\\r\\n    $queryVarKey = \'query\';\\r\\n}\\r\\nif (empty($tplPages)) {\\r\\n    $tplPages = \'@INLINE [[%pdopage_page]] [[+page]] [[%pdopage_from]] [[+pageCount]]\';\\r\\n}\\r\\nif (empty($tplSearch)) {\\r\\n    $tplSearch = \'@INLINE \\u00ab[[+mse2_query]]\\u00bb\';\\r\\n}\\r\\nif (empty($minQuery)) {\\r\\n    $minQuery = 3;\\r\\n}\\r\\nif (empty($id)) {\\r\\n    $id = $modx->resource->id;\\r\\n}\\r\\nif (empty($cacheKey)) {\\r\\n    $cacheKey = \'title_crumbs\';\\r\\n}\\r\\nif (!isset($cacheTime)) {\\r\\n    $cacheTime = 0;\\r\\n}\\r\\n\\/** @var CoreTools $pdoTools *\\/\\r\\n$modx->services[\'pdotools_config\'] = $scriptProperties;\\r\\n$pdoTools = $modx->services->get(CoreTools::class);\\r\\n$modx->lexicon->load(\'pdotools:pdopage\');\\r\\n\\r\\n\\/** @var modResource $resource *\\/\\r\\n$resource = ($id == $modx->resource->id)\\r\\n    ? $modx->resource\\r\\n    : $modx->getObject(\'modResource\', $id);\\r\\nif (!$resource) {\\r\\n    return \'\';\\r\\n}\\r\\n\\r\\n$title = [];\\r\\n$pagetitle = trim($resource->get($titleField));\\r\\nif (empty($pagetitle)) {\\r\\n    $pagetitle = $resource->get(\'pagetitle\');\\r\\n}\\r\\n\\r\\n\\/\\/ Add search request if exists\\r\\nif (!empty($_GET[$queryVarKey]) && strlen($_GET[$queryVarKey]) >= $minQuery && !empty($tplSearch)) {\\r\\n    $pagetitle .= \' \' . $pdoTools->getChunk($tplSearch, [\\r\\n            $queryVarKey => $modx->stripTags($_GET[$queryVarKey]),\\r\\n        ]);\\r\\n}\\r\\n$title[] = $pagetitle;\\r\\n\\r\\n\\/\\/ Add pagination if exists\\r\\nif (!empty($_GET[$pageVarKey]) && !empty($tplPages)) {\\r\\n    $title[] = $pdoTools->getChunk($tplPages, [\\r\\n        \'page\' => (int)$_GET[$pageVarKey],\\r\\n    ]);\\r\\n}\\r\\n\\r\\n\\/\\/ Add parents\\r\\n$cacheKey = $resource->getCacheKey() . \'\\/\' . $cacheKey;\\r\\n$cacheOptions = [\'cache_key\' => $modx->getOption(\'cache_resource_key\', null, \'resource\')];\\r\\n$crumbs = \'\';\\r\\nif (empty($cache) || !$crumbs = $modx->cacheManager->get($cacheKey, $cacheOptions)) {\\r\\n    $crumbs = $pdoTools->runSnippet(\'!pdoCrumbs\', array_merge(\\r\\n        [\\r\\n            \'to\' => $resource->id,\\r\\n            \'outputSeparator\' => $outputSeparator,\\r\\n            \'showHome\' => 0,\\r\\n            \'showAtHome\' => 0,\\r\\n            \'showCurrent\' => 0,\\r\\n            \'direction\' => \'rtl\',\\r\\n            \'tpl\' => \'@INLINE [[+menutitle]]\',\\r\\n            \'tplCurrent\' => \'@INLINE [[+menutitle]]\',\\r\\n            \'tplWrapper\' => \'@INLINE [[+output]]\',\\r\\n            \'tplMax\' => \'\',\\r\\n            \'tplHome\' => \'\',\\r\\n        ], $scriptProperties\\r\\n    ));\\r\\n}\\r\\nif (!empty($crumbs)) {\\r\\n    if (!empty($cache)) {\\r\\n        $modx->cacheManager->set($cacheKey, $crumbs, $cacheTime, $cacheOptions);\\r\\n    }\\r\\n    $title[] = $crumbs;\\r\\n}\\r\\n\\r\\nif (!empty($registerJs)) {\\r\\n    $config = [\\r\\n        \'separator\' => $outputSeparator,\\r\\n        \'tpl\' => str_replace([\'[[+\', \']]\'], [\'{\', \'}\'], $pdoTools->getChunk($tplPages)),\\r\\n    ];\\r\\n    \\/** @noinspection Annotator *\\/\\r\\n    $modx->regClientStartupScript(\'<script>pdoTitle = \' . json_encode($config) . \';<\\/script>\',\\r\\n        true);\\r\\n}\\r\\n\\r\\nreturn implode($outputSeparator, $title);","locked":0,"properties":"a:13:{s:2:\\"id\\";a:7:{s:4:\\"name\\";s:2:\\"id\\";s:4:\\"desc\\";s:16:\\"pdotools_prop_id\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"exclude\\";a:7:{s:4:\\"name\\";s:7:\\"exclude\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_exclude\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_title_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:3;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"titleField\\";a:7:{s:4:\\"name\\";s:10:\\"titleField\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_titleField\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"longtitle\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"cache\\";a:7:{s:4:\\"name\\";s:5:\\"cache\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_title_cache\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"cacheTime\\";a:7:{s:4:\\"name\\";s:9:\\"cacheTime\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_cacheTime\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplPages\\";a:7:{s:4:\\"name\\";s:8:\\"tplPages\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tplPages\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:68:\\"@INLINE [[%pdopage_page]] [[+page]] [[%pdopage_from]] [[+pageCount]]\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"pageVarKey\\";a:7:{s:4:\\"name\\";s:10:\\"pageVarKey\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_pageVarKey\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:4:\\"page\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"tplSearch\\";a:7:{s:4:\\"name\\";s:9:\\"tplSearch\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_tplSearch\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:27:\\"@INLINE \\u00ab[[+mse2_query]]\\u00bb\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"queryVarKey\\";a:7:{s:4:\\"name\\";s:11:\\"queryVarKey\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_queryVarKey\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:5:\\"query\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"minQuery\\";a:7:{s:4:\\"name\\";s:8:\\"minQuery\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_minQuery\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:3;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:35:\\"pdotools_prop_title_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\" \\/ \\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"registerJs\\";a:7:{s:4:\\"name\\";s:10:\\"registerJs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_registerJs\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdotitle.php","content":"use ModxPro\\\\PdoTools\\\\CoreTools;\\r\\nuse MODX\\\\Revolution\\\\modResource;\\r\\n\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var \\\\MODX\\\\Revolution\\\\modX $modx *\\/\\r\\n\\r\\nif (empty($outputSeparator)) {\\r\\n    $outputSeparator = \' \\/ \';\\r\\n}\\r\\nif (empty($titleField)) {\\r\\n    $titleField = \'longtitle\';\\r\\n}\\r\\nif (!isset($pageVarKey)) {\\r\\n    $pageVarKey = \'page\';\\r\\n}\\r\\nif (!isset($queryVarKey)) {\\r\\n    $queryVarKey = \'query\';\\r\\n}\\r\\nif (empty($tplPages)) {\\r\\n    $tplPages = \'@INLINE [[%pdopage_page]] [[+page]] [[%pdopage_from]] [[+pageCount]]\';\\r\\n}\\r\\nif (empty($tplSearch)) {\\r\\n    $tplSearch = \'@INLINE \\u00ab[[+mse2_query]]\\u00bb\';\\r\\n}\\r\\nif (empty($minQuery)) {\\r\\n    $minQuery = 3;\\r\\n}\\r\\nif (empty($id)) {\\r\\n    $id = $modx->resource->id;\\r\\n}\\r\\nif (empty($cacheKey)) {\\r\\n    $cacheKey = \'title_crumbs\';\\r\\n}\\r\\nif (!isset($cacheTime)) {\\r\\n    $cacheTime = 0;\\r\\n}\\r\\n\\/** @var CoreTools $pdoTools *\\/\\r\\n$modx->services[\'pdotools_config\'] = $scriptProperties;\\r\\n$pdoTools = $modx->services->get(CoreTools::class);\\r\\n$modx->lexicon->load(\'pdotools:pdopage\');\\r\\n\\r\\n\\/** @var modResource $resource *\\/\\r\\n$resource = ($id == $modx->resource->id)\\r\\n    ? $modx->resource\\r\\n    : $modx->getObject(\'modResource\', $id);\\r\\nif (!$resource) {\\r\\n    return \'\';\\r\\n}\\r\\n\\r\\n$title = [];\\r\\n$pagetitle = trim($resource->get($titleField));\\r\\nif (empty($pagetitle)) {\\r\\n    $pagetitle = $resource->get(\'pagetitle\');\\r\\n}\\r\\n\\r\\n\\/\\/ Add search request if exists\\r\\nif (!empty($_GET[$queryVarKey]) && strlen($_GET[$queryVarKey]) >= $minQuery && !empty($tplSearch)) {\\r\\n    $pagetitle .= \' \' . $pdoTools->getChunk($tplSearch, [\\r\\n            $queryVarKey => $modx->stripTags($_GET[$queryVarKey]),\\r\\n        ]);\\r\\n}\\r\\n$title[] = $pagetitle;\\r\\n\\r\\n\\/\\/ Add pagination if exists\\r\\nif (!empty($_GET[$pageVarKey]) && !empty($tplPages)) {\\r\\n    $title[] = $pdoTools->getChunk($tplPages, [\\r\\n        \'page\' => (int)$_GET[$pageVarKey],\\r\\n    ]);\\r\\n}\\r\\n\\r\\n\\/\\/ Add parents\\r\\n$cacheKey = $resource->getCacheKey() . \'\\/\' . $cacheKey;\\r\\n$cacheOptions = [\'cache_key\' => $modx->getOption(\'cache_resource_key\', null, \'resource\')];\\r\\n$crumbs = \'\';\\r\\nif (empty($cache) || !$crumbs = $modx->cacheManager->get($cacheKey, $cacheOptions)) {\\r\\n    $crumbs = $pdoTools->runSnippet(\'!pdoCrumbs\', array_merge(\\r\\n        [\\r\\n            \'to\' => $resource->id,\\r\\n            \'outputSeparator\' => $outputSeparator,\\r\\n            \'showHome\' => 0,\\r\\n            \'showAtHome\' => 0,\\r\\n            \'showCurrent\' => 0,\\r\\n            \'direction\' => \'rtl\',\\r\\n            \'tpl\' => \'@INLINE [[+menutitle]]\',\\r\\n            \'tplCurrent\' => \'@INLINE [[+menutitle]]\',\\r\\n            \'tplWrapper\' => \'@INLINE [[+output]]\',\\r\\n            \'tplMax\' => \'\',\\r\\n            \'tplHome\' => \'\',\\r\\n        ], $scriptProperties\\r\\n    ));\\r\\n}\\r\\nif (!empty($crumbs)) {\\r\\n    if (!empty($cache)) {\\r\\n        $modx->cacheManager->set($cacheKey, $crumbs, $cacheTime, $cacheOptions);\\r\\n    }\\r\\n    $title[] = $crumbs;\\r\\n}\\r\\n\\r\\nif (!empty($registerJs)) {\\r\\n    $config = [\\r\\n        \'separator\' => $outputSeparator,\\r\\n        \'tpl\' => str_replace([\'[[+\', \']]\'], [\'{\', \'}\'], $pdoTools->getChunk($tplPages)),\\r\\n    ];\\r\\n    \\/** @noinspection Annotator *\\/\\r\\n    $modx->regClientStartupScript(\'<script>pdoTitle = \' . json_encode($config) . \';<\\/script>\',\\r\\n        true);\\r\\n}\\r\\n\\r\\nreturn implode($outputSeparator, $title);"}',
        'guid' => '530e605075f36fdce8f5c1d5612d41e8',
        'native_key' => 0,
        'signature' => 'a702df7c5cd5d713a6e6a331c21f41ef',
      ),
      '9db64debe7d1862ba5cb36c645eced60' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'MODX\\Revolution\\modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoArchive","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"use ModxPro\\\\PdoTools\\\\Fetch;\\r\\nuse MODX\\\\Revolution\\\\modSnippet;\\r\\nuse MODX\\\\Revolution\\\\modWebLink;\\r\\n\\r\\n\\/** @var MODX\\\\Revolution\\\\modX $modx *\\/\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\r\\n$modx->lexicon->load(\'pdotools:pdoarchive\');\\r\\n\\r\\n$tplWrapper = $modx->getOption(\'tplWrapper\', $scriptProperties);\\r\\n$tplYear = $modx->getOption(\'tplYear\', $scriptProperties);\\r\\n$tplMonth = $modx->getOption(\'tplMonth\', $scriptProperties);\\r\\n$tplDay = $modx->getOption(\'tplDay\', $scriptProperties);\\r\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties);\\r\\n$dateField = $modx->getOption(\'dateField\', $scriptProperties, \'createdon\', true);\\r\\n$dateFormat = $modx->getOption(\'dateFormat\', $scriptProperties, \'H:i\', true);\\r\\n$outputSeparator = $modx->getOption(\'outputSeparator\', $scriptProperties, \\"\\\\n\\");\\r\\n\\r\\n\\/\\/ Adding extra parameters into special place so we can put them in a results\\r\\n\\/** @var modSnippet $snippet *\\/\\r\\n$additionalPlaceholders = $properties = [];\\r\\nif (isset($this) && $this instanceof modSnippet) {\\r\\n    $properties = $this->get(\'properties\');\\r\\n} elseif ($snippet = $modx->getObject(modSnippet::class, [\'name\' => \'pdoResources\'])) {\\r\\n    $properties = $snippet->get(\'properties\');\\r\\n}\\r\\nif (!empty($properties)) {\\r\\n    foreach ($scriptProperties as $k => $v) {\\r\\n        if (!isset($properties[$k])) {\\r\\n            $additionalPlaceholders[$k] = $v;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n$scriptProperties[\'additionalPlaceholders\'] = $additionalPlaceholders;\\r\\nif (isset($parents) && $parents === \'\') {\\r\\n    $scriptProperties[\'parents\'] = $modx->resource->id;\\r\\n}\\r\\n$scriptProperties[\'return\'] = \'data\';\\r\\n$modx->services[\'pdotools_config\'] = $scriptProperties;\\r\\n$pdoFetch = $modx->services->get(Fetch::class);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n\\/\\/ Process rows\\r\\n$tree = [];\\r\\nforeach ($rows as $row) {\\r\\n    $tmp = $row[$dateField];\\r\\n    if (!is_numeric($tmp)) {\\r\\n        $tmp = strtotime($tmp);\\r\\n    }\\r\\n    $year = date(\'Y\', $tmp);\\r\\n    $month = date(\'m\', $tmp);\\r\\n    $day = date(\'d\', $tmp);\\r\\n    $tree[$year][$month][$day][] = $row;\\r\\n}\\r\\n\\r\\n$output = \'\';\\r\\nforeach ($tree as $year => $months) {\\r\\n    $rows_year = \'\';\\r\\n    $count_year = 0;\\r\\n\\r\\n    foreach ($months as $month => $days) {\\r\\n        $rows_month = \'\';\\r\\n        $count_month = 0;\\r\\n\\r\\n        foreach ($days as $day => $resources) {\\r\\n            $rows_day = [];\\r\\n            $count_day = 0;\\r\\n            $idx = 1;\\r\\n\\r\\n            foreach ($resources as $resource) {\\r\\n                $resource[\'day\'] = $day;\\r\\n                $resource[\'month\'] = $month;\\r\\n                $resource[\'year\'] = $year;\\r\\n                $resource[\'date\'] = strftime($dateFormat, $resource[$dateField]);\\r\\n                $resource[\'idx\'] = $idx++;\\r\\n                $resource[\'menutitle\'] = !empty($resource[\'menutitle\'])\\r\\n                    ? $resource[\'menutitle\']\\r\\n                    : $resource[\'pagetitle\'];\\r\\n                \\/\\/ Add placeholder [[+link]] if specified\\r\\n                if (!empty($scriptProperties[\'useWeblinkUrl\'])) {\\r\\n                    if (!isset($resource[\'context_key\'])) {\\r\\n                        $resource[\'context_key\'] = \'\';\\r\\n                    }\\r\\n                    if (isset($resource[\'class_key\']) && ($resource[\'class_key\'] == modWebLink::class)) {\\r\\n                        $resource[\'link\'] = isset($resource[\'content\']) && is_numeric(trim($resource[\'content\'], \'[]~ \'))\\r\\n                            ? $pdoFetch->makeUrl(intval(trim($resource[\'content\'], \'[]~ \')), $resource)\\r\\n                            : (isset($resource[\'content\']) ? $resource[\'content\'] : \'\');\\r\\n                    } else {\\r\\n                        $resource[\'link\'] = $pdoFetch->makeUrl($resource[\'id\'], $resource);\\r\\n                    }\\r\\n                } else {\\r\\n                    $resource[\'link\'] = \'\';\\r\\n                }\\r\\n                $tpl = $pdoFetch->defineChunk($resource);\\r\\n                $rows_day[] = $pdoFetch->getChunk($tpl, $resource);\\r\\n                $count_year++;\\r\\n                $count_month++;\\r\\n                $count_day++;\\r\\n            }\\r\\n\\r\\n            $rows_month .= !empty($tplDay)\\r\\n                ? $pdoFetch->getChunk($tplDay, [\\r\\n                    \'day\' => $day,\\r\\n                    \'month\' => $month,\\r\\n                    \'year\' => $year,\\r\\n                    \'count\' => $count_day,\\r\\n                    \'wrapper\' => implode($outputSeparator, $rows_day),\\r\\n                ], $pdoFetch->config(\'fastMode\'))\\r\\n                : implode($outputSeparator, $rows_day);\\r\\n        }\\r\\n\\r\\n        $rows_year .= !empty($tplMonth)\\r\\n            ? $pdoFetch->getChunk($tplMonth, [\\r\\n                \'month\' => $month,\\r\\n                \'month_name\' => $modx->lexicon(\'pdoarchive_month_\' . $month),\\r\\n                \'year\' => $year,\\r\\n                \'count\' => $count_month,\\r\\n                \'wrapper\' => $rows_month,\\r\\n            ], $pdoFetch->config(\'fastMode\'))\\r\\n            : $rows_month;\\r\\n    }\\r\\n\\r\\n    $output .= !empty($tplYear)\\r\\n        ? $pdoFetch->getChunk($tplYear, [\\r\\n            \'year\' => $year,\\r\\n            \'count\' => $count_year,\\r\\n            \'wrapper\' => $rows_year,\\r\\n        ], $pdoFetch->config(\'fastMode\'))\\r\\n        : $rows_year;\\r\\n}\\r\\n$pdoFetch->addTime(\'Rows processed\');\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\r\\n    $output = $pdoFetch->getChunk(\\r\\n        $tplWrapper,\\r\\n        array_merge($additionalPlaceholders, [\'output\' => $output]),\\r\\n        $pdoFetch->config(\'fastMode\')\\r\\n    );\\r\\n    $pdoFetch->addTime(\'Rows wrapped\');\\r\\n}\\r\\n\\r\\nif ($modx->user->isAuthenticated(\'mgr\') && (bool)$showLog) {\\r\\n    $modx->setPlaceholder(\'pdoArchiveLog\', print_r($pdoFetch->getTime(), true));\\r\\n}\\r\\n\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $output);\\r\\n} else {\\r\\n    return $output;\\r\\n}","locked":0,"properties":"a:36:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:17:\\"pdotools_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:65:\\"@INLINE <li>[[+date]] <a href=\\"[[+link]]\\">[[+menutitle]]<\\/a><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplYear\\";a:7:{s:4:\\"name\\";s:7:\\"tplYear\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_tplYear\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:71:\\"@INLINE <h3>[[+year]] <sup>([[+count]])<\\/sup><\\/h3><ul>[[+wrapper]]<\\/ul>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplMonth\\";a:7:{s:4:\\"name\\";s:8:\\"tplMonth\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tplMonth\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:86:\\"@INLINE <li><h4>[[+month_name]] <sup>([[+count]])<\\/sup><\\/h4><ul>[[+wrapper]]<\\/ul><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"tplDay\\";a:7:{s:4:\\"name\\";s:6:\\"tplDay\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_tplDay\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:79:\\"@INLINE <li><h5>[[+day]] <sup>([[+count]])<\\/sup><\\/h5><ul>[[+wrapper]]<\\/ul><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplWrapper\\";a:7:{s:4:\\"name\\";s:10:\\"tplWrapper\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_tplWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"wrapIfEmpty\\";a:7:{s:4:\\"name\\";s:11:\\"wrapIfEmpty\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_wrapIfEmpty\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"dateField\\";a:7:{s:4:\\"name\\";s:9:\\"dateField\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_dateField\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"createdon\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"dateFormat\\";a:7:{s:4:\\"name\\";s:10:\\"dateFormat\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_dateFormat\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:5:\\"%H:%M\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"createdon\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"sortbyTV\\";a:7:{s:4:\\"name\\";s:8:\\"sortbyTV\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_sortbyTV\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"sortbyTVType\\";a:7:{s:4:\\"name\\";s:12:\\"sortbyTVType\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_sortbyTVType\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:4:\\"DESC\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"sortdirTV\\";a:7:{s:4:\\"name\\";s:9:\\"sortdirTV\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_sortdirTV\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:3:\\"ASC\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"includeContent\\";a:7:{s:4:\\"name\\";s:14:\\"includeContent\\";s:4:\\"desc\\";s:28:\\"pdotools_prop_includeContent\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"prepareTVs\\";a:7:{s:4:\\"name\\";s:10:\\"prepareTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_prepareTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"1\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"processTVs\\";a:7:{s:4:\\"name\\";s:10:\\"processTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_processTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"tv.\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"hideContainers\\";a:7:{s:4:\\"name\\";s:14:\\"hideContainers\\";s:4:\\"desc\\";s:28:\\"pdotools_prop_hideContainers\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"context\\";a:7:{s:4:\\"name\\";s:7:\\"context\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_context\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"totalVar\\";a:7:{s:4:\\"name\\";s:8:\\"totalVar\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_totalVar\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:5:\\"total\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"select\\";a:7:{s:4:\\"name\\";s:6:\\"select\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_select\\";s:4:\\"type\\";s:8:\\"textarea\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"scheme\\";a:7:{s:4:\\"name\\";s:6:\\"scheme\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_scheme\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:6:{i:0;a:2:{s:5:\\"value\\";s:0:\\"\\";s:4:\\"text\\";s:14:\\"System default\\";}i:1;a:2:{s:5:\\"value\\";i:-1;s:4:\\"text\\";s:25:\\"-1 (relative to site_url)\\";}i:2;a:2:{s:5:\\"value\\";s:4:\\"full\\";s:4:\\"text\\";s:40:\\"full (absolute, prepended with site_url)\\";}i:3;a:2:{s:5:\\"value\\";s:3:\\"abs\\";s:4:\\"text\\";s:39:\\"abs (absolute, prepended with base_url)\\";}i:4;a:2:{s:5:\\"value\\";s:4:\\"http\\";s:4:\\"text\\";s:38:\\"http (absolute, forced to http scheme)\\";}i:5;a:2:{s:5:\\"value\\";s:5:\\"https\\";s:4:\\"text\\";s:40:\\"https (absolute, forced to https scheme)\\";}}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"useWeblinkUrl\\";a:7:{s:4:\\"name\\";s:13:\\"useWeblinkUrl\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_useWeblinkUrl\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdoarchive.php","content":"use ModxPro\\\\PdoTools\\\\Fetch;\\r\\nuse MODX\\\\Revolution\\\\modSnippet;\\r\\nuse MODX\\\\Revolution\\\\modWebLink;\\r\\n\\r\\n\\/** @var MODX\\\\Revolution\\\\modX $modx *\\/\\r\\n\\/** @var array $scriptProperties *\\/\\r\\n\\r\\n$modx->lexicon->load(\'pdotools:pdoarchive\');\\r\\n\\r\\n$tplWrapper = $modx->getOption(\'tplWrapper\', $scriptProperties);\\r\\n$tplYear = $modx->getOption(\'tplYear\', $scriptProperties);\\r\\n$tplMonth = $modx->getOption(\'tplMonth\', $scriptProperties);\\r\\n$tplDay = $modx->getOption(\'tplDay\', $scriptProperties);\\r\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties);\\r\\n$dateField = $modx->getOption(\'dateField\', $scriptProperties, \'createdon\', true);\\r\\n$dateFormat = $modx->getOption(\'dateFormat\', $scriptProperties, \'H:i\', true);\\r\\n$outputSeparator = $modx->getOption(\'outputSeparator\', $scriptProperties, \\"\\\\n\\");\\r\\n\\r\\n\\/\\/ Adding extra parameters into special place so we can put them in a results\\r\\n\\/** @var modSnippet $snippet *\\/\\r\\n$additionalPlaceholders = $properties = [];\\r\\nif (isset($this) && $this instanceof modSnippet) {\\r\\n    $properties = $this->get(\'properties\');\\r\\n} elseif ($snippet = $modx->getObject(modSnippet::class, [\'name\' => \'pdoResources\'])) {\\r\\n    $properties = $snippet->get(\'properties\');\\r\\n}\\r\\nif (!empty($properties)) {\\r\\n    foreach ($scriptProperties as $k => $v) {\\r\\n        if (!isset($properties[$k])) {\\r\\n            $additionalPlaceholders[$k] = $v;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n$scriptProperties[\'additionalPlaceholders\'] = $additionalPlaceholders;\\r\\nif (isset($parents) && $parents === \'\') {\\r\\n    $scriptProperties[\'parents\'] = $modx->resource->id;\\r\\n}\\r\\n$scriptProperties[\'return\'] = \'data\';\\r\\n$modx->services[\'pdotools_config\'] = $scriptProperties;\\r\\n$pdoFetch = $modx->services->get(Fetch::class);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n\\/\\/ Process rows\\r\\n$tree = [];\\r\\nforeach ($rows as $row) {\\r\\n    $tmp = $row[$dateField];\\r\\n    if (!is_numeric($tmp)) {\\r\\n        $tmp = strtotime($tmp);\\r\\n    }\\r\\n    $year = date(\'Y\', $tmp);\\r\\n    $month = date(\'m\', $tmp);\\r\\n    $day = date(\'d\', $tmp);\\r\\n    $tree[$year][$month][$day][] = $row;\\r\\n}\\r\\n\\r\\n$output = \'\';\\r\\nforeach ($tree as $year => $months) {\\r\\n    $rows_year = \'\';\\r\\n    $count_year = 0;\\r\\n\\r\\n    foreach ($months as $month => $days) {\\r\\n        $rows_month = \'\';\\r\\n        $count_month = 0;\\r\\n\\r\\n        foreach ($days as $day => $resources) {\\r\\n            $rows_day = [];\\r\\n            $count_day = 0;\\r\\n            $idx = 1;\\r\\n\\r\\n            foreach ($resources as $resource) {\\r\\n                $resource[\'day\'] = $day;\\r\\n                $resource[\'month\'] = $month;\\r\\n                $resource[\'year\'] = $year;\\r\\n                $resource[\'date\'] = strftime($dateFormat, $resource[$dateField]);\\r\\n                $resource[\'idx\'] = $idx++;\\r\\n                $resource[\'menutitle\'] = !empty($resource[\'menutitle\'])\\r\\n                    ? $resource[\'menutitle\']\\r\\n                    : $resource[\'pagetitle\'];\\r\\n                \\/\\/ Add placeholder [[+link]] if specified\\r\\n                if (!empty($scriptProperties[\'useWeblinkUrl\'])) {\\r\\n                    if (!isset($resource[\'context_key\'])) {\\r\\n                        $resource[\'context_key\'] = \'\';\\r\\n                    }\\r\\n                    if (isset($resource[\'class_key\']) && ($resource[\'class_key\'] == modWebLink::class)) {\\r\\n                        $resource[\'link\'] = isset($resource[\'content\']) && is_numeric(trim($resource[\'content\'], \'[]~ \'))\\r\\n                            ? $pdoFetch->makeUrl(intval(trim($resource[\'content\'], \'[]~ \')), $resource)\\r\\n                            : (isset($resource[\'content\']) ? $resource[\'content\'] : \'\');\\r\\n                    } else {\\r\\n                        $resource[\'link\'] = $pdoFetch->makeUrl($resource[\'id\'], $resource);\\r\\n                    }\\r\\n                } else {\\r\\n                    $resource[\'link\'] = \'\';\\r\\n                }\\r\\n                $tpl = $pdoFetch->defineChunk($resource);\\r\\n                $rows_day[] = $pdoFetch->getChunk($tpl, $resource);\\r\\n                $count_year++;\\r\\n                $count_month++;\\r\\n                $count_day++;\\r\\n            }\\r\\n\\r\\n            $rows_month .= !empty($tplDay)\\r\\n                ? $pdoFetch->getChunk($tplDay, [\\r\\n                    \'day\' => $day,\\r\\n                    \'month\' => $month,\\r\\n                    \'year\' => $year,\\r\\n                    \'count\' => $count_day,\\r\\n                    \'wrapper\' => implode($outputSeparator, $rows_day),\\r\\n                ], $pdoFetch->config(\'fastMode\'))\\r\\n                : implode($outputSeparator, $rows_day);\\r\\n        }\\r\\n\\r\\n        $rows_year .= !empty($tplMonth)\\r\\n            ? $pdoFetch->getChunk($tplMonth, [\\r\\n                \'month\' => $month,\\r\\n                \'month_name\' => $modx->lexicon(\'pdoarchive_month_\' . $month),\\r\\n                \'year\' => $year,\\r\\n                \'count\' => $count_month,\\r\\n                \'wrapper\' => $rows_month,\\r\\n            ], $pdoFetch->config(\'fastMode\'))\\r\\n            : $rows_month;\\r\\n    }\\r\\n\\r\\n    $output .= !empty($tplYear)\\r\\n        ? $pdoFetch->getChunk($tplYear, [\\r\\n            \'year\' => $year,\\r\\n            \'count\' => $count_year,\\r\\n            \'wrapper\' => $rows_year,\\r\\n        ], $pdoFetch->config(\'fastMode\'))\\r\\n        : $rows_year;\\r\\n}\\r\\n$pdoFetch->addTime(\'Rows processed\');\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\r\\n    $output = $pdoFetch->getChunk(\\r\\n        $tplWrapper,\\r\\n        array_merge($additionalPlaceholders, [\'output\' => $output]),\\r\\n        $pdoFetch->config(\'fastMode\')\\r\\n    );\\r\\n    $pdoFetch->addTime(\'Rows wrapped\');\\r\\n}\\r\\n\\r\\nif ($modx->user->isAuthenticated(\'mgr\') && (bool)$showLog) {\\r\\n    $modx->setPlaceholder(\'pdoArchiveLog\', print_r($pdoFetch->getTime(), true));\\r\\n}\\r\\n\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $output);\\r\\n} else {\\r\\n    return $output;\\r\\n}"}',
        'guid' => '91fccf2b2098301936c2a8f8fdef32da',
        'native_key' => 0,
        'signature' => '4d9f107d7557b0720ae9996ab681e406',
      ),
    ),
    'Plugins' => 
    array (
      'a704d7da9bffe12147a427bc0dc04757' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'MODX\\Revolution\\modPlugin',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"pdoTools","description":"","editor_type":0,"category":0,"cache_type":0,"plugincode":"\\/** @var \\\\MODX\\\\Revolution\\\\modX $modx *\\/\\r\\n\\r\\nswitch ($modx->event->name) {\\r\\n    case \'OnSiteRefresh\':\\r\\n        \\/** @var ModxPro\\\\PdoTools\\\\CoreTools $coreTools *\\/\\r\\n        if ($coreTools = $modx->services->get(\'pdotools\')) {\\r\\n            if ($coreTools->clearFileCache()) {\\r\\n                $modx->log(modX::LOG_LEVEL_INFO, $modx->lexicon(\'refresh_default\') . \': pdoTools\');\\r\\n            }\\r\\n        }\\r\\n        break;\\r\\n    case \'OnWebPagePrerender\':\\r\\n        \\/** @var ModxPro\\\\PdoTools\\\\Parsing\\\\Parser $parser *\\/\\r\\n        $parser = $modx->getParser();\\r\\n        if ($parser instanceof ModxPro\\\\PdoTools\\\\Parsing\\\\Parser) {\\r\\n            foreach ($parser->ignores as $key => $val) {\\r\\n                $modx->resource->_output = str_replace($key, $val, $modx->resource->_output);\\r\\n            }\\r\\n        }\\r\\n        break;\\r\\n}","locked":0,"properties":null,"disabled":0,"moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/plugins\\/plugin.pdotools.php","content":"\\/** @var \\\\MODX\\\\Revolution\\\\modX $modx *\\/\\r\\n\\r\\nswitch ($modx->event->name) {\\r\\n    case \'OnSiteRefresh\':\\r\\n        \\/** @var ModxPro\\\\PdoTools\\\\CoreTools $coreTools *\\/\\r\\n        if ($coreTools = $modx->services->get(\'pdotools\')) {\\r\\n            if ($coreTools->clearFileCache()) {\\r\\n                $modx->log(modX::LOG_LEVEL_INFO, $modx->lexicon(\'refresh_default\') . \': pdoTools\');\\r\\n            }\\r\\n        }\\r\\n        break;\\r\\n    case \'OnWebPagePrerender\':\\r\\n        \\/** @var ModxPro\\\\PdoTools\\\\Parsing\\\\Parser $parser *\\/\\r\\n        $parser = $modx->getParser();\\r\\n        if ($parser instanceof ModxPro\\\\PdoTools\\\\Parsing\\\\Parser) {\\r\\n            foreach ($parser->ignores as $key => $val) {\\r\\n                $modx->resource->_output = str_replace($key, $val, $modx->resource->_output);\\r\\n            }\\r\\n        }\\r\\n        break;\\r\\n}"}',
        'guid' => '9d73b156fb675548f9800654e4fc3eb8',
        'native_key' => NULL,
        'signature' => '7539f6d7860910a1db6ff3c83bbad1e9',
        'related_objects' => 
        array (
          'PluginEvents' => 
          array (
            '3770069295b9701c40e6a7eec3fbeb39' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'MODX\\Revolution\\modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnSiteRefresh","priority":0,"propertyset":0}',
              'guid' => 'a6b689dd3079a97ed5385db60e65ccf2',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnSiteRefresh',
              ),
              'signature' => '3301bd70fe503c8d07a958ceea40e890',
            ),
            'eb355b31b77497251d02a455d61cf76f' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'MODX\\Revolution\\modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnWebPagePrerender","priority":-101,"propertyset":0}',
              'guid' => '060c81685c90abf5f983e016c213c1db',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnWebPagePrerender',
              ),
              'signature' => '5dd363fb140eaf3198114f21fac71b32',
            ),
          ),
        ),
      ),
    ),
  ),
  'namespace' => 'pdotools',
  'resolve' => 
  array (
    0 => 
    array (
      'type' => 'file',
      'body' => '{"source":"pdotools-3.0.1-pl\\/MODX\\/Revolution\\/modCategory\\/76e046577518bccc91007a98338dce87\\/0\\/","target":"return MODX_ASSETS_PATH . \'components\\/\';","name":"pdotools"}',
    ),
    1 => 
    array (
      'type' => 'file',
      'body' => '{"source":"pdotools-3.0.1-pl\\/MODX\\/Revolution\\/modCategory\\/76e046577518bccc91007a98338dce87\\/1\\/","target":"return MODX_CORE_PATH . \'components\\/\';","name":"pdotools"}',
    ),
  ),
  'validate' => NULL,
  'vehicle_class' => 'xPDO\\Transport\\xPDOObjectVehicle',
  'guid' => '70d1509e7daa99447b56da25821dbcaf',
  'package' => '',
  'class' => 'MODX\\Revolution\\modCategory',
  'signature' => '76e046577518bccc91007a98338dce87',
  'native_key' => 1,
  'object' => '{"id":1,"parent":0,"category":"pdoTools","rank":0}',
);